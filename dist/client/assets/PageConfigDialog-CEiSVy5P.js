import{f as _,j as h,a2 as _n,a3 as $n,a4 as Fn,F as Hn,a5 as Re,r as c,a6 as A,a7 as Pe,$ as nn,B as bt,X as Xn,n as Wn,o as Yn,p as Un,q as Vn,s as Je,_ as Ht}from"./index-CdXfhykb.js";import{u as T,b as qn,L as Kn,S as Gn,a as Jn,P as Zn,A as Qn,C as er,c as rn,d as tr,D as nr,e as rr,g as kt,B as or,F as sr,f as ir}from"./index-D76KPUhV.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],cr=_("ArrowDown",ar);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ur=_("ArrowUp",lr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],fr=_("BookOpen",dr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gr=_("CircleCheckBig",hr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],vr=_("ClipboardList",pr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],on=_("Copy",mr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],yr=_("GripVertical",br);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],wr=_("Hash",xr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]],Dr=_("Heading",Cr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Rr=_("ListChecks",Sr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"M5 12h14",key:"1ays0h"}]],Nr=_("Minus",kr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 15h18",key:"5xshup"}]],Mr=_("PanelBottom",Er);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}]],Ir=_("PanelTop",jr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=[["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["polyline",{points:"8 8 12 4 16 8",key:"zo8t4w"}],["polyline",{points:"16 16 12 20 8 16",key:"1oyrid"}]],Tr=_("SeparatorHorizontal",Ar);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Br=_("Table",Or);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Pr=_("Type",Lr),zr={FileText:Hn,Heading:Dr,Minus:Nr,Type:Pr,Hash:wr,Calendar:er,AlignLeft:Qn,ChevronDown:Fn,CheckCircle:gr,ListChecks:Rr,Table:Br,Image:$n,Pen:Zn,List:Jn,BookOpen:fr,PanelTop:Ir,PanelBottom:Mr,Square:Gn,SeparatorHorizontal:Tr,LayoutTemplate:Kn,ClipboardList:vr,Building2:_n};function Xs(){const e=T(n=>n.addBlock),t=T(n=>n.isDocumentTemplate);return h.jsxs("div",{className:"flex w-56 flex-col border-r bg-background overflow-y-auto",children:[h.jsx("div",{className:"px-4 py-3 border-b",children:h.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Bloques"})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-4",children:qn.map(n=>{if(n.id==="document"&&!t)return null;const r=n.types.filter(o=>o!=="section_separator");return r.length===0?null:h.jsxs("div",{children:[h.jsx("p",{className:"px-2 pb-1 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:n.label}),h.jsx("div",{className:"space-y-0.5",children:r.map(o=>{const s=rn[o],i=zr[s.icon];return h.jsxs("button",{onClick:()=>e(o),className:Re("flex w-full items-center gap-2 rounded-md px-2 py-2 text-sm","hover:bg-accent hover:text-accent-foreground transition-colors","cursor-pointer select-none"),title:`Anadir ${s.label}`,children:[i&&h.jsx(i,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),h.jsx("span",{className:"truncate",children:s.label})]},o)})})]},n.id)})})]})}function _r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const ut=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ne(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Nt(e){return"nodeType"in e}function F(e){var t,n;return e?Ne(e)?e:Nt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Et(e){const{Document:t}=F(e);return e instanceof t}function Xe(e){return Ne(e)?!1:e instanceof F(e).HTMLElement}function sn(e){return e instanceof F(e).SVGElement}function Ee(e){return e?Ne(e)?e.document:Nt(e)?Et(e)?e:Xe(e)||sn(e)?e.ownerDocument:document:document:document}const Z=ut?c.useLayoutEffect:c.useEffect;function dt(e){const t=c.useRef(e);return Z(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function $r(){const e=c.useRef(null),t=c.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Fe(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Z(()=>{n.current!==e&&(n.current=e)},t),n}function We(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function nt(e){const t=dt(e),n=c.useRef(null),r=c.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function rt(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let yt={};function Ye(e,t){return c.useMemo(()=>{if(t)return t;const n=yt[e]==null?0:yt[e]+1;return yt[e]=n,e+"-"+n},[e,t])}function an(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[l,u]of a){const d=s[l];d!=null&&(s[l]=d+e*u)}return s},{...t})}}const ke=an(1),ot=an(-1);function Fr(e){return"clientX"in e&&"clientY"in e}function ft(e){if(!e)return!1;const{KeyboardEvent:t}=F(e.target);return t&&e instanceof t}function Hr(e){if(!e)return!1;const{TouchEvent:t}=F(e.target);return t&&e instanceof t}function st(e){if(Hr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Fr(e)?{x:e.clientX,y:e.clientY}:null}const ve=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ve.Translate.toString(e),ve.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Xt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Xr(e){return e.matches(Xt)?e:e.querySelector(Xt)}const Wr={display:"none"};function Yr(e){let{id:t,value:n}=e;return A.createElement("div",{id:t,style:Wr},n)}function Ur(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return A.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Vr(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const cn=c.createContext(null);function qr(e){const t=c.useContext(cn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Kr(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:o,event:s}=r;e.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[e]),t]}const Gr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Jr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Zr(e){let{announcements:t=Jr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Gr}=e;const{announce:s,announcement:i}=Vr(),a=Ye("DndLiveRegion"),[l,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),qr(c.useMemo(()=>({onDragStart(f){let{active:v}=f;s(t.onDragStart({active:v}))},onDragMove(f){let{active:v,over:p}=f;t.onDragMove&&s(t.onDragMove({active:v,over:p}))},onDragOver(f){let{active:v,over:p}=f;s(t.onDragOver({active:v,over:p}))},onDragEnd(f){let{active:v,over:p}=f;s(t.onDragEnd({active:v,over:p}))},onDragCancel(f){let{active:v,over:p}=f;s(t.onDragCancel({active:v,over:p}))}}),[s,t])),!l)return null;const d=A.createElement(A.Fragment,null,A.createElement(Yr,{id:r,value:o.draggable}),A.createElement(Ur,{id:a,announcement:i}));return n?Pe.createPortal(d,n):d}var B;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(B||(B={}));function it(){}function Qr(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function eo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Q=Object.freeze({x:0,y:0});function to(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function no(e,t){const n=st(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function ro(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function oo(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function so(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Wt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const io=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=Wt(t,t.left,t.top),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const u=to(Wt(l),o);s.push({id:a,data:{droppableContainer:i,value:u}})}}return s.sort(ro)};function ao(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,a=s-n;if(r<o&&n<s){const l=t.width*t.height,u=e.width*e.height,d=i*a,f=d/(l+u-d);return Number(f.toFixed(4))}return 0}const co=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const l=ao(a,t);l>0&&o.push({id:i,data:{droppableContainer:s,value:l}})}}return o.sort(oo)};function lo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function ln(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Q}function uo(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const fo=uo(1);function un(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ho(e,t,n){const r=un(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:a}=r,l=e.left-i-(1-o)*parseFloat(n),u=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,f=s?e.height/s:e.height;return{width:d,height:f,top:u,right:l+d,bottom:u+f,left:l}}const go={ignoreTransform:!1};function Me(e,t){t===void 0&&(t=go);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=F(e).getComputedStyle(e);u&&(n=ho(n,u,d))}const{top:r,left:o,width:s,height:i,bottom:a,right:l}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:l}}function Yt(e){return Me(e,{ignoreTransform:!0})}function po(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function vo(e,t){return t===void 0&&(t=F(e).getComputedStyle(e)),t.position==="fixed"}function mo(e,t){t===void 0&&(t=F(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function Mt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Et(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Xe(o)||sn(o)||n.includes(o))return n;const s=F(e).getComputedStyle(o);return o!==e&&mo(o,s)&&n.push(o),vo(o,s)?n:r(o.parentNode)}return e?r(e):n}function dn(e){const[t]=Mt(e,1);return t??null}function xt(e){return!ut||!e?null:Ne(e)?e:Nt(e)?Et(e)||e===Ee(e).scrollingElement?window:Xe(e)?e:null:null}function fn(e){return Ne(e)?e.scrollX:e.scrollLeft}function hn(e){return Ne(e)?e.scrollY:e.scrollTop}function Dt(e){return{x:fn(e),y:hn(e)}}var L;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(L||(L={}));function gn(e){return!ut||!e?!1:e===document.scrollingElement}function pn(e){const t={x:0,y:0},n=gn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const bo={x:.2,y:.2};function yo(e,t,n,r,o){let{top:s,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),o===void 0&&(o=bo);const{isTop:u,isBottom:d,isLeft:f,isRight:v}=pn(e),p={x:0,y:0},R={x:0,y:0},m={height:t.height*o.y,width:t.width*o.x};return!u&&s<=t.top+m.height?(p.y=L.Backward,R.y=r*Math.abs((t.top+m.height-s)/m.height)):!d&&l>=t.bottom-m.height&&(p.y=L.Forward,R.y=r*Math.abs((t.bottom-m.height-l)/m.height)),!v&&a>=t.right-m.width?(p.x=L.Forward,R.x=r*Math.abs((t.right-m.width-a)/m.width)):!f&&i<=t.left+m.width&&(p.x=L.Backward,R.x=r*Math.abs((t.left+m.width-i)/m.width)),{direction:p,speed:R}}function xo(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function vn(e){return e.reduce((t,n)=>ke(t,Dt(n)),Q)}function wo(e){return e.reduce((t,n)=>t+fn(n),0)}function Co(e){return e.reduce((t,n)=>t+hn(n),0)}function mn(e,t){if(t===void 0&&(t=Me),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);dn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Do=[["x",["left","right"],wo],["y",["top","bottom"],Co]];class jt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Mt(n),o=vn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,i,a]of Do)for(const l of i)Object.defineProperty(this,l,{get:()=>{const u=a(r),d=o[s]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ze{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function So(e){const{EventTarget:t}=F(e);return e instanceof t?e:Ee(e)}function wt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var J;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(J||(J={}));function Ut(e){e.preventDefault()}function Ro(e){e.stopPropagation()}var j;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(j||(j={}));const bn={start:[j.Space,j.Enter],cancel:[j.Esc],end:[j.Space,j.Enter,j.Tab]},ko=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case j.Right:return{...n,x:n.x+25};case j.Left:return{...n,x:n.x-25};case j.Down:return{...n,y:n.y+25};case j.Up:return{...n,y:n.y-25}}};class yn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ze(Ee(n)),this.windowListeners=new ze(F(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(J.Resize,this.handleCancel),this.windowListeners.add(J.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(J.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&mn(r),n(Q)}handleKeyDown(t){if(ft(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=bn,coordinateGetter:i=ko,scrollBehavior:a="smooth"}=o,{code:l}=t;if(s.end.includes(l)){this.handleEnd(t);return}if(s.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Q;this.referenceCoordinates||(this.referenceCoordinates=d);const f=i(t,{active:n,context:r.current,currentCoordinates:d});if(f){const v=ot(f,d),p={x:0,y:0},{scrollableAncestors:R}=r.current;for(const m of R){const b=t.code,{isTop:S,isRight:k,isLeft:C,isBottom:E,maxScroll:N,minScroll:w}=pn(m),x=xo(m),g={x:Math.min(b===j.Right?x.right-x.width/2:x.right,Math.max(b===j.Right?x.left:x.left+x.width/2,f.x)),y:Math.min(b===j.Down?x.bottom-x.height/2:x.bottom,Math.max(b===j.Down?x.top:x.top+x.height/2,f.y))},D=b===j.Right&&!k||b===j.Left&&!C,y=b===j.Down&&!E||b===j.Up&&!S;if(D&&g.x!==f.x){const M=m.scrollLeft+v.x,O=b===j.Right&&M<=N.x||b===j.Left&&M>=w.x;if(O&&!v.y){m.scrollTo({left:M,behavior:a});return}O?p.x=m.scrollLeft-M:p.x=b===j.Right?m.scrollLeft-N.x:m.scrollLeft-w.x,p.x&&m.scrollBy({left:-p.x,behavior:a});break}else if(y&&g.y!==f.y){const M=m.scrollTop+v.y,O=b===j.Down&&M<=N.y||b===j.Up&&M>=w.y;if(O&&!v.x){m.scrollTo({top:M,behavior:a});return}O?p.y=m.scrollTop-M:p.y=b===j.Down?m.scrollTop-N.y:m.scrollTop-w.y,p.y&&m.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,ke(ot(f,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}yn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=bn,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function Vt(e){return!!(e&&"distance"in e)}function qt(e){return!!(e&&"delay"in e)}class It{constructor(t,n,r){var o;r===void 0&&(r=So(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:i}=s;this.props=t,this.events=n,this.document=Ee(i),this.documentListeners=new ze(this.document),this.listeners=new ze(r),this.windowListeners=new ze(F(i)),this.initialCoordinates=(o=st(s))!=null?o:Q,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(J.Resize,this.handleCancel),this.windowListeners.add(J.DragStart,Ut),this.windowListeners.add(J.VisibilityChange,this.handleCancel),this.windowListeners.add(J.ContextMenu,Ut),this.documentListeners.add(J.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Vt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(J.Click,Ro,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(J.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const l=(n=st(t))!=null?n:Q,u=ot(o,l);if(!r&&a){if(Vt(a)){if(a.tolerance!=null&&wt(u,a.tolerance))return this.handleCancel();if(wt(u,a.distance))return this.handleStart()}if(qt(a)&&wt(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}t.cancelable&&t.preventDefault(),i(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===j.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const No={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class At extends It{constructor(t){const{event:n}=t,r=Ee(n.target);super(t,No,r)}}At.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Eo={move:{name:"mousemove"},end:{name:"mouseup"}};var St;(function(e){e[e.RightClick=2]="RightClick"})(St||(St={}));class Mo extends It{constructor(t){super(t,Eo,Ee(t.event.target))}}Mo.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===St.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ct={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class jo extends It{constructor(t){super(t,Ct)}static setup(){return window.addEventListener(Ct.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ct.move.name,t)};function t(){}}}jo.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var _e;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(_e||(_e={}));var at;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(at||(at={}));function Io(e){let{acceleration:t,activator:n=_e.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=at.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:v}=e;const p=To({delta:f,disabled:!s}),[R,m]=$r(),b=c.useRef({x:0,y:0}),S=c.useRef({x:0,y:0}),k=c.useMemo(()=>{switch(n){case _e.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case _e.DraggableRect:return o}},[n,o,l]),C=c.useRef(null),E=c.useCallback(()=>{const w=C.current;if(!w)return;const x=b.current.x*S.current.x,g=b.current.y*S.current.y;w.scrollBy(x,g)},[]),N=c.useMemo(()=>a===at.TreeOrder?[...u].reverse():u,[a,u]);c.useEffect(()=>{if(!s||!u.length||!k){m();return}for(const w of N){if((r==null?void 0:r(w))===!1)continue;const x=u.indexOf(w),g=d[x];if(!g)continue;const{direction:D,speed:y}=yo(w,g,k,t,v);for(const M of["x","y"])p[M][D[M]]||(y[M]=0,D[M]=0);if(y.x>0||y.y>0){m(),C.current=w,R(E,i),b.current=y,S.current=D;return}}b.current={x:0,y:0},S.current={x:0,y:0},m()},[t,E,r,m,s,i,JSON.stringify(k),JSON.stringify(p),R,u,N,d,JSON.stringify(v)])}const Ao={x:{[L.Backward]:!1,[L.Forward]:!1},y:{[L.Backward]:!1,[L.Forward]:!1}};function To(e){let{delta:t,disabled:n}=e;const r=rt(t);return We(o=>{if(n||!r||!o)return Ao;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[L.Backward]:o.x[L.Backward]||s.x===-1,[L.Forward]:o.x[L.Forward]||s.x===1},y:{[L.Backward]:o.y[L.Backward]||s.y===-1,[L.Forward]:o.y[L.Forward]||s.y===1}}},[n,t,r])}function Oo(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return We(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function Bo(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...s]},[]),[e,t])}var He;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(He||(He={}));var Rt;(function(e){e.Optimized="optimized"})(Rt||(Rt={}));const Kt=new Map;function Lo(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=c.useState(null),{frequency:a,measure:l,strategy:u}=o,d=c.useRef(e),f=b(),v=Fe(f),p=c.useCallback(function(S){S===void 0&&(S=[]),!v.current&&i(k=>k===null?S:k.concat(S.filter(C=>!k.includes(C))))},[v]),R=c.useRef(null),m=We(S=>{if(f&&!n)return Kt;if(!S||S===Kt||d.current!==e||s!=null){const k=new Map;for(let C of e){if(!C)continue;if(s&&s.length>0&&!s.includes(C.id)&&C.rect.current){k.set(C.id,C.rect.current);continue}const E=C.node.current,N=E?new jt(l(E),E):null;C.rect.current=N,N&&k.set(C.id,N)}return k}return S},[e,s,n,f,l]);return c.useEffect(()=>{d.current=e},[e]),c.useEffect(()=>{f||p()},[n,f]),c.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),c.useEffect(()=>{f||typeof a!="number"||R.current!==null||(R.current=setTimeout(()=>{p(),R.current=null},a))},[a,f,p,...r]),{droppableRects:m,measureDroppableContainers:p,measuringScheduled:s!=null};function b(){switch(u){case He.Always:return!1;case He.BeforeDragging:return n;default:return!n}}}function Tt(e,t){return We(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Po(e,t){return Tt(e,t)}function zo(e){let{callback:t,disabled:n}=e;const r=dt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return c.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function ht(e){let{callback:t,disabled:n}=e;const r=dt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return c.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function _o(e){return new jt(Me(e),e)}function Gt(e,t,n){t===void 0&&(t=_o);const[r,o]=c.useState(null);function s(){o(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const i=zo({callback(l){if(e)for(const u of l){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),a=ht({callback:s});return Z(()=>{s(),e?(a==null||a.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[e]),r}function $o(e){const t=Tt(e);return ln(e,t)}const Jt=[];function Fo(e){const t=c.useRef(e),n=We(r=>e?r&&r!==Jt&&e&&t.current&&e.parentNode===t.current.parentNode?r:Mt(e):Jt,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Ho(e){const[t,n]=c.useState(null),r=c.useRef(e),o=c.useCallback(s=>{const i=xt(s.target);i&&n(a=>a?(a.set(i,Dt(i)),new Map(a)):null)},[]);return c.useEffect(()=>{const s=r.current;if(e!==s){i(s);const a=e.map(l=>{const u=xt(l);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,Dt(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(s)};function i(a){a.forEach(l=>{const u=xt(l);u==null||u.removeEventListener("scroll",o)})}},[o,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,i)=>ke(s,i),Q):vn(e):Q,[e,t])}function Zt(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==Q;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ot(e,n.current):Q}function Xo(e){c.useEffect(()=>{if(!ut)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Wo(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,t)},n},{}),[e,t])}function xn(e){return c.useMemo(()=>e?po(e):null,[e])}const Qt=[];function Yo(e,t){t===void 0&&(t=Me);const[n]=e,r=xn(n?F(n):null),[o,s]=c.useState(Qt);function i(){s(()=>e.length?e.map(l=>gn(l)?r:new jt(t(l),l)):Qt)}const a=ht({callback:i});return Z(()=>{a==null||a.disconnect(),i(),e.forEach(l=>a==null?void 0:a.observe(l))},[e]),o}function wn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Xe(t)?t:e}function Uo(e){let{measure:t}=e;const[n,r]=c.useState(null),o=c.useCallback(u=>{for(const{target:d}of u)if(Xe(d)){r(f=>{const v=t(d);return f?{...f,width:v.width,height:v.height}:v});break}},[t]),s=ht({callback:o}),i=c.useCallback(u=>{const d=wn(u);s==null||s.disconnect(),d&&(s==null||s.observe(d)),r(d?t(d):null)},[t,s]),[a,l]=nt(i);return c.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const Vo=[{sensor:At,options:{}},{sensor:yn,options:{}}],qo={current:{}},tt={draggable:{measure:Yt},droppable:{measure:Yt,strategy:He.WhileDragging,frequency:Rt.Optimized},dragOverlay:{measure:Me}};class $e extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ko={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new $e,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:it},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tt,measureDroppableContainers:it,windowRect:null,measuringScheduled:!1},Cn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:it,draggableNodes:new Map,over:null,measureDroppableContainers:it},Ue=c.createContext(Cn),Dn=c.createContext(Ko);function Go(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new $e}}}function Jo(e,t){switch(t.type){case B.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case B.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case B.DragEnd:case B.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case B.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new $e(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case B.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new $e(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case B.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new $e(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Zo(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=c.useContext(Ue),s=rt(r),i=rt(n==null?void 0:n.id);return c.useEffect(()=>{if(!t&&!r&&s&&i!=null){if(!ft(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const f=Xr(d);if(f){f.focus();break}}})}},[r,t,o,i,s]),null}function Sn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function Qo(e){return c.useMemo(()=>({draggable:{...tt.draggable,...e==null?void 0:e.draggable},droppable:{...tt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...tt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function es(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=c.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;Z(()=>{if(!i&&!a||!t){s.current=!1;return}if(s.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=ln(d,r);if(i||(f.x=0),a||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const v=dn(u);v&&v.scrollBy({top:f.y,left:f.x})}},[t,i,a,r,n])}const gt=c.createContext({...Q,scaleX:1,scaleY:1});var pe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(pe||(pe={}));const ts=c.memo(function(t){var n,r,o,s;let{id:i,accessibility:a,autoScroll:l=!0,children:u,sensors:d=Vo,collisionDetection:f=co,measuring:v,modifiers:p,...R}=t;const m=c.useReducer(Jo,void 0,Go),[b,S]=m,[k,C]=Kr(),[E,N]=c.useState(pe.Uninitialized),w=E===pe.Initialized,{draggable:{active:x,nodes:g,translate:D},droppable:{containers:y}}=b,M=x!=null?g.get(x):null,O=c.useRef({initial:null,translated:null}),W=c.useMemo(()=>{var z;return x!=null?{id:x,data:(z=M==null?void 0:M.data)!=null?z:qo,rect:O}:null},[x,M]),q=c.useRef(null),[ce,me]=c.useState(null),[$,H]=c.useState(null),re=Fe(R,Object.values(R)),je=Ye("DndDescribedBy",i),Ve=c.useMemo(()=>y.getEnabled(),[y]),X=Qo(v),{droppableRects:oe,measureDroppableContainers:be,measuringScheduled:Ie}=Lo(Ve,{dragging:w,dependencies:[D.x,D.y],config:X.droppable}),K=Oo(g,x),qe=c.useMemo(()=>$?st($):null,[$]),le=zn(),se=Po(K,X.draggable.measure);es({activeNode:x!=null?g.get(x):null,config:le.layoutShiftCompensation,initialRect:se,measure:X.draggable.measure});const I=Gt(K,X.draggable.measure,se),Ae=Gt(K?K.parentElement:null),ee=c.useRef({activatorEvent:null,active:null,activeNode:K,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:g,draggingNode:null,draggingNodeRect:null,droppableContainers:y,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ye=y.getNodeFor((n=ee.current.over)==null?void 0:n.id),ie=Uo({measure:X.dragOverlay.measure}),xe=(r=ie.nodeRef.current)!=null?r:K,we=w?(o=ie.rect)!=null?o:I:null,Ot=!!(ie.nodeRef.current&&ie.rect),Bt=$o(Ot?null:I),pt=xn(xe?F(xe):null),ue=Fo(w?ye??K:null),Ke=Yo(ue),Ge=Sn(p,{transform:{x:D.x-Bt.x,y:D.y-Bt.y,scaleX:1,scaleY:1},activatorEvent:$,active:W,activeNodeRect:I,containerNodeRect:Ae,draggingNodeRect:we,over:ee.current.over,overlayNodeRect:ie.rect,scrollableAncestors:ue,scrollableAncestorRects:Ke,windowRect:pt}),Lt=qe?ke(qe,D):null,Pt=Ho(ue),In=Zt(Pt),An=Zt(Pt,[I]),Ce=ke(Ge,In),De=we?fo(we,Ge):null,Te=W&&De?f({active:W,collisionRect:De,droppableRects:oe,droppableContainers:Ve,pointerCoordinates:Lt}):null,zt=so(Te,"id"),[de,_t]=c.useState(null),Tn=Ot?Ge:ke(Ge,An),On=lo(Tn,(s=de==null?void 0:de.rect)!=null?s:null,I),vt=c.useRef(null),$t=c.useCallback((z,Y)=>{let{sensor:U,options:fe}=Y;if(q.current==null)return;const G=g.get(q.current);if(!G)return;const V=z.nativeEvent,te=new U({active:q.current,activeNode:G,event:V,options:fe,context:ee,onAbort(P){if(!g.get(P))return;const{onDragAbort:ne}=re.current,ae={id:P};ne==null||ne(ae),k({type:"onDragAbort",event:ae})},onPending(P,he,ne,ae){if(!g.get(P))return;const{onDragPending:Be}=re.current,ge={id:P,constraint:he,initialCoordinates:ne,offset:ae};Be==null||Be(ge),k({type:"onDragPending",event:ge})},onStart(P){const he=q.current;if(he==null)return;const ne=g.get(he);if(!ne)return;const{onDragStart:ae}=re.current,Oe={activatorEvent:V,active:{id:he,data:ne.data,rect:O}};Pe.unstable_batchedUpdates(()=>{ae==null||ae(Oe),N(pe.Initializing),S({type:B.DragStart,initialCoordinates:P,active:he}),k({type:"onDragStart",event:Oe}),me(vt.current),H(V)})},onMove(P){S({type:B.DragMove,coordinates:P})},onEnd:Se(B.DragEnd),onCancel:Se(B.DragCancel)});vt.current=te;function Se(P){return async function(){const{active:ne,collisions:ae,over:Oe,scrollAdjustedTranslate:Be}=ee.current;let ge=null;if(ne&&Be){const{cancelDrop:Le}=re.current;ge={activatorEvent:V,active:ne,collisions:ae,delta:Be,over:Oe},P===B.DragEnd&&typeof Le=="function"&&await Promise.resolve(Le(ge))&&(P=B.DragCancel)}q.current=null,Pe.unstable_batchedUpdates(()=>{S({type:P}),N(pe.Uninitialized),_t(null),me(null),H(null),vt.current=null;const Le=P===B.DragEnd?"onDragEnd":"onDragCancel";if(ge){const mt=re.current[Le];mt==null||mt(ge),k({type:Le,event:ge})}})}}},[g]),Bn=c.useCallback((z,Y)=>(U,fe)=>{const G=U.nativeEvent,V=g.get(fe);if(q.current!==null||!V||G.dndKit||G.defaultPrevented)return;const te={active:V};z(U,Y.options,te)===!0&&(G.dndKit={capturedBy:Y.sensor},q.current=fe,$t(U,Y))},[g,$t]),Ft=Bo(d,Bn);Xo(d),Z(()=>{I&&E===pe.Initializing&&N(pe.Initialized)},[I,E]),c.useEffect(()=>{const{onDragMove:z}=re.current,{active:Y,activatorEvent:U,collisions:fe,over:G}=ee.current;if(!Y||!U)return;const V={active:Y,activatorEvent:U,collisions:fe,delta:{x:Ce.x,y:Ce.y},over:G};Pe.unstable_batchedUpdates(()=>{z==null||z(V),k({type:"onDragMove",event:V})})},[Ce.x,Ce.y]),c.useEffect(()=>{const{active:z,activatorEvent:Y,collisions:U,droppableContainers:fe,scrollAdjustedTranslate:G}=ee.current;if(!z||q.current==null||!Y||!G)return;const{onDragOver:V}=re.current,te=fe.get(zt),Se=te&&te.rect.current?{id:te.id,rect:te.rect.current,data:te.data,disabled:te.disabled}:null,P={active:z,activatorEvent:Y,collisions:U,delta:{x:G.x,y:G.y},over:Se};Pe.unstable_batchedUpdates(()=>{_t(Se),V==null||V(P),k({type:"onDragOver",event:P})})},[zt]),Z(()=>{ee.current={activatorEvent:$,active:W,activeNode:K,collisionRect:De,collisions:Te,droppableRects:oe,draggableNodes:g,draggingNode:xe,draggingNodeRect:we,droppableContainers:y,over:de,scrollableAncestors:ue,scrollAdjustedTranslate:Ce},O.current={initial:we,translated:De}},[W,K,Te,De,g,xe,we,oe,y,de,ue,Ce]),Io({...le,delta:D,draggingRect:De,pointerCoordinates:Lt,scrollableAncestors:ue,scrollableAncestorRects:Ke});const Ln=c.useMemo(()=>({active:W,activeNode:K,activeNodeRect:I,activatorEvent:$,collisions:Te,containerNodeRect:Ae,dragOverlay:ie,draggableNodes:g,droppableContainers:y,droppableRects:oe,over:de,measureDroppableContainers:be,scrollableAncestors:ue,scrollableAncestorRects:Ke,measuringConfiguration:X,measuringScheduled:Ie,windowRect:pt}),[W,K,I,$,Te,Ae,ie,g,y,oe,de,be,ue,Ke,X,Ie,pt]),Pn=c.useMemo(()=>({activatorEvent:$,activators:Ft,active:W,activeNodeRect:I,ariaDescribedById:{draggable:je},dispatch:S,draggableNodes:g,over:de,measureDroppableContainers:be}),[$,Ft,W,I,S,je,g,de,be]);return A.createElement(cn.Provider,{value:C},A.createElement(Ue.Provider,{value:Pn},A.createElement(Dn.Provider,{value:Ln},A.createElement(gt.Provider,{value:On},u)),A.createElement(Zo,{disabled:(a==null?void 0:a.restoreFocus)===!1})),A.createElement(Zr,{...a,hiddenTextDescribedById:je}));function zn(){const z=(ce==null?void 0:ce.autoScrollEnabled)===!1,Y=typeof l=="object"?l.enabled===!1:l===!1,U=w&&!z&&!Y;return typeof l=="object"?{...l,enabled:U}:{enabled:U}}}),ns=c.createContext(null),en="button",rs="Draggable";function os(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=Ye(rs),{activators:i,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:v}=c.useContext(Ue),{role:p=en,roleDescription:R="draggable",tabIndex:m=0}=o??{},b=(l==null?void 0:l.id)===t,S=c.useContext(b?gt:ns),[k,C]=nt(),[E,N]=nt(),w=Wo(i,t),x=Fe(n);Z(()=>(f.set(t,{id:t,key:s,node:k,activatorNode:E,data:x}),()=>{const D=f.get(t);D&&D.key===s&&f.delete(t)}),[f,t]);const g=c.useMemo(()=>({role:p,tabIndex:m,"aria-disabled":r,"aria-pressed":b&&p===en?!0:void 0,"aria-roledescription":R,"aria-describedby":d.draggable}),[r,p,m,b,R,d.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:g,isDragging:b,listeners:r?void 0:w,node:k,over:v,setNodeRef:C,setActivatorNodeRef:N,transform:S}}function Rn(){return c.useContext(Dn)}const ss="Droppable",is={timeout:25};function as(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=Ye(ss),{active:i,dispatch:a,over:l,measureDroppableContainers:u}=c.useContext(Ue),d=c.useRef({disabled:n}),f=c.useRef(!1),v=c.useRef(null),p=c.useRef(null),{disabled:R,updateMeasurementsFor:m,timeout:b}={...is,...o},S=Fe(m??r),k=c.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(S.current)?S.current:[S.current]),p.current=null},b)},[b]),C=ht({callback:k,disabled:R||!i}),E=c.useCallback((g,D)=>{C&&(D&&(C.unobserve(D),f.current=!1),g&&C.observe(g))},[C]),[N,w]=nt(E),x=Fe(t);return c.useEffect(()=>{!C||!N.current||(C.disconnect(),f.current=!1,C.observe(N.current))},[N,C]),c.useEffect(()=>(a({type:B.RegisterDroppable,element:{id:r,key:s,disabled:n,node:N,rect:v,data:x}}),()=>a({type:B.UnregisterDroppable,key:s,id:r})),[r]),c.useEffect(()=>{n!==d.current.disabled&&(a({type:B.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,a]),{active:i,rect:v,isOver:(l==null?void 0:l.id)===r,node:N,over:l,setNodeRef:w}}function cs(e){let{animation:t,children:n}=e;const[r,o]=c.useState(null),[s,i]=c.useState(null),a=rt(n);return!n&&!r&&a&&o(a),Z(()=>{if(!s)return;const l=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(l==null||u==null){o(null);return}Promise.resolve(t(u,s)).then(()=>{o(null)})},[t,r,s]),A.createElement(A.Fragment,null,n,r?c.cloneElement(r,{ref:i}):null)}const ls={x:0,y:0,scaleX:1,scaleY:1};function us(e){let{children:t}=e;return A.createElement(Ue.Provider,{value:Cn},A.createElement(gt.Provider,{value:ls},t))}const ds={position:"fixed",touchAction:"none"},fs=e=>ft(e)?"transform 250ms ease":void 0,hs=c.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:s,className:i,rect:a,style:l,transform:u,transition:d=fs}=e;if(!a)return null;const f=o?u:{...u,scaleX:1,scaleY:1},v={...ds,width:a.width,height:a.height,top:a.top,left:a.left,transform:ve.Transform.toString(f),transformOrigin:o&&r?no(r,a):void 0,transition:typeof d=="function"?d(r):d,...l};return A.createElement(n,{className:i,style:v,ref:t},s)}),gs=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:s,className:i}=e;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(o[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,u]of Object.entries(o))n.node.style.setProperty(l,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},ps=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:ve.Transform.toString(t)},{transform:ve.Transform.toString(n)}]},vs={duration:250,easing:"ease",keyframes:ps,sideEffects:gs({styles:{active:{opacity:"0"}}})};function ms(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return dt((s,i)=>{if(t===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const u=wn(i);if(!u)return;const{transform:d}=F(i).getComputedStyle(i),f=un(d);if(!f)return;const v=typeof t=="function"?t:bs(t);return mn(l,o.draggable.measure),v({active:{id:s,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:o,transform:f})})}function bs(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...vs,...e};return s=>{let{active:i,dragOverlay:a,transform:l,...u}=s;if(!t)return;const d={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},f={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/a.rect.height:1},v={x:l.x-d.x,y:l.y-d.y,...f},p=o({...u,active:i,dragOverlay:a,transform:{initial:l,final:v}}),[R]=p,m=p[p.length-1];if(JSON.stringify(R)===JSON.stringify(m))return;const b=r==null?void 0:r({active:i,dragOverlay:a,...u}),S=a.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(k=>{S.onfinish=()=>{b==null||b(),k()}})}}let tn=0;function ys(e){return c.useMemo(()=>{if(e!=null)return tn++,tn},[e])}const xs=A.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:s,modifiers:i,wrapperElement:a="div",className:l,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:v,containerNodeRect:p,draggableNodes:R,droppableContainers:m,dragOverlay:b,over:S,measuringConfiguration:k,scrollableAncestors:C,scrollableAncestorRects:E,windowRect:N}=Rn(),w=c.useContext(gt),x=ys(f==null?void 0:f.id),g=Sn(i,{activatorEvent:d,active:f,activeNodeRect:v,containerNodeRect:p,draggingNodeRect:b.rect,over:S,overlayNodeRect:b.rect,scrollableAncestors:C,scrollableAncestorRects:E,transform:w,windowRect:N}),D=Tt(v),y=ms({config:r,draggableNodes:R,droppableContainers:m,measuringConfiguration:k}),M=D?b.setRef:void 0;return A.createElement(us,null,A.createElement(cs,{animation:y},f&&x?A.createElement(hs,{key:x,id:f.id,ref:M,as:a,activatorEvent:d,adjustScale:t,className:l,transition:s,rect:D,style:{zIndex:u,...o},transform:g},n):null))});function kn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ws(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function Ze(e){return e!==null&&e>=0}function Cs(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ds(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Nn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=kn(t,r,n),i=t[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},Qe={scaleX:1,scaleY:1},Ss=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:i}=e;const a=(t=s[n])!=null?t:r;if(!a)return null;if(o===n){const u=s[i];return u?{x:0,y:n<i?u.top+u.height-(a.top+a.height):u.top-a.top,...Qe}:null}const l=Rs(s,o,n);return o>n&&o<=i?{x:0,y:-a.height-l,...Qe}:o<n&&o>=i?{x:0,y:a.height+l,...Qe}:{x:0,y:0,...Qe}};function Rs(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return r?n<t?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const En="Sortable",Mn=A.createContext({activeIndex:-1,containerId:En,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Nn,disabled:{draggable:!1,droppable:!1}});function ks(e){let{children:t,id:n,items:r,strategy:o=Nn,disabled:s=!1}=e;const{active:i,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:d}=Rn(),f=Ye(En,n),v=a.rect!==null,p=c.useMemo(()=>r.map(w=>typeof w=="object"&&"id"in w?w.id:w),[r]),R=i!=null,m=i?p.indexOf(i.id):-1,b=u?p.indexOf(u.id):-1,S=c.useRef(p),k=!Cs(p,S.current),C=b!==-1&&m===-1||k,E=Ds(s);Z(()=>{k&&R&&d(p)},[k,p,R,d]),c.useEffect(()=>{S.current=p},[p]);const N=c.useMemo(()=>({activeIndex:m,containerId:f,disabled:E,disableTransforms:C,items:p,overIndex:b,useDragOverlay:v,sortedRects:ws(p,l),strategy:o}),[m,f,E.draggable,E.droppable,C,p,b,l,v,o]);return A.createElement(Mn.Provider,{value:N},t)}const Ns=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return kn(n,r,o).indexOf(t)},Es=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:u}=e;return!u||!r||a!==s&&o===i?!1:n?!0:i!==o&&t===l},Ms={duration:200,easing:"ease"},jn="transform",js=ve.Transition.toString({property:jn,duration:0,easing:"linear"}),Is={roleDescription:"sortable"};function As(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=c.useState(null),a=c.useRef(n);return Z(()=>{if(!t&&n!==a.current&&r.current){const l=o.current;if(l){const u=Me(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&i(d)}}n!==a.current&&(a.current=n)},[t,n,r,o]),c.useEffect(()=>{s&&i(null)},[s]),s}function Ts(e){let{animateLayoutChanges:t=Es,attributes:n,disabled:r,data:o,getNewIndex:s=Ns,id:i,strategy:a,resizeObserverConfig:l,transition:u=Ms}=e;const{items:d,containerId:f,activeIndex:v,disabled:p,disableTransforms:R,sortedRects:m,overIndex:b,useDragOverlay:S,strategy:k}=c.useContext(Mn),C=Os(r,p),E=d.indexOf(i),N=c.useMemo(()=>({sortable:{containerId:f,index:E,items:d},...o}),[f,o,E,d]),w=c.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:x,node:g,isOver:D,setNodeRef:y}=as({id:i,data:N,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...l}}),{active:M,activatorEvent:O,activeNodeRect:W,attributes:q,setNodeRef:ce,listeners:me,isDragging:$,over:H,setActivatorNodeRef:re,transform:je}=os({id:i,data:N,attributes:{...Is,...n},disabled:C.draggable}),Ve=_r(y,ce),X=!!M,oe=X&&!R&&Ze(v)&&Ze(b),be=!S&&$,Ie=be&&oe?je:null,qe=oe?Ie??(a??k)({rects:m,activeNodeRect:W,activeIndex:v,overIndex:b,index:E}):null,le=Ze(v)&&Ze(b)?s({id:i,items:d,activeIndex:v,overIndex:b}):E,se=M==null?void 0:M.id,I=c.useRef({activeId:se,items:d,newIndex:le,containerId:f}),Ae=d!==I.current.items,ee=t({active:M,containerId:f,isDragging:$,isSorting:X,id:i,index:E,items:d,newIndex:I.current.newIndex,previousItems:I.current.items,previousContainerId:I.current.containerId,transition:u,wasDragging:I.current.activeId!=null}),ye=As({disabled:!ee,index:E,node:g,rect:x});return c.useEffect(()=>{X&&I.current.newIndex!==le&&(I.current.newIndex=le),f!==I.current.containerId&&(I.current.containerId=f),d!==I.current.items&&(I.current.items=d)},[X,le,f,d]),c.useEffect(()=>{if(se===I.current.activeId)return;if(se!=null&&I.current.activeId==null){I.current.activeId=se;return}const xe=setTimeout(()=>{I.current.activeId=se},50);return()=>clearTimeout(xe)},[se]),{active:M,activeIndex:v,attributes:q,data:N,rect:x,index:E,newIndex:le,items:d,isOver:D,isSorting:X,isDragging:$,listeners:me,node:g,overIndex:b,over:H,setNodeRef:Ve,setActivatorNodeRef:re,setDroppableNodeRef:y,setDraggableNodeRef:ce,transform:ye??qe,transition:ie()};function ie(){if(ye||Ae&&I.current.newIndex===E)return js;if(!(be&&!ft(O)||!u)&&(X||ee))return ve.Transition.toString({...u,property:jn})}}function Os(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}j.Down,j.Right,j.Up,j.Left;function Bs(e,t,n){const r=e.slice(),[o]=r.splice(t,1);return o!==void 0&&r.splice(n,0,o),r}const ct=794,lt=1123,et=3.78,Ls=new Set(["header","section_title","divider","tristate","checklist","table","section_separator","table_of_contents","cover_header","page_header","page_footer","back_cover","page_break","content_placeholder","intervention_data","client_data"]);function Ps(e){if(Ls.has(e.type))return"w-full";const t=e.config.width||"full";return sr[t]||"w-full"}function zs({block:e,index:t,totalBlocks:n,onHeightChange:r}){const o=T(y=>y.selectedBlockId),s=T(y=>y.selectBlock),i=T(y=>y.removeBlock),a=T(y=>y.duplicateBlock),l=T(y=>y.moveBlock),u=o===e.id,d=e.type==="section_separator",f=kt(e.type),v=Ps(e),p=v==="w-full",[R,m]=c.useState(!1),b=c.useRef(null),{attributes:S,listeners:k,setNodeRef:C,transform:E,transition:N,isDragging:w}=Ts({id:e.id,disabled:d}),x={transform:ve.Transform.toString(E),transition:N,opacity:w?.3:1},g=c.useCallback(y=>{b.current=y,C(y)},[C]);if(c.useEffect(()=>{if(!b.current)return;const y=new ResizeObserver(M=>{for(const O of M)r(e.id,O.contentRect.height)});return y.observe(b.current),()=>y.disconnect()},[e.id,r]),!f)return h.jsx("div",{ref:g,style:x,className:Re(v,"p-0.5"),children:h.jsxs("div",{className:"rounded border border-dashed border-destructive bg-destructive/5 p-4 text-sm text-destructive",children:["Bloque desconocido: ",e.type]})});const D=f.EditorPreview;return d?h.jsx("div",{ref:g,style:x,className:Re("w-full cursor-pointer rounded-sm transition-all",u&&"ring-2 ring-primary ring-offset-1"),onClick:y=>{y.stopPropagation(),s(e.id)},children:h.jsx(D,{block:e,isSelected:u})}):h.jsx("div",{ref:g,style:{...x,padding:"1px"},className:Re(v,"relative group"),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:h.jsxs("div",{className:Re("relative rounded-sm transition-all cursor-pointer",u&&"ring-2 ring-primary ring-offset-1",!u&&R&&"ring-1 ring-primary/30"),onClick:y=>{y.stopPropagation(),s(e.id)},children:[(R||u)&&h.jsxs("div",{className:Re("absolute z-20 flex items-center gap-0.5 rounded-md border bg-background/95 shadow-sm backdrop-blur-sm px-1 py-0.5",p?"-top-7 right-2":"-top-7 left-1/2 -translate-x-1/2"),onClick:y=>y.stopPropagation(),children:[h.jsx("button",{className:"rounded p-1 hover:bg-accent text-muted-foreground disabled:opacity-30",onClick:()=>l(e.id,"up"),disabled:t===0,title:"Mover arriba",children:h.jsx(ur,{className:"h-3 w-3"})}),h.jsx("button",{className:"rounded p-1 text-muted-foreground cursor-grab active:cursor-grabbing",title:"Arrastrar",...S,...k,children:h.jsx(yr,{className:"h-3 w-3"})}),h.jsx("button",{className:"rounded p-1 hover:bg-accent text-muted-foreground disabled:opacity-30",onClick:()=>l(e.id,"down"),disabled:t===n-1,title:"Mover abajo",children:h.jsx(cr,{className:"h-3 w-3"})}),h.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),h.jsx("button",{className:"rounded p-1 hover:bg-accent text-muted-foreground",onClick:()=>a(e.id),title:"Duplicar",children:h.jsx(on,{className:"h-3 w-3"})}),h.jsx("button",{className:"rounded p-1 hover:bg-destructive/10 text-destructive",onClick:()=>i(e.id),title:"Eliminar",children:h.jsx(nn,{className:"h-3 w-3"})})]}),h.jsx("div",{className:or[e.config.align||"left"],children:h.jsx(D,{block:e,isSelected:u})})]})})}function _s({block:e}){const t=kt(e.type);if(!t)return null;const n=t.EditorPreview;return h.jsx("div",{className:"bg-white rounded-md shadow-lg border-2 border-primary/30 p-1 max-w-[600px] pointer-events-none",style:{opacity:.85},children:h.jsx(n,{block:e,isSelected:!1})})}function $s({pageIndex:e,totalPages:t,blockIds:n,allBlocks:r,pageConfig:o,scale:s,onBlockHeightChange:i}){const a=T(w=>w.selectBlock),l=r.length,u=o.orientation==="portrait",d=u?ct:lt,f=u?lt:ct,v=o.margins.top*et,p=o.margins.right*et,R=o.margins.bottom*et,m=o.margins.left*et,b=c.useMemo(()=>{const w=new Map(r.map(x=>[x.id,x]));return n.map(x=>w.get(x)).filter(Boolean)},[n,r]),{topChrome:S,contentBlocks:k,bottomChrome:C}=c.useMemo(()=>{const w=[],x=[],g=[];for(const D of b)nr.has(D.type)?(rr[D.type]||"top")==="bottom"?g.push(D):w.push(D):x.push(D);return{topChrome:w,contentBlocks:x,bottomChrome:g}},[b]),E=c.useMemo(()=>{const w=new Map;return r.forEach((x,g)=>w.set(x.id,g)),w},[r]),N=w=>{const x=E.get(w.id)??0;return h.jsx(zs,{block:w,index:x,totalBlocks:l,onHeightChange:i},w.id)};return h.jsxs("div",{className:"bg-white shadow-lg border relative shrink-0 overflow-hidden",style:{width:d,height:f,transform:`scale(${s})`,transformOrigin:"top center",fontSize:`${o.fontSize}px`,fontFamily:o.fontFamily?`"${o.fontFamily}", sans-serif`:void 0},onClick:w=>{w.stopPropagation(),a(null)},children:[b.length===0&&e===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground/50",style:{padding:`${v}px ${p}px ${R}px ${m}px`},children:[h.jsx("p",{className:"text-lg font-medium",children:"Canvas vacio"}),h.jsx("p",{className:"text-sm mt-1",children:"Haz clic en un bloque de la paleta para empezar"})]}):h.jsxs("div",{className:"flex flex-col h-full",children:[S.length>0&&h.jsx("div",{className:"shrink-0",children:S.map(N)}),h.jsx("div",{className:"flex-1 flex flex-wrap items-start content-start overflow-hidden",style:{padding:`${S.length>0?8:v}px ${p}px ${C.length>0?8:R}px ${m}px`},children:k.map(N)}),C.length>0&&h.jsx("div",{className:"shrink-0 mt-auto",children:C.map(N)})]}),h.jsxs("div",{className:"absolute bottom-2 right-4 text-[10px] text-gray-300 pointer-events-none z-10",children:["Pagina ",e+1," / ",t]})]})}function Ws(){const e=T(g=>g.blocks),t=T(g=>g.pageConfig),n=T(g=>g.selectBlock),r=T(g=>g.blockHeights),o=T(g=>g.setBlockHeight),s=T(g=>g.reorderBlocks),i=c.useRef(null),[a,l]=c.useState(1),[u,d]=c.useState(null),f=eo(Qr(At,{activationConstraint:{distance:5}})),v=c.useCallback((g,D)=>{const y=a>0?Math.round(D/a):D;o(g,y)},[a,o]),p=c.useCallback(()=>{if(!i.current)return;const g=i.current.clientWidth,y=t.orientation==="portrait"?ct:lt,M=g-80,O=Math.min(M/y,1);l(O)},[t.orientation]);c.useEffect(()=>{p();const g=new ResizeObserver(p);return i.current&&g.observe(i.current),()=>g.disconnect()},[p]);const R=c.useCallback(g=>{let D=0;for(const y of e){if(y.id===g)return D;y.type==="section_separator"&&D++}return D},[e]),m=c.useCallback(g=>{d(g.active.id)},[]),b=c.useCallback(g=>{const{active:D,over:y}=g;if(d(null),!y||D.id===y.id)return;const M=e.find(H=>H.id===D.id);if(!M||M.type==="section_separator")return;const O=e.find(H=>H.id===y.id);if((O==null?void 0:O.type)==="section_separator")return;const W=R(D.id),q=R(y.id);if(W!==q)return;const ce=e.findIndex(H=>H.id===D.id),me=e.findIndex(H=>H.id===y.id);if(ce===-1||me===-1)return;const $=Bs(e,ce,me);s($.map(H=>H.id))},[e,R,s]),S=c.useCallback(()=>{d(null)},[]),{pages:k,totalPages:C}=tr({blocks:e,pageConfig:t,blockHeights:r}),N=t.orientation==="portrait"?lt:ct,w=u?e.find(g=>g.id===u):null,x=c.useMemo(()=>e.map(g=>g.id),[e]);return h.jsx("div",{ref:i,className:"flex-1 overflow-y-auto bg-muted/40 p-8",onClick:()=>n(null),children:h.jsxs(ts,{sensors:f,collisionDetection:io,onDragStart:m,onDragEnd:b,onDragCancel:S,children:[h.jsx(ks,{items:x,strategy:Ss,children:h.jsx("div",{className:"flex flex-col items-center",style:{gap:`${Math.max(24*a,12)}px`},children:k.map(g=>h.jsx("div",{style:{height:N*a,width:"100%",display:"flex",justifyContent:"center"},children:h.jsx($s,{pageIndex:g.pageIndex,totalPages:C,blockIds:g.blockIds,allBlocks:e,pageConfig:t,scale:a,onBlockHeightChange:v})},g.pageIndex))})}),h.jsx(xs,{children:w?h.jsx(_s,{block:w}):null})]})})}function Ys(){const e=T(d=>d.selectedBlockId),t=T(d=>d.blocks),n=T(d=>d.selectBlock),r=T(d=>d.updateBlockConfig),o=T(d=>d.duplicateBlock),s=T(d=>d.removeBlock);if(!e)return h.jsx("div",{className:"flex w-80 flex-col border-l bg-background",children:h.jsx("div",{className:"flex flex-1 items-center justify-center p-4 text-sm text-muted-foreground",children:"Selecciona un bloque para configurarlo"})});const i=t.find(d=>d.id===e);if(!i)return null;const a=kt(i.type),l=rn[i.type];if(!a||!l)return null;const u=a.ConfigPanel;return h.jsxs("div",{className:"flex w-80 flex-col border-l bg-background",children:[h.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-semibold",children:l.label})}),h.jsx(bt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n(null),children:h.jsx(Xn,{className:"h-4 w-4"})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h.jsx(u,{block:i,onChange:(d,f)=>r(i.id,d,f)})}),i.type!=="section_separator"&&h.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3",children:[h.jsxs(bt,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>o(i.id),children:[h.jsx(on,{className:"h-4 w-4 mr-1"}),"Duplicar"]}),h.jsxs(bt,{variant:"outline",size:"sm",className:"flex-1 text-destructive hover:bg-destructive/10",onClick:()=>{s(i.id)},children:[h.jsx(nn,{className:"h-4 w-4 mr-1"}),"Eliminar"]})]})]})}function Us({open:e,onOpenChange:t}){const n=T(o=>o.pageConfig),r=T(o=>o.updatePageConfig);return h.jsx(Wn,{open:e,onOpenChange:t,children:h.jsxs(Yn,{className:"sm:max-w-md",children:[h.jsx(Un,{children:h.jsx(Vn,{children:"Configuracion de pagina"})}),h.jsxs("div",{className:"space-y-4 py-2",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Je,{children:"Orientacion"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:`flex-1 rounded-md border px-3 py-2 text-sm ${n.orientation==="portrait"?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>r({orientation:"portrait"}),children:"Vertical"}),h.jsx("button",{className:`flex-1 rounded-md border px-3 py-2 text-sm ${n.orientation==="landscape"?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>r({orientation:"landscape"}),children:"Horizontal"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Je,{children:"Margenes (mm)"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["top","right","bottom","left"].map(o=>h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-muted-foreground w-16 capitalize",children:o==="top"?"Arriba":o==="right"?"Derecha":o==="bottom"?"Abajo":"Izquierda"}),h.jsx(Ht,{type:"number",min:5,max:50,value:n.margins[o],onChange:s=>r({margins:{...n.margins,[o]:Math.max(5,Math.min(50,Number(s.target.value)||5))}}),className:"h-8 w-full"})]},o))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Je,{children:"Fuente del documento"}),h.jsx("select",{className:"w-full rounded-md border border-border bg-background px-3 py-2 text-sm",value:n.fontFamily||"Inter",onChange:o=>r({fontFamily:o.target.value}),children:ir.map(o=>h.jsx("option",{value:o.value,style:{fontFamily:o.value},children:o.label},o.value))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Je,{children:"Tamano de fuente base (px)"}),h.jsx(Ht,{type:"number",min:8,max:14,value:n.fontSize,onChange:o=>r({fontSize:Math.max(8,Math.min(14,Number(o.target.value)||10))}),className:"h-8"})]})]})]})})}export{Xs as B,Ys as C,Ws as E,Us as P};
