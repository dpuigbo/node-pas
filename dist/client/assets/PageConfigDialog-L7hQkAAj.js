import{f as X,j as h,a2 as _n,F as $n,a3 as Re,r as c,a4 as A,a5 as Le,$ as nn,B as mt,X as Fn,n as Hn,o as Xn,p as Wn,q as Yn,s as bt,_ as Ht}from"./index-iy7WYiFa.js";import{u as T,b as Un,S as qn,L as Kn,P as Vn,I as Gn,A as Jn,C as Zn,a as rn,c as Qn,D as er,d as tr,g as Nt,B as nr,F as rr}from"./index-B93ejAtl.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],sr=X("ArrowDown",or);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ar=X("ArrowUp",ir);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],lr=X("BookOpen",cr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dr=X("CircleCheckBig",ur);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],on=X("Copy",fr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],gr=X("GripVertical",hr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],vr=X("Hash",pr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]],br=X("Heading",mr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],xr=X("ListChecks",yr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"M5 12h14",key:"1ays0h"}]],Cr=X("Minus",wr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 15h18",key:"5xshup"}]],Sr=X("PanelBottom",Dr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}]],Nr=X("PanelTop",Rr);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],kr=X("Table",Er);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Ir=X("Type",Mr),jr={FileText:$n,Heading:br,Minus:Cr,Type:Ir,Hash:vr,Calendar:Zn,AlignLeft:Jn,ChevronDown:_n,CheckCircle:dr,ListChecks:xr,Table:kr,Image:Gn,Pen:Vn,List:Kn,BookOpen:lr,PanelTop:Nr,PanelBottom:Sr,Square:qn};function Ps(){const e=T(n=>n.addBlock),t=T(n=>n.isDocumentTemplate);return h.jsxs("div",{className:"flex w-56 flex-col border-r bg-background overflow-y-auto",children:[h.jsx("div",{className:"px-4 py-3 border-b",children:h.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Bloques"})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-4",children:Un.map(n=>{if(n.id==="document"&&!t)return null;const r=n.types.filter(o=>o!=="section_separator");return r.length===0?null:h.jsxs("div",{children:[h.jsx("p",{className:"px-2 pb-1 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:n.label}),h.jsx("div",{className:"space-y-0.5",children:r.map(o=>{const s=rn[o],i=jr[s.icon];return h.jsxs("button",{onClick:()=>e(o),className:Re("flex w-full items-center gap-2 rounded-md px-2 py-2 text-sm","hover:bg-accent hover:text-accent-foreground transition-colors","cursor-pointer select-none"),title:`Anadir ${s.label}`,children:[i&&h.jsx(i,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),h.jsx("span",{className:"truncate",children:s.label})]},o)})})]},n.id)})})]})}function Ar(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const lt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ee(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Et(e){return"nodeType"in e}function $(e){var t,n;return e?Ee(e)?e:Et(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function kt(e){const{Document:t}=$(e);return e instanceof t}function Xe(e){return Ee(e)?!1:e instanceof $(e).HTMLElement}function sn(e){return e instanceof $(e).SVGElement}function ke(e){return e?Ee(e)?e.document:Et(e)?kt(e)?e:Xe(e)||sn(e)?e.ownerDocument:document:document:document}const Z=lt?c.useLayoutEffect:c.useEffect;function ut(e){const t=c.useRef(e);return Z(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Tr(){const e=c.useRef(null),t=c.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Fe(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Z(()=>{n.current!==e&&(n.current=e)},t),n}function We(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function tt(e){const t=ut(e),n=c.useRef(null),r=c.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function nt(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let yt={};function Ye(e,t){return c.useMemo(()=>{if(t)return t;const n=yt[e]==null?0:yt[e]+1;return yt[e]=n,e+"-"+n},[e,t])}function an(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[l,u]of a){const d=s[l];d!=null&&(s[l]=d+e*u)}return s},{...t})}}const Ne=an(1),rt=an(-1);function Or(e){return"clientX"in e&&"clientY"in e}function dt(e){if(!e)return!1;const{KeyboardEvent:t}=$(e.target);return t&&e instanceof t}function Br(e){if(!e)return!1;const{TouchEvent:t}=$(e.target);return t&&e instanceof t}function ot(e){if(Br(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Or(e)?{x:e.clientX,y:e.clientY}:null}const ve=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ve.Translate.toString(e),ve.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Xt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Pr(e){return e.matches(Xt)?e:e.querySelector(Xt)}const Lr={display:"none"};function zr(e){let{id:t,value:n}=e;return A.createElement("div",{id:t,style:Lr},n)}function _r(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return A.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function $r(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const cn=c.createContext(null);function Fr(e){const t=c.useContext(cn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Hr(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:o,event:s}=r;e.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[e]),t]}const Xr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Wr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Yr(e){let{announcements:t=Wr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Xr}=e;const{announce:s,announcement:i}=$r(),a=Ye("DndLiveRegion"),[l,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),Fr(c.useMemo(()=>({onDragStart(f){let{active:v}=f;s(t.onDragStart({active:v}))},onDragMove(f){let{active:v,over:p}=f;t.onDragMove&&s(t.onDragMove({active:v,over:p}))},onDragOver(f){let{active:v,over:p}=f;s(t.onDragOver({active:v,over:p}))},onDragEnd(f){let{active:v,over:p}=f;s(t.onDragEnd({active:v,over:p}))},onDragCancel(f){let{active:v,over:p}=f;s(t.onDragCancel({active:v,over:p}))}}),[s,t])),!l)return null;const d=A.createElement(A.Fragment,null,A.createElement(zr,{id:r,value:o.draggable}),A.createElement(_r,{id:a,announcement:i}));return n?Le.createPortal(d,n):d}var B;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(B||(B={}));function st(){}function Ur(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function qr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Q=Object.freeze({x:0,y:0});function Kr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Vr(e,t){const n=ot(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Gr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Jr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Zr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Wt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Qr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=Wt(t,t.left,t.top),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const u=Kr(Wt(l),o);s.push({id:a,data:{droppableContainer:i,value:u}})}}return s.sort(Gr)};function eo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,a=s-n;if(r<o&&n<s){const l=t.width*t.height,u=e.width*e.height,d=i*a,f=d/(l+u-d);return Number(f.toFixed(4))}return 0}const to=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const l=eo(a,t);l>0&&o.push({id:i,data:{droppableContainer:s,value:l}})}}return o.sort(Jr)};function no(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function ln(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Q}function ro(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const oo=ro(1);function un(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function so(e,t,n){const r=un(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:a}=r,l=e.left-i-(1-o)*parseFloat(n),u=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,f=s?e.height/s:e.height;return{width:d,height:f,top:u,right:l+d,bottom:u+f,left:l}}const io={ignoreTransform:!1};function Me(e,t){t===void 0&&(t=io);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=$(e).getComputedStyle(e);u&&(n=so(n,u,d))}const{top:r,left:o,width:s,height:i,bottom:a,right:l}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:l}}function Yt(e){return Me(e,{ignoreTransform:!0})}function ao(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function co(e,t){return t===void 0&&(t=$(e).getComputedStyle(e)),t.position==="fixed"}function lo(e,t){t===void 0&&(t=$(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function Mt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(kt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Xe(o)||sn(o)||n.includes(o))return n;const s=$(e).getComputedStyle(o);return o!==e&&lo(o,s)&&n.push(o),co(o,s)?n:r(o.parentNode)}return e?r(e):n}function dn(e){const[t]=Mt(e,1);return t??null}function xt(e){return!lt||!e?null:Ee(e)?e:Et(e)?kt(e)||e===ke(e).scrollingElement?window:Xe(e)?e:null:null}function fn(e){return Ee(e)?e.scrollX:e.scrollLeft}function hn(e){return Ee(e)?e.scrollY:e.scrollTop}function Dt(e){return{x:fn(e),y:hn(e)}}var P;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(P||(P={}));function gn(e){return!lt||!e?!1:e===document.scrollingElement}function pn(e){const t={x:0,y:0},n=gn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const uo={x:.2,y:.2};function fo(e,t,n,r,o){let{top:s,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),o===void 0&&(o=uo);const{isTop:u,isBottom:d,isLeft:f,isRight:v}=pn(e),p={x:0,y:0},R={x:0,y:0},m={height:t.height*o.y,width:t.width*o.x};return!u&&s<=t.top+m.height?(p.y=P.Backward,R.y=r*Math.abs((t.top+m.height-s)/m.height)):!d&&l>=t.bottom-m.height&&(p.y=P.Forward,R.y=r*Math.abs((t.bottom-m.height-l)/m.height)),!v&&a>=t.right-m.width?(p.x=P.Forward,R.x=r*Math.abs((t.right-m.width-a)/m.width)):!f&&i<=t.left+m.width&&(p.x=P.Backward,R.x=r*Math.abs((t.left+m.width-i)/m.width)),{direction:p,speed:R}}function ho(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function vn(e){return e.reduce((t,n)=>Ne(t,Dt(n)),Q)}function go(e){return e.reduce((t,n)=>t+fn(n),0)}function po(e){return e.reduce((t,n)=>t+hn(n),0)}function mn(e,t){if(t===void 0&&(t=Me),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);dn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const vo=[["x",["left","right"],go],["y",["top","bottom"],po]];class It{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Mt(n),o=vn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,i,a]of vo)for(const l of i)Object.defineProperty(this,l,{get:()=>{const u=a(r),d=o[s]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ze{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function mo(e){const{EventTarget:t}=$(e);return e instanceof t?e:ke(e)}function wt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var J;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(J||(J={}));function Ut(e){e.preventDefault()}function bo(e){e.stopPropagation()}var I;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(I||(I={}));const bn={start:[I.Space,I.Enter],cancel:[I.Esc],end:[I.Space,I.Enter,I.Tab]},yo=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case I.Right:return{...n,x:n.x+25};case I.Left:return{...n,x:n.x-25};case I.Down:return{...n,y:n.y+25};case I.Up:return{...n,y:n.y-25}}};class yn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ze(ke(n)),this.windowListeners=new ze($(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(J.Resize,this.handleCancel),this.windowListeners.add(J.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(J.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&mn(r),n(Q)}handleKeyDown(t){if(dt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=bn,coordinateGetter:i=yo,scrollBehavior:a="smooth"}=o,{code:l}=t;if(s.end.includes(l)){this.handleEnd(t);return}if(s.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Q;this.referenceCoordinates||(this.referenceCoordinates=d);const f=i(t,{active:n,context:r.current,currentCoordinates:d});if(f){const v=rt(f,d),p={x:0,y:0},{scrollableAncestors:R}=r.current;for(const m of R){const b=t.code,{isTop:S,isRight:N,isLeft:C,isBottom:k,maxScroll:E,minScroll:w}=pn(m),x=ho(m),g={x:Math.min(b===I.Right?x.right-x.width/2:x.right,Math.max(b===I.Right?x.left:x.left+x.width/2,f.x)),y:Math.min(b===I.Down?x.bottom-x.height/2:x.bottom,Math.max(b===I.Down?x.top:x.top+x.height/2,f.y))},D=b===I.Right&&!N||b===I.Left&&!C,y=b===I.Down&&!k||b===I.Up&&!S;if(D&&g.x!==f.x){const M=m.scrollLeft+v.x,O=b===I.Right&&M<=E.x||b===I.Left&&M>=w.x;if(O&&!v.y){m.scrollTo({left:M,behavior:a});return}O?p.x=m.scrollLeft-M:p.x=b===I.Right?m.scrollLeft-E.x:m.scrollLeft-w.x,p.x&&m.scrollBy({left:-p.x,behavior:a});break}else if(y&&g.y!==f.y){const M=m.scrollTop+v.y,O=b===I.Down&&M<=E.y||b===I.Up&&M>=w.y;if(O&&!v.x){m.scrollTo({top:M,behavior:a});return}O?p.y=m.scrollTop-M:p.y=b===I.Down?m.scrollTop-E.y:m.scrollTop-w.y,p.y&&m.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,Ne(rt(f,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}yn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=bn,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function qt(e){return!!(e&&"distance"in e)}function Kt(e){return!!(e&&"delay"in e)}class jt{constructor(t,n,r){var o;r===void 0&&(r=mo(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:i}=s;this.props=t,this.events=n,this.document=ke(i),this.documentListeners=new ze(this.document),this.listeners=new ze(r),this.windowListeners=new ze($(i)),this.initialCoordinates=(o=ot(s))!=null?o:Q,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(J.Resize,this.handleCancel),this.windowListeners.add(J.DragStart,Ut),this.windowListeners.add(J.VisibilityChange,this.handleCancel),this.windowListeners.add(J.ContextMenu,Ut),this.documentListeners.add(J.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Kt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(qt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(J.Click,bo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(J.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const l=(n=ot(t))!=null?n:Q,u=rt(o,l);if(!r&&a){if(qt(a)){if(a.tolerance!=null&&wt(u,a.tolerance))return this.handleCancel();if(wt(u,a.distance))return this.handleStart()}if(Kt(a)&&wt(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}t.cancelable&&t.preventDefault(),i(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===I.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const xo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class At extends jt{constructor(t){const{event:n}=t,r=ke(n.target);super(t,xo,r)}}At.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const wo={move:{name:"mousemove"},end:{name:"mouseup"}};var St;(function(e){e[e.RightClick=2]="RightClick"})(St||(St={}));class Co extends jt{constructor(t){super(t,wo,ke(t.event.target))}}Co.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===St.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ct={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Do extends jt{constructor(t){super(t,Ct)}static setup(){return window.addEventListener(Ct.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ct.move.name,t)};function t(){}}}Do.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var _e;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(_e||(_e={}));var it;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(it||(it={}));function So(e){let{acceleration:t,activator:n=_e.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=it.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:v}=e;const p=No({delta:f,disabled:!s}),[R,m]=Tr(),b=c.useRef({x:0,y:0}),S=c.useRef({x:0,y:0}),N=c.useMemo(()=>{switch(n){case _e.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case _e.DraggableRect:return o}},[n,o,l]),C=c.useRef(null),k=c.useCallback(()=>{const w=C.current;if(!w)return;const x=b.current.x*S.current.x,g=b.current.y*S.current.y;w.scrollBy(x,g)},[]),E=c.useMemo(()=>a===it.TreeOrder?[...u].reverse():u,[a,u]);c.useEffect(()=>{if(!s||!u.length||!N){m();return}for(const w of E){if((r==null?void 0:r(w))===!1)continue;const x=u.indexOf(w),g=d[x];if(!g)continue;const{direction:D,speed:y}=fo(w,g,N,t,v);for(const M of["x","y"])p[M][D[M]]||(y[M]=0,D[M]=0);if(y.x>0||y.y>0){m(),C.current=w,R(k,i),b.current=y,S.current=D;return}}b.current={x:0,y:0},S.current={x:0,y:0},m()},[t,k,r,m,s,i,JSON.stringify(N),JSON.stringify(p),R,u,E,d,JSON.stringify(v)])}const Ro={x:{[P.Backward]:!1,[P.Forward]:!1},y:{[P.Backward]:!1,[P.Forward]:!1}};function No(e){let{delta:t,disabled:n}=e;const r=nt(t);return We(o=>{if(n||!r||!o)return Ro;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[P.Backward]:o.x[P.Backward]||s.x===-1,[P.Forward]:o.x[P.Forward]||s.x===1},y:{[P.Backward]:o.y[P.Backward]||s.y===-1,[P.Forward]:o.y[P.Forward]||s.y===1}}},[n,t,r])}function Eo(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return We(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function ko(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...s]},[]),[e,t])}var He;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(He||(He={}));var Rt;(function(e){e.Optimized="optimized"})(Rt||(Rt={}));const Vt=new Map;function Mo(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=c.useState(null),{frequency:a,measure:l,strategy:u}=o,d=c.useRef(e),f=b(),v=Fe(f),p=c.useCallback(function(S){S===void 0&&(S=[]),!v.current&&i(N=>N===null?S:N.concat(S.filter(C=>!N.includes(C))))},[v]),R=c.useRef(null),m=We(S=>{if(f&&!n)return Vt;if(!S||S===Vt||d.current!==e||s!=null){const N=new Map;for(let C of e){if(!C)continue;if(s&&s.length>0&&!s.includes(C.id)&&C.rect.current){N.set(C.id,C.rect.current);continue}const k=C.node.current,E=k?new It(l(k),k):null;C.rect.current=E,E&&N.set(C.id,E)}return N}return S},[e,s,n,f,l]);return c.useEffect(()=>{d.current=e},[e]),c.useEffect(()=>{f||p()},[n,f]),c.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),c.useEffect(()=>{f||typeof a!="number"||R.current!==null||(R.current=setTimeout(()=>{p(),R.current=null},a))},[a,f,p,...r]),{droppableRects:m,measureDroppableContainers:p,measuringScheduled:s!=null};function b(){switch(u){case He.Always:return!1;case He.BeforeDragging:return n;default:return!n}}}function Tt(e,t){return We(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Io(e,t){return Tt(e,t)}function jo(e){let{callback:t,disabled:n}=e;const r=ut(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return c.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function ft(e){let{callback:t,disabled:n}=e;const r=ut(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return c.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Ao(e){return new It(Me(e),e)}function Gt(e,t,n){t===void 0&&(t=Ao);const[r,o]=c.useState(null);function s(){o(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const i=jo({callback(l){if(e)for(const u of l){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),a=ft({callback:s});return Z(()=>{s(),e?(a==null||a.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[e]),r}function To(e){const t=Tt(e);return ln(e,t)}const Jt=[];function Oo(e){const t=c.useRef(e),n=We(r=>e?r&&r!==Jt&&e&&t.current&&e.parentNode===t.current.parentNode?r:Mt(e):Jt,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Bo(e){const[t,n]=c.useState(null),r=c.useRef(e),o=c.useCallback(s=>{const i=xt(s.target);i&&n(a=>a?(a.set(i,Dt(i)),new Map(a)):null)},[]);return c.useEffect(()=>{const s=r.current;if(e!==s){i(s);const a=e.map(l=>{const u=xt(l);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,Dt(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(s)};function i(a){a.forEach(l=>{const u=xt(l);u==null||u.removeEventListener("scroll",o)})}},[o,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,i)=>Ne(s,i),Q):vn(e):Q,[e,t])}function Zt(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==Q;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?rt(e,n.current):Q}function Po(e){c.useEffect(()=>{if(!lt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Lo(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,t)},n},{}),[e,t])}function xn(e){return c.useMemo(()=>e?ao(e):null,[e])}const Qt=[];function zo(e,t){t===void 0&&(t=Me);const[n]=e,r=xn(n?$(n):null),[o,s]=c.useState(Qt);function i(){s(()=>e.length?e.map(l=>gn(l)?r:new It(t(l),l)):Qt)}const a=ft({callback:i});return Z(()=>{a==null||a.disconnect(),i(),e.forEach(l=>a==null?void 0:a.observe(l))},[e]),o}function wn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Xe(t)?t:e}function _o(e){let{measure:t}=e;const[n,r]=c.useState(null),o=c.useCallback(u=>{for(const{target:d}of u)if(Xe(d)){r(f=>{const v=t(d);return f?{...f,width:v.width,height:v.height}:v});break}},[t]),s=ft({callback:o}),i=c.useCallback(u=>{const d=wn(u);s==null||s.disconnect(),d&&(s==null||s.observe(d)),r(d?t(d):null)},[t,s]),[a,l]=tt(i);return c.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const $o=[{sensor:At,options:{}},{sensor:yn,options:{}}],Fo={current:{}},et={draggable:{measure:Yt},droppable:{measure:Yt,strategy:He.WhileDragging,frequency:Rt.Optimized},dragOverlay:{measure:Me}};class $e extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ho={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new $e,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:st},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:et,measureDroppableContainers:st,windowRect:null,measuringScheduled:!1},Cn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:st,draggableNodes:new Map,over:null,measureDroppableContainers:st},Ue=c.createContext(Cn),Dn=c.createContext(Ho);function Xo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new $e}}}function Wo(e,t){switch(t.type){case B.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case B.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case B.DragEnd:case B.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case B.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new $e(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case B.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new $e(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case B.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new $e(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Yo(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=c.useContext(Ue),s=nt(r),i=nt(n==null?void 0:n.id);return c.useEffect(()=>{if(!t&&!r&&s&&i!=null){if(!dt(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const f=Pr(d);if(f){f.focus();break}}})}},[r,t,o,i,s]),null}function Sn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function Uo(e){return c.useMemo(()=>({draggable:{...et.draggable,...e==null?void 0:e.draggable},droppable:{...et.droppable,...e==null?void 0:e.droppable},dragOverlay:{...et.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function qo(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=c.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;Z(()=>{if(!i&&!a||!t){s.current=!1;return}if(s.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=ln(d,r);if(i||(f.x=0),a||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const v=dn(u);v&&v.scrollBy({top:f.y,left:f.x})}},[t,i,a,r,n])}const ht=c.createContext({...Q,scaleX:1,scaleY:1});var pe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(pe||(pe={}));const Ko=c.memo(function(t){var n,r,o,s;let{id:i,accessibility:a,autoScroll:l=!0,children:u,sensors:d=$o,collisionDetection:f=to,measuring:v,modifiers:p,...R}=t;const m=c.useReducer(Wo,void 0,Xo),[b,S]=m,[N,C]=Hr(),[k,E]=c.useState(pe.Uninitialized),w=k===pe.Initialized,{draggable:{active:x,nodes:g,translate:D},droppable:{containers:y}}=b,M=x!=null?g.get(x):null,O=c.useRef({initial:null,translated:null}),W=c.useMemo(()=>{var z;return x!=null?{id:x,data:(z=M==null?void 0:M.data)!=null?z:Fo,rect:O}:null},[x,M]),K=c.useRef(null),[ce,me]=c.useState(null),[_,F]=c.useState(null),re=Fe(R,Object.values(R)),Ie=Ye("DndDescribedBy",i),qe=c.useMemo(()=>y.getEnabled(),[y]),H=Uo(v),{droppableRects:oe,measureDroppableContainers:be,measuringScheduled:je}=Mo(qe,{dragging:w,dependencies:[D.x,D.y],config:H.droppable}),V=Eo(g,x),Ke=c.useMemo(()=>_?ot(_):null,[_]),le=zn(),se=Io(V,H.draggable.measure);qo({activeNode:x!=null?g.get(x):null,config:le.layoutShiftCompensation,initialRect:se,measure:H.draggable.measure});const j=Gt(V,H.draggable.measure,se),Ae=Gt(V?V.parentElement:null),ee=c.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:g,draggingNode:null,draggingNodeRect:null,droppableContainers:y,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ye=y.getNodeFor((n=ee.current.over)==null?void 0:n.id),ie=_o({measure:H.dragOverlay.measure}),xe=(r=ie.nodeRef.current)!=null?r:V,we=w?(o=ie.rect)!=null?o:j:null,Ot=!!(ie.nodeRef.current&&ie.rect),Bt=To(Ot?null:j),gt=xn(xe?$(xe):null),ue=Oo(w?ye??V:null),Ve=zo(ue),Ge=Sn(p,{transform:{x:D.x-Bt.x,y:D.y-Bt.y,scaleX:1,scaleY:1},activatorEvent:_,active:W,activeNodeRect:j,containerNodeRect:Ae,draggingNodeRect:we,over:ee.current.over,overlayNodeRect:ie.rect,scrollableAncestors:ue,scrollableAncestorRects:Ve,windowRect:gt}),Pt=Ke?Ne(Ke,D):null,Lt=Bo(ue),jn=Zt(Lt),An=Zt(Lt,[j]),Ce=Ne(Ge,jn),De=we?oo(we,Ge):null,Te=W&&De?f({active:W,collisionRect:De,droppableRects:oe,droppableContainers:qe,pointerCoordinates:Pt}):null,zt=Zr(Te,"id"),[de,_t]=c.useState(null),Tn=Ot?Ge:Ne(Ge,An),On=no(Tn,(s=de==null?void 0:de.rect)!=null?s:null,j),pt=c.useRef(null),$t=c.useCallback((z,Y)=>{let{sensor:U,options:fe}=Y;if(K.current==null)return;const G=g.get(K.current);if(!G)return;const q=z.nativeEvent,te=new U({active:K.current,activeNode:G,event:q,options:fe,context:ee,onAbort(L){if(!g.get(L))return;const{onDragAbort:ne}=re.current,ae={id:L};ne==null||ne(ae),N({type:"onDragAbort",event:ae})},onPending(L,he,ne,ae){if(!g.get(L))return;const{onDragPending:Be}=re.current,ge={id:L,constraint:he,initialCoordinates:ne,offset:ae};Be==null||Be(ge),N({type:"onDragPending",event:ge})},onStart(L){const he=K.current;if(he==null)return;const ne=g.get(he);if(!ne)return;const{onDragStart:ae}=re.current,Oe={activatorEvent:q,active:{id:he,data:ne.data,rect:O}};Le.unstable_batchedUpdates(()=>{ae==null||ae(Oe),E(pe.Initializing),S({type:B.DragStart,initialCoordinates:L,active:he}),N({type:"onDragStart",event:Oe}),me(pt.current),F(q)})},onMove(L){S({type:B.DragMove,coordinates:L})},onEnd:Se(B.DragEnd),onCancel:Se(B.DragCancel)});pt.current=te;function Se(L){return async function(){const{active:ne,collisions:ae,over:Oe,scrollAdjustedTranslate:Be}=ee.current;let ge=null;if(ne&&Be){const{cancelDrop:Pe}=re.current;ge={activatorEvent:q,active:ne,collisions:ae,delta:Be,over:Oe},L===B.DragEnd&&typeof Pe=="function"&&await Promise.resolve(Pe(ge))&&(L=B.DragCancel)}K.current=null,Le.unstable_batchedUpdates(()=>{S({type:L}),E(pe.Uninitialized),_t(null),me(null),F(null),pt.current=null;const Pe=L===B.DragEnd?"onDragEnd":"onDragCancel";if(ge){const vt=re.current[Pe];vt==null||vt(ge),N({type:Pe,event:ge})}})}}},[g]),Bn=c.useCallback((z,Y)=>(U,fe)=>{const G=U.nativeEvent,q=g.get(fe);if(K.current!==null||!q||G.dndKit||G.defaultPrevented)return;const te={active:q};z(U,Y.options,te)===!0&&(G.dndKit={capturedBy:Y.sensor},K.current=fe,$t(U,Y))},[g,$t]),Ft=ko(d,Bn);Po(d),Z(()=>{j&&k===pe.Initializing&&E(pe.Initialized)},[j,k]),c.useEffect(()=>{const{onDragMove:z}=re.current,{active:Y,activatorEvent:U,collisions:fe,over:G}=ee.current;if(!Y||!U)return;const q={active:Y,activatorEvent:U,collisions:fe,delta:{x:Ce.x,y:Ce.y},over:G};Le.unstable_batchedUpdates(()=>{z==null||z(q),N({type:"onDragMove",event:q})})},[Ce.x,Ce.y]),c.useEffect(()=>{const{active:z,activatorEvent:Y,collisions:U,droppableContainers:fe,scrollAdjustedTranslate:G}=ee.current;if(!z||K.current==null||!Y||!G)return;const{onDragOver:q}=re.current,te=fe.get(zt),Se=te&&te.rect.current?{id:te.id,rect:te.rect.current,data:te.data,disabled:te.disabled}:null,L={active:z,activatorEvent:Y,collisions:U,delta:{x:G.x,y:G.y},over:Se};Le.unstable_batchedUpdates(()=>{_t(Se),q==null||q(L),N({type:"onDragOver",event:L})})},[zt]),Z(()=>{ee.current={activatorEvent:_,active:W,activeNode:V,collisionRect:De,collisions:Te,droppableRects:oe,draggableNodes:g,draggingNode:xe,draggingNodeRect:we,droppableContainers:y,over:de,scrollableAncestors:ue,scrollAdjustedTranslate:Ce},O.current={initial:we,translated:De}},[W,V,Te,De,g,xe,we,oe,y,de,ue,Ce]),So({...le,delta:D,draggingRect:De,pointerCoordinates:Pt,scrollableAncestors:ue,scrollableAncestorRects:Ve});const Pn=c.useMemo(()=>({active:W,activeNode:V,activeNodeRect:j,activatorEvent:_,collisions:Te,containerNodeRect:Ae,dragOverlay:ie,draggableNodes:g,droppableContainers:y,droppableRects:oe,over:de,measureDroppableContainers:be,scrollableAncestors:ue,scrollableAncestorRects:Ve,measuringConfiguration:H,measuringScheduled:je,windowRect:gt}),[W,V,j,_,Te,Ae,ie,g,y,oe,de,be,ue,Ve,H,je,gt]),Ln=c.useMemo(()=>({activatorEvent:_,activators:Ft,active:W,activeNodeRect:j,ariaDescribedById:{draggable:Ie},dispatch:S,draggableNodes:g,over:de,measureDroppableContainers:be}),[_,Ft,W,j,S,Ie,g,de,be]);return A.createElement(cn.Provider,{value:C},A.createElement(Ue.Provider,{value:Ln},A.createElement(Dn.Provider,{value:Pn},A.createElement(ht.Provider,{value:On},u)),A.createElement(Yo,{disabled:(a==null?void 0:a.restoreFocus)===!1})),A.createElement(Yr,{...a,hiddenTextDescribedById:Ie}));function zn(){const z=(ce==null?void 0:ce.autoScrollEnabled)===!1,Y=typeof l=="object"?l.enabled===!1:l===!1,U=w&&!z&&!Y;return typeof l=="object"?{...l,enabled:U}:{enabled:U}}}),Vo=c.createContext(null),en="button",Go="Draggable";function Jo(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=Ye(Go),{activators:i,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:v}=c.useContext(Ue),{role:p=en,roleDescription:R="draggable",tabIndex:m=0}=o??{},b=(l==null?void 0:l.id)===t,S=c.useContext(b?ht:Vo),[N,C]=tt(),[k,E]=tt(),w=Lo(i,t),x=Fe(n);Z(()=>(f.set(t,{id:t,key:s,node:N,activatorNode:k,data:x}),()=>{const D=f.get(t);D&&D.key===s&&f.delete(t)}),[f,t]);const g=c.useMemo(()=>({role:p,tabIndex:m,"aria-disabled":r,"aria-pressed":b&&p===en?!0:void 0,"aria-roledescription":R,"aria-describedby":d.draggable}),[r,p,m,b,R,d.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:g,isDragging:b,listeners:r?void 0:w,node:N,over:v,setNodeRef:C,setActivatorNodeRef:E,transform:S}}function Rn(){return c.useContext(Dn)}const Zo="Droppable",Qo={timeout:25};function es(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=Ye(Zo),{active:i,dispatch:a,over:l,measureDroppableContainers:u}=c.useContext(Ue),d=c.useRef({disabled:n}),f=c.useRef(!1),v=c.useRef(null),p=c.useRef(null),{disabled:R,updateMeasurementsFor:m,timeout:b}={...Qo,...o},S=Fe(m??r),N=c.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(S.current)?S.current:[S.current]),p.current=null},b)},[b]),C=ft({callback:N,disabled:R||!i}),k=c.useCallback((g,D)=>{C&&(D&&(C.unobserve(D),f.current=!1),g&&C.observe(g))},[C]),[E,w]=tt(k),x=Fe(t);return c.useEffect(()=>{!C||!E.current||(C.disconnect(),f.current=!1,C.observe(E.current))},[E,C]),c.useEffect(()=>(a({type:B.RegisterDroppable,element:{id:r,key:s,disabled:n,node:E,rect:v,data:x}}),()=>a({type:B.UnregisterDroppable,key:s,id:r})),[r]),c.useEffect(()=>{n!==d.current.disabled&&(a({type:B.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,a]),{active:i,rect:v,isOver:(l==null?void 0:l.id)===r,node:E,over:l,setNodeRef:w}}function ts(e){let{animation:t,children:n}=e;const[r,o]=c.useState(null),[s,i]=c.useState(null),a=nt(n);return!n&&!r&&a&&o(a),Z(()=>{if(!s)return;const l=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(l==null||u==null){o(null);return}Promise.resolve(t(u,s)).then(()=>{o(null)})},[t,r,s]),A.createElement(A.Fragment,null,n,r?c.cloneElement(r,{ref:i}):null)}const ns={x:0,y:0,scaleX:1,scaleY:1};function rs(e){let{children:t}=e;return A.createElement(Ue.Provider,{value:Cn},A.createElement(ht.Provider,{value:ns},t))}const os={position:"fixed",touchAction:"none"},ss=e=>dt(e)?"transform 250ms ease":void 0,is=c.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:s,className:i,rect:a,style:l,transform:u,transition:d=ss}=e;if(!a)return null;const f=o?u:{...u,scaleX:1,scaleY:1},v={...os,width:a.width,height:a.height,top:a.top,left:a.left,transform:ve.Transform.toString(f),transformOrigin:o&&r?Vr(r,a):void 0,transition:typeof d=="function"?d(r):d,...l};return A.createElement(n,{className:i,style:v,ref:t},s)}),as=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:s,className:i}=e;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(o[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,u]of Object.entries(o))n.node.style.setProperty(l,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},cs=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:ve.Transform.toString(t)},{transform:ve.Transform.toString(n)}]},ls={duration:250,easing:"ease",keyframes:cs,sideEffects:as({styles:{active:{opacity:"0"}}})};function us(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return ut((s,i)=>{if(t===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const u=wn(i);if(!u)return;const{transform:d}=$(i).getComputedStyle(i),f=un(d);if(!f)return;const v=typeof t=="function"?t:ds(t);return mn(l,o.draggable.measure),v({active:{id:s,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:o,transform:f})})}function ds(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...ls,...e};return s=>{let{active:i,dragOverlay:a,transform:l,...u}=s;if(!t)return;const d={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},f={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/a.rect.height:1},v={x:l.x-d.x,y:l.y-d.y,...f},p=o({...u,active:i,dragOverlay:a,transform:{initial:l,final:v}}),[R]=p,m=p[p.length-1];if(JSON.stringify(R)===JSON.stringify(m))return;const b=r==null?void 0:r({active:i,dragOverlay:a,...u}),S=a.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(N=>{S.onfinish=()=>{b==null||b(),N()}})}}let tn=0;function fs(e){return c.useMemo(()=>{if(e!=null)return tn++,tn},[e])}const hs=A.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:s,modifiers:i,wrapperElement:a="div",className:l,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:v,containerNodeRect:p,draggableNodes:R,droppableContainers:m,dragOverlay:b,over:S,measuringConfiguration:N,scrollableAncestors:C,scrollableAncestorRects:k,windowRect:E}=Rn(),w=c.useContext(ht),x=fs(f==null?void 0:f.id),g=Sn(i,{activatorEvent:d,active:f,activeNodeRect:v,containerNodeRect:p,draggingNodeRect:b.rect,over:S,overlayNodeRect:b.rect,scrollableAncestors:C,scrollableAncestorRects:k,transform:w,windowRect:E}),D=Tt(v),y=us({config:r,draggableNodes:R,droppableContainers:m,measuringConfiguration:N}),M=D?b.setRef:void 0;return A.createElement(rs,null,A.createElement(ts,{animation:y},f&&x?A.createElement(is,{key:x,id:f.id,ref:M,as:a,activatorEvent:d,adjustScale:t,className:l,transition:s,rect:D,style:{zIndex:u,...o},transform:g},n):null))});function Nn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function gs(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function Je(e){return e!==null&&e>=0}function ps(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function vs(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const En=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=Nn(t,r,n),i=t[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},Ze={scaleX:1,scaleY:1},ms=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:i}=e;const a=(t=s[n])!=null?t:r;if(!a)return null;if(o===n){const u=s[i];return u?{x:0,y:n<i?u.top+u.height-(a.top+a.height):u.top-a.top,...Ze}:null}const l=bs(s,o,n);return o>n&&o<=i?{x:0,y:-a.height-l,...Ze}:o<n&&o>=i?{x:0,y:a.height+l,...Ze}:{x:0,y:0,...Ze}};function bs(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return r?n<t?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const kn="Sortable",Mn=A.createContext({activeIndex:-1,containerId:kn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:En,disabled:{draggable:!1,droppable:!1}});function ys(e){let{children:t,id:n,items:r,strategy:o=En,disabled:s=!1}=e;const{active:i,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:d}=Rn(),f=Ye(kn,n),v=a.rect!==null,p=c.useMemo(()=>r.map(w=>typeof w=="object"&&"id"in w?w.id:w),[r]),R=i!=null,m=i?p.indexOf(i.id):-1,b=u?p.indexOf(u.id):-1,S=c.useRef(p),N=!ps(p,S.current),C=b!==-1&&m===-1||N,k=vs(s);Z(()=>{N&&R&&d(p)},[N,p,R,d]),c.useEffect(()=>{S.current=p},[p]);const E=c.useMemo(()=>({activeIndex:m,containerId:f,disabled:k,disableTransforms:C,items:p,overIndex:b,useDragOverlay:v,sortedRects:gs(p,l),strategy:o}),[m,f,k.draggable,k.droppable,C,p,b,l,v,o]);return A.createElement(Mn.Provider,{value:E},t)}const xs=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Nn(n,r,o).indexOf(t)},ws=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:u}=e;return!u||!r||a!==s&&o===i?!1:n?!0:i!==o&&t===l},Cs={duration:200,easing:"ease"},In="transform",Ds=ve.Transition.toString({property:In,duration:0,easing:"linear"}),Ss={roleDescription:"sortable"};function Rs(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=c.useState(null),a=c.useRef(n);return Z(()=>{if(!t&&n!==a.current&&r.current){const l=o.current;if(l){const u=Me(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&i(d)}}n!==a.current&&(a.current=n)},[t,n,r,o]),c.useEffect(()=>{s&&i(null)},[s]),s}function Ns(e){let{animateLayoutChanges:t=ws,attributes:n,disabled:r,data:o,getNewIndex:s=xs,id:i,strategy:a,resizeObserverConfig:l,transition:u=Cs}=e;const{items:d,containerId:f,activeIndex:v,disabled:p,disableTransforms:R,sortedRects:m,overIndex:b,useDragOverlay:S,strategy:N}=c.useContext(Mn),C=Es(r,p),k=d.indexOf(i),E=c.useMemo(()=>({sortable:{containerId:f,index:k,items:d},...o}),[f,o,k,d]),w=c.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:x,node:g,isOver:D,setNodeRef:y}=es({id:i,data:E,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...l}}),{active:M,activatorEvent:O,activeNodeRect:W,attributes:K,setNodeRef:ce,listeners:me,isDragging:_,over:F,setActivatorNodeRef:re,transform:Ie}=Jo({id:i,data:E,attributes:{...Ss,...n},disabled:C.draggable}),qe=Ar(y,ce),H=!!M,oe=H&&!R&&Je(v)&&Je(b),be=!S&&_,je=be&&oe?Ie:null,Ke=oe?je??(a??N)({rects:m,activeNodeRect:W,activeIndex:v,overIndex:b,index:k}):null,le=Je(v)&&Je(b)?s({id:i,items:d,activeIndex:v,overIndex:b}):k,se=M==null?void 0:M.id,j=c.useRef({activeId:se,items:d,newIndex:le,containerId:f}),Ae=d!==j.current.items,ee=t({active:M,containerId:f,isDragging:_,isSorting:H,id:i,index:k,items:d,newIndex:j.current.newIndex,previousItems:j.current.items,previousContainerId:j.current.containerId,transition:u,wasDragging:j.current.activeId!=null}),ye=Rs({disabled:!ee,index:k,node:g,rect:x});return c.useEffect(()=>{H&&j.current.newIndex!==le&&(j.current.newIndex=le),f!==j.current.containerId&&(j.current.containerId=f),d!==j.current.items&&(j.current.items=d)},[H,le,f,d]),c.useEffect(()=>{if(se===j.current.activeId)return;if(se!=null&&j.current.activeId==null){j.current.activeId=se;return}const xe=setTimeout(()=>{j.current.activeId=se},50);return()=>clearTimeout(xe)},[se]),{active:M,activeIndex:v,attributes:K,data:E,rect:x,index:k,newIndex:le,items:d,isOver:D,isSorting:H,isDragging:_,listeners:me,node:g,overIndex:b,over:F,setNodeRef:qe,setActivatorNodeRef:re,setDroppableNodeRef:y,setDraggableNodeRef:ce,transform:ye??Ke,transition:ie()};function ie(){if(ye||Ae&&j.current.newIndex===k)return Ds;if(!(be&&!dt(O)||!u)&&(H||ee))return ve.Transition.toString({...u,property:In})}}function Es(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}I.Down,I.Right,I.Up,I.Left;function ks(e,t,n){const r=e.slice(),[o]=r.splice(t,1);return o!==void 0&&r.splice(n,0,o),r}const at=794,ct=1123,Qe=3.78,Ms=new Set(["header","section_title","divider","tristate","checklist","table","section_separator","table_of_contents","cover_header","page_header","page_footer","back_cover"]);function Is(e){if(Ms.has(e.type))return"w-full";const t=e.config.width||"full";return rr[t]||"w-full"}function js({block:e,index:t,totalBlocks:n,onHeightChange:r}){const o=T(y=>y.selectedBlockId),s=T(y=>y.selectBlock),i=T(y=>y.removeBlock),a=T(y=>y.duplicateBlock),l=T(y=>y.moveBlock),u=o===e.id,d=e.type==="section_separator",f=Nt(e.type),v=Is(e),p=v==="w-full",[R,m]=c.useState(!1),b=c.useRef(null),{attributes:S,listeners:N,setNodeRef:C,transform:k,transition:E,isDragging:w}=Ns({id:e.id,disabled:d}),x={transform:ve.Transform.toString(k),transition:E,opacity:w?.3:1},g=c.useCallback(y=>{b.current=y,C(y)},[C]);if(c.useEffect(()=>{if(!b.current)return;const y=new ResizeObserver(M=>{for(const O of M)r(e.id,O.contentRect.height)});return y.observe(b.current),()=>y.disconnect()},[e.id,r]),!f)return h.jsx("div",{ref:g,style:x,className:Re(v,"p-0.5"),children:h.jsxs("div",{className:"rounded border border-dashed border-destructive bg-destructive/5 p-4 text-sm text-destructive",children:["Bloque desconocido: ",e.type]})});const D=f.EditorPreview;return d?h.jsx("div",{ref:g,style:x,className:Re("w-full cursor-pointer rounded-sm transition-all",u&&"ring-2 ring-primary ring-offset-1"),onClick:y=>{y.stopPropagation(),s(e.id)},children:h.jsx(D,{block:e,isSelected:u})}):h.jsx("div",{ref:g,style:{...x,padding:"1px"},className:Re(v,"relative group"),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:h.jsxs("div",{className:Re("relative rounded-sm transition-all cursor-pointer",u&&"ring-2 ring-primary ring-offset-1",!u&&R&&"ring-1 ring-primary/30"),onClick:y=>{y.stopPropagation(),s(e.id)},children:[(R||u)&&h.jsxs("div",{className:Re("absolute z-20 flex items-center gap-0.5 rounded-md border bg-background/95 shadow-sm backdrop-blur-sm px-1 py-0.5",p?"-top-7 right-2":"-top-7 left-1/2 -translate-x-1/2"),onClick:y=>y.stopPropagation(),children:[h.jsx("button",{className:"rounded p-1 hover:bg-accent text-muted-foreground disabled:opacity-30",onClick:()=>l(e.id,"up"),disabled:t===0,title:"Mover arriba",children:h.jsx(ar,{className:"h-3 w-3"})}),h.jsx("button",{className:"rounded p-1 text-muted-foreground cursor-grab active:cursor-grabbing",title:"Arrastrar",...S,...N,children:h.jsx(gr,{className:"h-3 w-3"})}),h.jsx("button",{className:"rounded p-1 hover:bg-accent text-muted-foreground disabled:opacity-30",onClick:()=>l(e.id,"down"),disabled:t===n-1,title:"Mover abajo",children:h.jsx(sr,{className:"h-3 w-3"})}),h.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),h.jsx("button",{className:"rounded p-1 hover:bg-accent text-muted-foreground",onClick:()=>a(e.id),title:"Duplicar",children:h.jsx(on,{className:"h-3 w-3"})}),h.jsx("button",{className:"rounded p-1 hover:bg-destructive/10 text-destructive",onClick:()=>i(e.id),title:"Eliminar",children:h.jsx(nn,{className:"h-3 w-3"})})]}),h.jsx("div",{className:nr[e.config.align||"left"],children:h.jsx(D,{block:e,isSelected:u})})]})})}function As({block:e}){const t=Nt(e.type);if(!t)return null;const n=t.EditorPreview;return h.jsx("div",{className:"bg-white rounded-md shadow-lg border-2 border-primary/30 p-1 max-w-[600px] pointer-events-none",style:{opacity:.85},children:h.jsx(n,{block:e,isSelected:!1})})}function Ts({pageIndex:e,totalPages:t,blockIds:n,allBlocks:r,pageConfig:o,scale:s,onBlockHeightChange:i}){const a=T(w=>w.selectBlock),l=r.length,u=o.orientation==="portrait",d=u?at:ct,f=u?ct:at,v=o.margins.top*Qe,p=o.margins.right*Qe,R=o.margins.bottom*Qe,m=o.margins.left*Qe,b=c.useMemo(()=>{const w=new Map(r.map(x=>[x.id,x]));return n.map(x=>w.get(x)).filter(Boolean)},[n,r]),{topChrome:S,contentBlocks:N,bottomChrome:C}=c.useMemo(()=>{const w=[],x=[],g=[];for(const D of b)er.has(D.type)?(tr[D.type]||"top")==="bottom"?g.push(D):w.push(D):x.push(D);return{topChrome:w,contentBlocks:x,bottomChrome:g}},[b]),k=c.useMemo(()=>{const w=new Map;return r.forEach((x,g)=>w.set(x.id,g)),w},[r]),E=w=>{const x=k.get(w.id)??0;return h.jsx(js,{block:w,index:x,totalBlocks:l,onHeightChange:i},w.id)};return h.jsxs("div",{className:"bg-white shadow-lg border relative shrink-0 overflow-hidden",style:{width:d,height:f,transform:`scale(${s})`,transformOrigin:"top center",fontSize:`${o.fontSize}px`},onClick:w=>{w.stopPropagation(),a(null)},children:[b.length===0&&e===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground/50",style:{padding:`${v}px ${p}px ${R}px ${m}px`},children:[h.jsx("p",{className:"text-lg font-medium",children:"Canvas vacio"}),h.jsx("p",{className:"text-sm mt-1",children:"Haz clic en un bloque de la paleta para empezar"})]}):h.jsxs("div",{className:"flex flex-col h-full",children:[S.length>0&&h.jsx("div",{className:"shrink-0",children:S.map(E)}),h.jsx("div",{className:"flex-1 flex flex-wrap items-start content-start overflow-hidden",style:{padding:`${S.length>0?8:v}px ${p}px ${C.length>0?8:R}px ${m}px`},children:N.map(E)}),C.length>0&&h.jsx("div",{className:"shrink-0 mt-auto",children:C.map(E)})]}),h.jsxs("div",{className:"absolute bottom-2 right-4 text-[10px] text-gray-300 pointer-events-none z-10",children:["Pagina ",e+1," / ",t]})]})}function Ls(){const e=T(g=>g.blocks),t=T(g=>g.pageConfig),n=T(g=>g.selectBlock),r=T(g=>g.blockHeights),o=T(g=>g.setBlockHeight),s=T(g=>g.reorderBlocks),i=c.useRef(null),[a,l]=c.useState(1),[u,d]=c.useState(null),f=qr(Ur(At,{activationConstraint:{distance:5}})),v=c.useCallback((g,D)=>{const y=a>0?Math.round(D/a):D;o(g,y)},[a,o]),p=c.useCallback(()=>{if(!i.current)return;const g=i.current.clientWidth,y=t.orientation==="portrait"?at:ct,M=g-80,O=Math.min(M/y,1);l(O)},[t.orientation]);c.useEffect(()=>{p();const g=new ResizeObserver(p);return i.current&&g.observe(i.current),()=>g.disconnect()},[p]);const R=c.useCallback(g=>{let D=0;for(const y of e){if(y.id===g)return D;y.type==="section_separator"&&D++}return D},[e]),m=c.useCallback(g=>{d(g.active.id)},[]),b=c.useCallback(g=>{const{active:D,over:y}=g;if(d(null),!y||D.id===y.id)return;const M=e.find(F=>F.id===D.id);if(!M||M.type==="section_separator")return;const O=e.find(F=>F.id===y.id);if((O==null?void 0:O.type)==="section_separator")return;const W=R(D.id),K=R(y.id);if(W!==K)return;const ce=e.findIndex(F=>F.id===D.id),me=e.findIndex(F=>F.id===y.id);if(ce===-1||me===-1)return;const _=ks(e,ce,me);s(_.map(F=>F.id))},[e,R,s]),S=c.useCallback(()=>{d(null)},[]),{pages:N,totalPages:C}=Qn({blocks:e,pageConfig:t,blockHeights:r}),E=t.orientation==="portrait"?ct:at,w=u?e.find(g=>g.id===u):null,x=c.useMemo(()=>e.map(g=>g.id),[e]);return h.jsx("div",{ref:i,className:"flex-1 overflow-y-auto bg-muted/40 p-8",onClick:()=>n(null),children:h.jsxs(Ko,{sensors:f,collisionDetection:Qr,onDragStart:m,onDragEnd:b,onDragCancel:S,children:[h.jsx(ys,{items:x,strategy:ms,children:h.jsx("div",{className:"flex flex-col items-center",style:{gap:`${Math.max(24*a,12)}px`},children:N.map(g=>h.jsx("div",{style:{height:E*a,width:"100%",display:"flex",justifyContent:"center"},children:h.jsx(Ts,{pageIndex:g.pageIndex,totalPages:C,blockIds:g.blockIds,allBlocks:e,pageConfig:t,scale:a,onBlockHeightChange:v})},g.pageIndex))})}),h.jsx(hs,{children:w?h.jsx(As,{block:w}):null})]})})}function zs(){const e=T(d=>d.selectedBlockId),t=T(d=>d.blocks),n=T(d=>d.selectBlock),r=T(d=>d.updateBlockConfig),o=T(d=>d.duplicateBlock),s=T(d=>d.removeBlock);if(!e)return h.jsx("div",{className:"flex w-80 flex-col border-l bg-background",children:h.jsx("div",{className:"flex flex-1 items-center justify-center p-4 text-sm text-muted-foreground",children:"Selecciona un bloque para configurarlo"})});const i=t.find(d=>d.id===e);if(!i)return null;const a=Nt(i.type),l=rn[i.type];if(!a||!l)return null;const u=a.ConfigPanel;return h.jsxs("div",{className:"flex w-80 flex-col border-l bg-background",children:[h.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-semibold",children:l.label})}),h.jsx(mt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n(null),children:h.jsx(Fn,{className:"h-4 w-4"})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h.jsx(u,{block:i,onChange:(d,f)=>r(i.id,d,f)})}),i.type!=="section_separator"&&h.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3",children:[h.jsxs(mt,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>o(i.id),children:[h.jsx(on,{className:"h-4 w-4 mr-1"}),"Duplicar"]}),h.jsxs(mt,{variant:"outline",size:"sm",className:"flex-1 text-destructive hover:bg-destructive/10",onClick:()=>{s(i.id)},children:[h.jsx(nn,{className:"h-4 w-4 mr-1"}),"Eliminar"]})]})]})}function _s({open:e,onOpenChange:t}){const n=T(o=>o.pageConfig),r=T(o=>o.updatePageConfig);return h.jsx(Hn,{open:e,onOpenChange:t,children:h.jsxs(Xn,{className:"sm:max-w-md",children:[h.jsx(Wn,{children:h.jsx(Yn,{children:"Configuracion de pagina"})}),h.jsxs("div",{className:"space-y-4 py-2",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(bt,{children:"Orientacion"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:`flex-1 rounded-md border px-3 py-2 text-sm ${n.orientation==="portrait"?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>r({orientation:"portrait"}),children:"Vertical"}),h.jsx("button",{className:`flex-1 rounded-md border px-3 py-2 text-sm ${n.orientation==="landscape"?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>r({orientation:"landscape"}),children:"Horizontal"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(bt,{children:"Margenes (mm)"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["top","right","bottom","left"].map(o=>h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-muted-foreground w-16 capitalize",children:o==="top"?"Arriba":o==="right"?"Derecha":o==="bottom"?"Abajo":"Izquierda"}),h.jsx(Ht,{type:"number",min:5,max:50,value:n.margins[o],onChange:s=>r({margins:{...n.margins,[o]:Math.max(5,Math.min(50,Number(s.target.value)||5))}}),className:"h-8 w-full"})]},o))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(bt,{children:"Tamano de fuente base (px)"}),h.jsx(Ht,{type:"number",min:8,max:14,value:n.fontSize,onChange:o=>r({fontSize:Math.max(8,Math.min(14,Number(o.target.value)||10))}),className:"h-8"})]})]})]})})}export{Ps as B,zs as C,Ls as E,_s as P};
