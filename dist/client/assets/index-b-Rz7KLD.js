import{f as S,aj as O,r as E,j as e,al as D,H as m,Z as f,B as P,ah as Me,T as me,ag as Le,a1 as q,x as F,am as De,an as he,ae as ue,X as pe,ao as ge,S as fe,$ as be,ap as je,aa as Ne,aq as H,ad as ve}from"./index-fgi90ZRw.js";import{E as Re}from"./eye-BSoW0hne.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],He=S("AlignCenter",ze);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Xe=S("AlignLeft",Ue);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Ve=S("AlignRight",Oe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2",key:"1sdynx"}],["path",{d:"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1",key:"1gkd3k"}],["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],ye=S("BatteryCharging",Ye);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],we=S("Battery",We);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],se=S("Braces",Ge);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],Je=S("Eraser",Ke);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["path",{d:"M21 7h-3a2 2 0 0 1-2-2V2",key:"9rb54x"}],["path",{d:"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z",key:"1059l0"}],["path",{d:"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15",key:"16874u"}],["path",{d:"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11",key:"k2ox98"}]],Qe=S("FileStack",Ze);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ce=S("Layers",es);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],ke=S("LayoutTemplate",ss);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],as=S("List",ts);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],rs=S("Pen",ls);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],os=S("Scissors",ns);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],_e=S("Server",cs);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],te=S("Square",is);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],$e=S("Tablet",ds),ae=r=>{let t;const a=new Set,s=(x,g)=>{const u=typeof x=="function"?x(t):x;if(!Object.is(u,t)){const i=t;t=g??(typeof u!="object"||u===null)?u:Object.assign({},t,u),a.forEach(h=>h(t,i))}},l=()=>t,c={setState:s,getState:l,getInitialState:()=>d,subscribe:x=>(a.add(x),()=>a.delete(x))},d=t=r(s,l,c);return c},xs=(r=>r?ae(r):ae),ms=r=>r;function hs(r,t=ms){const a=O.useSyncExternalStore(r.subscribe,O.useCallback(()=>t(r.getState()),[r,t]),O.useCallback(()=>t(r.getInitialState()),[r,t]));return O.useDebugValue(a),a}const le=r=>{const t=xs(r),a=s=>hs(t,s);return Object.assign(a,t),a},us=(r=>r?le(r):le),W={orientation:"portrait",margins:{top:20,right:15,bottom:20,left:15},fontSize:10,fontFamily:"Inter"},ga=[{value:"Inter",label:"Inter (sans-serif)"},{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Georgia",label:"Georgia (serif)"},{value:"Times New Roman",label:"Times New Roman"},{value:"Courier New",label:"Courier New (mono)"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"}],Se=new Set(["cover_header","page_header","page_footer","back_cover"]),fa={cover_header:"top",page_header:"top",page_footer:"bottom",back_cover:"top"},Q={full:"Completo",half:"Mitad",third:"Tercio",two_thirds:"Dos tercios"},ba={full:"w-full",half:"w-1/2",third:"w-1/3",two_thirds:"w-2/3"},ja={left:"text-left",center:"text-center",right:"text-right"},ps={full:1,half:.5,third:.333,two_thirds:.667},Pe=[{id:"portada",label:"Portada",color:"#2563eb"},{id:"intermedia",label:"Pagina Intermedia (Cabecera + Pie)",color:"#059669"},{id:"contraportada",label:"Contraportada",color:"#7c3aed"}],Ee={general:"General",level1:"Nivel 1",level2:"Nivel 2",level3:"Nivel 3"},gs={general:"bg-gray-100 text-gray-700",level1:"bg-green-100 text-green-700",level2:"bg-amber-100 text-amber-700",level3:"bg-red-100 text-red-700"},Ie=new Map;function _(r){Ie.set(r.definition.type,r)}function Na(r){return Ie.get(r)}const k={header:{type:"header",label:"Cabecera",icon:"FileText",category:"structure",hasData:!1,defaultConfig:{title:"Informe de Mantenimiento",subtitle:"",showLogo:!0,showDate:!0,showReference:!0,logoPosition:"left",logoUrl:""}},section_title:{type:"section_title",label:"Titulo de seccion",icon:"Heading",category:"structure",hasData:!1,defaultConfig:{title:"Nueva seccion",description:"",level:1,color:"#2563eb"}},divider:{type:"divider",label:"Separador",icon:"Minus",category:"structure",hasData:!1,defaultConfig:{style:"solid",spacing:"medium",color:"#e5e7eb"}},text_field:{type:"text_field",label:"Campo de texto",icon:"Type",category:"data",hasData:!0,defaultConfig:{key:"",label:"Campo de texto",required:!1,width:"full",helpText:"",placeholder:""}},number_field:{type:"number_field",label:"Campo numerico",icon:"Hash",category:"data",hasData:!0,defaultConfig:{key:"",label:"Campo numerico",required:!1,width:"full",helpText:"",unit:"",min:null,max:null}},date_field:{type:"date_field",label:"Campo de fecha",icon:"Calendar",category:"data",hasData:!0,defaultConfig:{key:"",label:"Fecha",required:!1,width:"full",helpText:""}},text_area:{type:"text_area",label:"Area de texto",icon:"AlignLeft",category:"data",hasData:!0,defaultConfig:{key:"",label:"Area de texto",required:!1,width:"full",helpText:"",rows:3,placeholder:""}},select_field:{type:"select_field",label:"Selector",icon:"ChevronDown",category:"data",hasData:!0,defaultConfig:{key:"",label:"Selector",required:!1,width:"full",helpText:"",options:[]}},tristate:{type:"tristate",label:"Inspeccion OK/NOK/NA",icon:"CheckCircle",category:"inspection",hasData:!0,defaultConfig:{key:"",label:"Punto de inspeccion",withObservation:!0,required:!1,maintenanceLevel:"general"}},checklist:{type:"checklist",label:"Lista de verificacion",icon:"ListChecks",category:"inspection",hasData:!0,defaultConfig:{key:"",label:"Lista de verificacion",layout:"vertical",items:[]}},table:{type:"table",label:"Tabla de datos",icon:"Table",category:"inspection",hasData:!0,defaultConfig:{key:"",label:"Tabla",title:"",titleBg:"#1f2937",titleColor:"#ffffff",headerPosition:"top",headerBg:"#f3f4f6",headerColor:"#92400e",columns:[],fixedRows:[],allowAddRows:!0,minRows:0,maxRows:50}},image:{type:"image",label:"Imagen",icon:"Image",category:"media",hasData:!0,defaultConfig:{key:"",label:"Imagen",allowMultiple:!1,maxFiles:1,maxSizeMB:5,width:"full"}},signature:{type:"signature",label:"Firma",icon:"Pen",category:"media",hasData:!0,defaultConfig:{key:"",label:"Firma",role:"Tecnico",required:!1,width:"half"}},section_separator:{type:"section_separator",label:"Separador de seccion",icon:"FileStack",category:"structure",hasData:!1,defaultConfig:{section:"portada"}},table_of_contents:{type:"table_of_contents",label:"Tabla de contenidos",icon:"List",category:"structure",hasData:!1,defaultConfig:{title:"Tabla de contenidos"}},cover_header:{type:"cover_header",label:"Portada (banner)",icon:"BookOpen",category:"document",hasData:!1,defaultConfig:{title:"Reporte de mantenimiento",subtitle:"",companyName:"PAS Robotics",logoUrl:"",logoPosition:"right",logoVerticalAlign:"center",logoOffsetX:0,logoOffsetY:0,backgroundColor:"#000000",textColor:"#ffffff",titleSize:24,height:280,showAccentLine:!1,accentLineColor:"#ffffff",accentLineWidth:3}},page_header:{type:"page_header",label:"Cabecera de pagina",icon:"PanelTop",category:"document",hasData:!1,defaultConfig:{title:"Reporte de mantenimiento",subtitle:"",logoUrl:"",logoSize:24,backgroundColor:"#1f2937",textColor:"#ffffff",textSize:12,height:40}},page_footer:{type:"page_footer",label:"Pie de pagina",icon:"PanelBottom",category:"document",hasData:!1,defaultConfig:{companyName:"PAS Robotics",showPageNumbers:!0,backgroundColor:"#1f2937",textColor:"#ffffff",textSize:10,backgroundImage:"",height:36}},back_cover:{type:"back_cover",label:"Contraportada",icon:"Square",category:"document",hasData:!1,defaultConfig:{logoUrl:"",backgroundColor:"#111827"}},page_break:{type:"page_break",label:"Salto de pagina",icon:"SeparatorHorizontal",category:"structure",hasData:!1,defaultConfig:{}},content_placeholder:{type:"content_placeholder",label:"Contenido del sistema",icon:"LayoutTemplate",category:"document",hasData:!1,defaultConfig:{label:"Contenido del informe (se llena automaticamente)",contentType:"all"}},intervention_data:{type:"intervention_data",label:"Datos de intervencion",icon:"ClipboardList",category:"document",hasData:!1,defaultConfig:{title:"",accentColor:"#1e40af",sectionBg:"#1e40af",sectionColor:"#ffffff",labelBg:"#f9fafb",labelColor:"#4b5563",verticalAlign:"top"}},client_data:{type:"client_data",label:"Datos del cliente",icon:"Building2",category:"document",hasData:!1,defaultConfig:{title:"",verticalAlign:"top"}},equipment_exchange:{type:"equipment_exchange",label:"Intercambio de equipos",icon:"ArrowLeftRight",category:"inspection",hasData:!0,defaultConfig:{key:"",label:"Intercambio de equipos",title:"",titleBg:"#1f2937",titleColor:"#ffffff",defaultRows:5,headerBg:"#f3f4f6",headerColor:"#92400e",required:!1}},component_section:{type:"component_section",label:"Seccion de componente",icon:"Layers",category:"structure",hasData:!1,defaultConfig:{contentType:"controller_info"}},reducer_oils:{type:"reducer_oils",label:"Aceites en reductoras",icon:"Droplets",category:"inspection",hasData:!0,defaultConfig:{key:"",label:"Aceites en reductoras",title:"",titleBg:"#1f2937",titleColor:"#ffffff",headerBg:"#f3f4f6",headerColor:"#1f2937",fixedRows:[],required:!1}},battery_manipulator:{type:"battery_manipulator",label:"Bateria manipulador",icon:"Battery",category:"inspection",hasData:!0,defaultConfig:{key:"",label:"Bateria manipulador",required:!1}},battery_controller:{type:"battery_controller",label:"Bateria controlador",icon:"BatteryCharging",category:"inspection",hasData:!0,defaultConfig:{key:"",label:"Bateria controlador",required:!1}}},va=[{id:"structure",label:"Estructura",types:["header","section_title","divider","table_of_contents","page_break","component_section"]},{id:"data",label:"Campos de datos",types:["text_field","number_field","date_field","text_area","select_field"]},{id:"inspection",label:"Inspeccion",types:["tristate","checklist","table","equipment_exchange","reducer_oils","battery_manipulator","battery_controller"]},{id:"media",label:"Media y firma",types:["image","signature"]},{id:"document",label:"Documento",types:["cover_header","page_header","page_footer","back_cover","content_placeholder","intervention_data","client_data"]}];function fs(r,t,a){const s={...r},l=t.split(".");let n=s;for(let c=0;c<l.length-1;c++){const d=l[c],x=l[c+1],g=x!=null&&/^\d+$/.test(x);Array.isArray(n[d])?n[d]=[...n[d]]:typeof n[d]=="object"&&n[d]!==null?n[d]={...n[d]}:n[d]=g?[]:{},n=n[d]}const o=l[l.length-1];return o!=null&&(n[o]=a),s}function re(r,t){const a=r.replace(/_/g,"_"),s=t.filter(n=>n.type===r).map(n=>{const c=(n.config.key||"").match(new RegExp(`^${a}_(\\d+)$`));return(c==null?void 0:c[1])!=null?parseInt(c[1],10):0}),l=s.length>0?Math.max(...s):0;return`${a}_${l+1}`}function ne(){return crypto.randomUUID()}const oe=["portada","intermedia","contraportada"];function bs(r){const a=r.filter(n=>n.type==="section_separator").map(n=>n.config.section);if(oe.every(n=>a.includes(n)))return r;const s=r.filter(n=>n.type!=="section_separator"),l=[];for(const n of oe)l.push({id:`section-${n}`,type:"section_separator",config:{section:n}});return s.length>0&&l.splice(1,0,...s),l}const G=us((r,t)=>({blocks:[],pageConfig:{...W},selectedBlockId:null,isDirty:!1,versionId:null,modeloId:null,isDocumentTemplate:!1,blockHeights:new Map,loadSchema:(a,s,l,n=!1)=>{let o=a.blocks||[];n&&(o=bs(o)),r({blocks:o,pageConfig:a.pageConfig||{...W},selectedBlockId:null,isDirty:!1,versionId:l,modeloId:s,isDocumentTemplate:n,blockHeights:new Map})},addBlock:(a,s)=>{const l=k[a];if(!l)return;const{blocks:n,selectedBlockId:o,isDocumentTemplate:c}=t(),d={...l.defaultConfig};l.hasData&&(d.key=re(a,n));const x={id:ne(),type:a,config:d},g=[...n];if(s!==void 0&&s>=0&&s<=n.length)g.splice(s,0,x);else if(c)if(o){const u=n.findIndex(i=>i.id===o);if(u!==-1)if(n[u].type==="section_separator"){let h=u+1;for(;h<n.length&&n[h].type!=="section_separator";)h++;g.splice(h,0,x)}else g.splice(u+1,0,x);else{const i=n.findIndex((h,p)=>p>0&&h.type==="section_separator");g.splice(i!==-1?i:n.length,0,x)}}else{const u=n.findIndex((i,h)=>h>0&&i.type==="section_separator");g.splice(u!==-1?u:n.length,0,x)}else g.push(x);r({blocks:g,isDirty:!0,selectedBlockId:x.id})},removeBlock:a=>{const{blocks:s,selectedBlockId:l}=t(),n=s.find(c=>c.id===a);if((n==null?void 0:n.type)==="section_separator")return;const o=new Map(t().blockHeights);o.delete(a),r({blocks:s.filter(c=>c.id!==a),isDirty:!0,selectedBlockId:l===a?null:l,blockHeights:o})},duplicateBlock:a=>{const{blocks:s}=t(),l=s.findIndex(g=>g.id===a);if(l===-1)return;const n=s[l];if(n.type==="section_separator")return;const o=k[n.type],c=JSON.parse(JSON.stringify(n.config));o!=null&&o.hasData&&c.key&&(c.key=re(n.type,s));const d={id:ne(),type:n.type,config:c},x=[...s];x.splice(l+1,0,d),r({blocks:x,isDirty:!0,selectedBlockId:d.id})},moveBlock:(a,s)=>{const{blocks:l}=t(),n=l.findIndex(u=>u.id===a);if(n===-1||l[n].type==="section_separator")return;const c=s==="up"?n-1:n+1;if(c<0||c>=l.length||l[c].type==="section_separator")return;const d=[...l],x=d[n],g=d[c];d[n]=g,d[c]=x,r({blocks:d,isDirty:!0})},reorderBlocks:a=>{const{blocks:s}=t(),l=new Map(s.map(c=>[c.id,c])),n=a.map(c=>l.get(c)).filter(Boolean),o=s.filter(c=>!a.includes(c.id));r({blocks:[...n,...o],isDirty:!0})},updateBlockConfig:(a,s,l)=>{const{blocks:n}=t();r({blocks:n.map(o=>o.id===a?{...o,config:fs(o.config,s,l)}:o),isDirty:!0})},selectBlock:a=>{r({selectedBlockId:a})},updatePageConfig:a=>{const{pageConfig:s}=t();r({pageConfig:{...s,...a},isDirty:!0})},setBlockHeight:(a,s)=>{const{blockHeights:l}=t();if(l.get(a)===s)return;const n=new Map(l);n.set(a,s),r({blockHeights:n})},getSchema:()=>{const{blocks:a,pageConfig:s}=t();return{blocks:a,pageConfig:s}},markClean:()=>{r({isDirty:!1})},reset:()=>{r({blocks:[],pageConfig:{...W},selectedBlockId:null,isDirty:!1,versionId:null,modeloId:null,isDocumentTemplate:!1,blockHeights:new Map})}})),js=794,Ns=1123,vs=3.78,ys=new Set(["header","section_title","divider","tristate","checklist","table","section_separator","table_of_contents","cover_header","page_header","page_footer","back_cover","page_break","content_placeholder","intervention_data","client_data","equipment_exchange","component_section"]);function ws(r){if(ys.has(r.type))return 1;const t=r.config.width||"full";return ps[t]??1}function Cs(r){const t=new Map;let a=0;for(const s of r){if(s.type==="section_separator"){a++;continue}if(Se.has(s.type)){const l=t.get(a)||[];l.push(s),t.set(a,l)}}return t}function ks({blocks:r,pageConfig:t,blockHeights:a}){return E.useMemo(()=>{if(r.length===0)return{pages:[{pageIndex:0,blockIds:[],sectionChromeIds:[]}],totalPages:1};const l=t.orientation==="portrait"?Ns:js,n=(t.margins.top+t.margins.bottom)*vs,o=l-n,c=Cs(r),d=[];let x={pageIndex:0,blockIds:[],sectionChromeIds:[]},g=0,u=0,i=0,h=0,p=[],y=0,j=!0;const N=()=>{const w=c.get(y);if(!w)return 0;let $=0;for(const I of w)I.type!=="back_cover"&&($+=a.get(I.id)||40);return $},b=()=>{const w=c.get(y);return w?w.filter($=>$.type!=="back_cover").map($=>$.id):[]},v=()=>{const w=u+N();return w>0?l-w-16:o},C=()=>{if(p.length===0)return;const w=v();g+h>w&&x.blockIds.length>0&&(j||(x.sectionChromeIds=b()),d.push(x),x={pageIndex:d.length,blockIds:[],sectionChromeIds:[]},g=0,u=0,j=!1),x.blockIds.push(...p),g+=h,i=0,h=0,p=[]};for(const w of r){if(w.type==="section_separator"){C(),x.blockIds.length>0&&(j||(x.sectionChromeIds=b()),d.push(x)),y++,j=!0,x={pageIndex:d.length,blockIds:[],sectionChromeIds:[],sectionSeparatorId:w.id},g=0,u=0;continue}if(w.type==="page_break"){C(),x.blockIds.push(w.id),j||(x.sectionChromeIds=b()),d.push(x),x={pageIndex:d.length,blockIds:[],sectionChromeIds:[]},g=0,u=0,j=!1;continue}if(w.type==="back_cover"){C(),x.blockIds.length>0&&(d.push(x),x={pageIndex:d.length,blockIds:[],sectionChromeIds:[]},g=0,u=0,j=!1),x.blockIds.push(w.id),u=l;continue}if(Se.has(w.type)){C();const R=a.get(w.id)||40;x.blockIds.push(w.id),u+=R;continue}const $=ws(w),I=a.get(w.id)||30;i+$>1.01&&p.length>0&&C(),p.push(w.id),i+=$,h=Math.max(h,I),$>=1&&C()}return C(),(x.blockIds.length>0||x.sectionSeparatorId||d.length===0)&&(j||(x.sectionChromeIds=b()),d.push(x)),{pages:d,totalPages:d.length}},[r,t,a])}function _s({block:r}){const t=r.config,a=t.title||"Informe de Mantenimiento",s=t.subtitle||"",l=t.showLogo!==!1,n=t.showDate!==!1,o=t.showReference!==!1,c=t.logoPosition||"left";return e.jsx("div",{className:"border-b pb-3 mb-2",children:e.jsxs("div",{className:`flex items-start gap-4 ${c==="right"?"flex-row-reverse":c==="center"?"flex-col items-center":""}`,children:[l&&e.jsx("div",{className:"flex h-14 w-14 shrink-0 items-center justify-center rounded-lg bg-gray-100 border border-dashed border-gray-300",children:e.jsx(D,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:`flex-1 ${c==="center"?"text-center":""}`,children:[e.jsx("h1",{className:"text-lg font-bold leading-tight",children:a}),s&&e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:s}),e.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-400",children:[n&&e.jsx("span",{children:"Fecha: ____/____/________"}),o&&e.jsx("span",{children:"Ref: __________"})]})]})]})})}const $s=[{value:"left",icon:Xe,label:"Izquierda"},{value:"center",icon:He,label:"Centro"},{value:"right",icon:Ve,label:"Derecha"}];function Y({value:r,onChange:t}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Alineacion"}),e.jsx("div",{className:"flex gap-1",children:$s.map(a=>{const s=a.icon;return e.jsx("button",{className:`flex-1 flex items-center justify-center gap-1 rounded border px-2 py-1 text-xs ${r===a.value?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t(a.value),title:a.label,children:e.jsx(s,{className:"h-3.5 w-3.5"})},a.value)})})]})}function Ss({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Titulo"}),e.jsx(f,{value:a.title||"",onChange:s=>t("title",s.target.value),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Subtitulo"}),e.jsx(f,{value:a.subtitle||"",onChange:s=>t("subtitle",s.target.value),className:"h-8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showLogo",checked:a.showLogo!==!1,onChange:s=>t("showLogo",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:"showLogo",className:"text-xs cursor-pointer",children:"Mostrar logo"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Posicion del logo"}),e.jsx("div",{className:"flex gap-1",children:["left","center","right"].map(s=>e.jsx("button",{className:`flex-1 rounded border px-2 py-1 text-xs ${(a.logoPosition||"left")===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("logoPosition",s),children:s==="left"?"Izquierda":s==="center"?"Centro":"Derecha"},s))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"URL del logo"}),e.jsx(f,{value:a.logoUrl||"",onChange:s=>t("logoUrl",s.target.value),placeholder:"https://...",className:"h-8"})]}),e.jsx(Y,{value:a.align||"left",onChange:s=>t("align",s)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showDate",checked:a.showDate!==!1,onChange:s=>t("showDate",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:"showDate",className:"text-xs cursor-pointer",children:"Mostrar fecha"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showReference",checked:a.showReference!==!1,onChange:s=>t("showReference",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:"showReference",className:"text-xs cursor-pointer",children:"Mostrar referencia"})]})]})}_({definition:k.header,EditorPreview:_s,ConfigPanel:Ss});const Z=[{key:"componente.etiqueta",label:"Nombre del componente",example:"Robot 1",category:"componente"},{key:"componente.tipo",label:"Tipo de componente",example:"mechanical_unit",category:"componente"},{key:"componente.numero_serie",label:"Numero de serie",example:"SN-2024-001",category:"componente"},{key:"componente.num_ejes",label:"Numero de ejes",example:"6",category:"componente"},{key:"componente.modelo",label:"Modelo del componente",example:"IRB 6700",category:"componente"},{key:"sistema.nombre",label:"Nombre del sistema",example:"Celula soldadura L1",category:"sistema"},{key:"sistema.descripcion",label:"Descripcion del sistema",example:"Celula de soldadura linea 1",category:"sistema"},{key:"sistema.fabricante",label:"Fabricante del sistema",example:"ABB",category:"sistema"},{key:"cliente.nombre",label:"Nombre del cliente",example:"Empresa S.A.",category:"cliente"},{key:"cliente.maquina",label:"Maquina",example:"Maquina 3",category:"cliente"},{key:"intervencion.actividad",label:"Actividad",example:"Mantenimiento preventivo",category:"intervencion"},{key:"intervencion.fecha",label:"Fecha de intervencion",example:"22/02/2026",category:"intervencion"},{key:"intervencion.referencia",label:"Referencia / OT",example:"OT-2026-0042",category:"intervencion"}],Ps=[{id:"componente",label:"Componente"},{id:"sistema",label:"Sistema"},{id:"cliente",label:"Cliente"},{id:"intervencion",label:"Intervencion"}],Te=/\{\{([a-z_]+\.[a-z_]+)\}\}/g;function Es(r,t){return r.replace(Te,(a,s)=>t[s]??`[${s}]`)}function T(r){const t={};for(const a of Z)t[a.key]=a.example;return Es(r,t)}function Is(r){const t=[];let a;const s=new RegExp(Te.source,"g");for(;(a=s.exec(r))!==null;)a[1]&&!t.includes(a[1])&&t.push(a[1]);return t}function Ts({block:r}){const t=r.config,a=T(t.title||""),s=T(t.description||""),l=t.level||1,n=t.color||"#2563eb",o={1:"text-base font-bold",2:"text-sm font-semibold",3:"text-xs font-semibold"};return e.jsxs("div",{className:"flex items-start gap-2 py-2",children:[e.jsx("div",{className:"w-1 shrink-0 rounded-full self-stretch",style:{backgroundColor:n}}),e.jsxs("div",{children:[e.jsx("div",{className:o[l]||o[1],children:a}),s&&e.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:s})]})]})}function B({value:r,onChange:t,placeholder:a,className:s}){const[l,n]=E.useState(!1),[o,c]=E.useState(!1),d=E.useRef(null),x=Is(r),g=x.length>0,u=i=>{const h=`{{${i}}}`,p=d.current;if(p){const y=p.selectionStart??r.length,j=p.selectionEnd??r.length,N=r.slice(0,y)+h+r.slice(j);t(N),setTimeout(()=>{const b=y+h.length;p.setSelectionRange(b,b),p.focus()},0)}else t(r+h);n(!1)};return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{ref:d,value:r,onChange:i=>t(i.target.value),placeholder:a,className:`h-8 flex-1 ${s??""}`}),g&&e.jsx(P,{type:"button",variant:o?"default":"outline",size:"icon",className:"h-8 w-8 shrink-0",title:"Ver variables usadas",onClick:()=>c(!o),children:e.jsx(Re,{className:"h-3.5 w-3.5"})}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8 shrink-0",title:"Insertar variable dinamica",onClick:()=>n(!l),children:e.jsx(se,{className:"h-3.5 w-3.5"})}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-72 max-h-64 overflow-y-auto rounded-md border bg-white shadow-lg",children:Ps.map(i=>{const h=Z.filter(p=>p.category===i.id);return h.length===0?null:e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-1.5 text-[10px] font-semibold text-gray-400 uppercase tracking-wider bg-gray-50 border-b",children:i.label}),h.map(p=>{const y=x.includes(p.key);return e.jsxs("button",{type:"button",className:`w-full text-left px-3 py-1.5 transition-colors flex items-center justify-between gap-2 ${y?"bg-blue-50 hover:bg-blue-100":"hover:bg-gray-50"}`,onClick:()=>u(p.key),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-medium flex items-center gap-1.5",children:[p.label,y&&e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-blue-500"})]}),e.jsx("div",{className:"text-[10px] text-gray-400 font-mono",children:`{{${p.key}}}`})]}),e.jsx("span",{className:"text-[10px] text-gray-300 italic shrink-0",children:p.example})]},p.key)})]},i.id)})})]})]})]}),g&&o&&e.jsxs("div",{className:"rounded-md border border-blue-200 bg-blue-50/50 p-2 space-y-1.5",children:[e.jsxs("div",{className:"text-[11px] text-blue-700 font-medium",children:[e.jsx("span",{className:"text-blue-400 text-[10px] mr-1",children:"Vista previa:"}),T(r)]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:x.map(i=>{const h=Z.find(p=>p.key===i);return e.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-blue-100 text-[10px] text-blue-700",title:h?`${h.label} → ${h.example}`:i,children:[e.jsx(se,{className:"h-2.5 w-2.5"}),e.jsx("span",{className:"font-medium",children:(h==null?void 0:h.label)??i}),e.jsxs("span",{className:"text-blue-400",children:["= ",(h==null?void 0:h.example)??"?"]})]},i)})})]})]})}function Bs({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Titulo"}),e.jsx(B,{value:a.title||"",onChange:s=>t("title",s),placeholder:"Ej: Control de {{componente.etiqueta}}"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Descripcion"}),e.jsx(B,{value:a.description||"",onChange:s=>t("description",s),placeholder:"Opcional"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Nivel"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3].map(s=>e.jsxs("button",{className:`flex-1 rounded border px-2 py-1 text-xs ${(a.level||1)===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("level",s),children:["Nivel ",s]},s))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.color||"#2563eb",onChange:s=>t("color",s.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.color||"#2563eb",onChange:s=>t("color",s.target.value),className:"h-8 font-mono text-xs flex-1"})]})]}),e.jsx(Y,{value:a.align||"left",onChange:s=>t("align",s)})]})}_({definition:k.section_title,EditorPreview:Ts,ConfigPanel:Bs});function As({block:r}){const t=r.config,a=t.style||"solid",s=t.spacing||"medium",l=t.color||"#e5e7eb",n={small:"py-1",medium:"py-3",large:"py-5"};if(a==="space")return e.jsx("div",{className:n[s]||n.medium});const o=a==="dashed"?"dashed":a==="dotted"?"dotted":"solid";return e.jsx("div",{className:n[s]||n.medium,children:e.jsx("hr",{style:{borderTopStyle:o,borderTopColor:l,borderTopWidth:"1px"},className:"border-0"})})}function qs({block:r,onChange:t}){const a=r.config,s=[{value:"solid",label:"Solido"},{value:"dashed",label:"Discontinuo"},{value:"dotted",label:"Punteado"},{value:"space",label:"Espacio"}],l=[{value:"small",label:"Pequeno"},{value:"medium",label:"Mediano"},{value:"large",label:"Grande"}];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Estilo"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:s.map(n=>e.jsx("button",{className:`rounded border px-2 py-1 text-xs ${(a.style||"solid")===n.value?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("style",n.value),children:n.label},n.value))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Espaciado"}),e.jsx("div",{className:"flex gap-1",children:l.map(n=>e.jsx("button",{className:`flex-1 rounded border px-2 py-1 text-xs ${(a.spacing||"medium")===n.value?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("spacing",n.value),children:n.label},n.value))})]}),e.jsx(Y,{value:a.align||"left",onChange:n=>t("align",n)}),a.style!=="space"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.color||"#e5e7eb",onChange:n=>t("color",n.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.color||"#e5e7eb",onChange:n=>t("color",n.target.value),className:"h-8 font-mono text-xs flex-1"})]})]})]})}_({definition:k.divider,EditorPreview:As,ConfigPanel:qs});function Fs({block:r}){const t=r.config.title||"Tabla de contenidos",a=G(d=>d.blocks),s=G(d=>d.pageConfig),l=G(d=>d.blockHeights),{pages:n}=ks({blocks:a,pageConfig:s,blockHeights:l}),o=new Map;for(const d of n)for(const x of d.blockIds)o.set(x,d.pageIndex+1);const c=a.filter(d=>d.type==="section_title").map((d,x)=>({number:x+1,title:d.config.title||"",level:d.config.level||1,pageNumber:o.get(d.id)??"—"}));return e.jsxs("div",{className:"py-4 px-2",children:[e.jsx("h3",{className:"text-base font-bold mb-4",children:t}),c.length===0?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("p",{className:"text-xs italic",children:"No hay titulos de seccion en la plantilla"})]}):e.jsx("div",{className:"space-y-2 pl-4 pr-2",children:c.map(d=>e.jsxs("div",{className:"flex items-baseline gap-2",style:{paddingLeft:d.level>1?`${(d.level-1)*16}px`:0},children:[e.jsx("span",{className:"font-semibold text-sm shrink-0 w-5 text-right",children:d.number}),e.jsx("span",{className:"font-medium text-sm truncate",children:d.title}),e.jsx("span",{className:"flex-1 border-b border-dotted border-gray-300 min-w-[20px] self-end mb-0.5"}),e.jsx("span",{className:"text-sm text-muted-foreground shrink-0 font-medium",children:d.pageNumber})]},d.number))})]})}function Ms({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Titulo"}),e.jsx(f,{value:a.title||"",onChange:s=>t("title",s.target.value),className:"h-8"})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Este bloque genera automaticamente un indice con todos los titulos de seccion de la plantilla y sus numeros de pagina."})]})}_({definition:k.table_of_contents,EditorPreview:Fs,ConfigPanel:Ms});function U({block:r,children:t}){const a=r.config,s=a.label||"",l=!!a.required,n=a.helpText||"";return e.jsx("div",{className:"py-1",children:e.jsxs("div",{className:"space-y-1",children:[(s||l)&&e.jsxs("div",{className:"text-xs font-medium text-gray-700",children:[s,l&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),t,n&&e.jsx("div",{className:"text-[10px] text-gray-400",children:n})]})})}function Ls({block:r}){const t=r.config.placeholder||"";return e.jsx(U,{block:r,children:e.jsx("div",{className:"h-7 rounded border border-gray-200 bg-gray-50 px-2 flex items-center",children:t&&e.jsx("span",{className:"text-[10px] text-gray-300",children:t})})})}function X({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:s=>{const l=s.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",l)},placeholder:"nombre_campo",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:s=>t("label",s.target.value),placeholder:"Etiqueta del campo",className:"h-8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`required-${r.id}`,checked:!!a.required,onChange:s=>t("required",s.target.checked),className:"h-4 w-4 rounded border-gray-300"}),e.jsx(m,{htmlFor:`required-${r.id}`,className:"text-xs cursor-pointer",children:"Obligatorio"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Ancho"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(Q).map(([s,l])=>e.jsx("button",{className:`rounded border px-2 py-1 text-xs ${a.width===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("width",s),children:l},s))})]}),e.jsx(Y,{value:a.align||"left",onChange:s=>t("align",s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Texto de ayuda"}),e.jsx(f,{value:a.helpText||"",onChange:s=>t("helpText",s.target.value),placeholder:"Opcional",className:"h-8"})]})]})}function Ds({block:r,onChange:t}){return e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{block:r,onChange:t}),e.jsxs("div",{className:"border-t pt-3 space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Placeholder"}),e.jsx(f,{value:r.config.placeholder||"",onChange:a=>t("placeholder",a.target.value),placeholder:"Texto de ejemplo...",className:"h-8"})]})]})}function Rs({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Campo",o=l.placeholder||"",c=!!l.required,d=l.helpText||"";return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(m,{children:[n,c&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsx(f,{value:t??"",onChange:x=>a(x.target.value||null),placeholder:o,readOnly:s,disabled:s}),d&&e.jsx("p",{className:"text-xs text-muted-foreground",children:d})]})}_({definition:k.text_field,EditorPreview:Ls,ConfigPanel:Ds,FormField:Rs});function zs({block:r}){const t=r.config,a=t.unit||"",s=t.min,l=t.max;return e.jsxs(U,{block:r,children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"h-7 flex-1 rounded border border-gray-200 bg-gray-50 px-2 flex items-center",children:e.jsx("span",{className:"text-[10px] text-gray-300",children:"0"})}),a&&e.jsx("span",{className:"shrink-0 rounded bg-gray-100 px-1.5 py-1 text-[10px] font-medium text-gray-500",children:a})]}),(s!==null||l!==null)&&e.jsxs("div",{className:"text-[9px] text-gray-300 mt-0.5",children:[s!==null&&`Min: ${s}`,s!==null&&l!==null&&" · ",l!==null&&`Max: ${l}`]})]})}function Hs({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{block:r,onChange:t}),e.jsxs("div",{className:"border-t pt-3 space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Unidad"}),e.jsx(f,{value:a.unit||"",onChange:s=>t("unit",s.target.value),placeholder:"mm, V, A, bar...",className:"h-8"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Minimo"}),e.jsx(f,{type:"number",value:a.min!==null&&a.min!==void 0?String(a.min):"",onChange:s=>t("min",s.target.value?Number(s.target.value):null),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Maximo"}),e.jsx(f,{type:"number",value:a.max!==null&&a.max!==void 0?String(a.max):"",onChange:s=>t("max",s.target.value?Number(s.target.value):null),className:"h-8"})]})]})]})]})}function Us({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Campo numerico",o=l.unit||"",c=!!l.required,d=l.helpText||"",x=l.min,g=l.max;return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(m,{children:[n,c&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{type:"number",value:t!=null?String(t):"",onChange:u=>{const i=u.target.value;a(i===""?null:Number(i))},readOnly:s,disabled:s,min:x??void 0,max:g??void 0}),o&&e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:o})]}),d&&e.jsx("p",{className:"text-xs text-muted-foreground",children:d})]})}_({definition:k.number_field,EditorPreview:zs,ConfigPanel:Hs,FormField:Us});function Xs({block:r}){return e.jsx(U,{block:r,children:e.jsxs("div",{className:"h-7 rounded border border-gray-200 bg-gray-50 px-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-gray-300",children:"DD/MM/AAAA"}),e.jsx(Me,{className:"h-3 w-3 text-gray-300"})]})})}function Os({block:r,onChange:t}){return e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{block:r,onChange:t}),e.jsx("p",{className:"text-[10px] text-muted-foreground border-t pt-2",children:"Este campo no tiene configuracion adicional."})]})}function Vs({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Fecha",o=!!l.required,c=l.helpText||"";return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(m,{children:[n,o&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsx(f,{type:"date",value:t??"",onChange:d=>a(d.target.value||null),readOnly:s,disabled:s}),c&&e.jsx("p",{className:"text-xs text-muted-foreground",children:c})]})}_({definition:k.date_field,EditorPreview:Xs,ConfigPanel:Os,FormField:Vs});function Ys({block:r}){const t=r.config,a=t.rows||3,s=t.placeholder||"";return e.jsx(U,{block:r,children:e.jsx("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-1",style:{minHeight:`${a*18}px`},children:s&&e.jsx("span",{className:"text-[10px] text-gray-300",children:s})})})}function Ws({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{block:r,onChange:t}),e.jsxs("div",{className:"border-t pt-3 space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Filas visibles"}),e.jsx(f,{type:"number",min:2,max:10,value:a.rows||3,onChange:s=>t("rows",Math.max(2,Math.min(10,Number(s.target.value)||3))),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Placeholder"}),e.jsx(f,{value:a.placeholder||"",onChange:s=>t("placeholder",s.target.value),placeholder:"Texto de ejemplo...",className:"h-8"})]})]})]})}function Gs({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Area de texto",o=l.placeholder||"",c=!!l.required,d=l.helpText||"",x=l.rows||3;return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(m,{children:[n,c&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsx(me,{value:t??"",onChange:g=>a(g.target.value||null),placeholder:o,readOnly:s,disabled:s,rows:x}),d&&e.jsx("p",{className:"text-xs text-muted-foreground",children:d})]})}_({definition:k.text_area,EditorPreview:Ys,ConfigPanel:Ws,FormField:Gs});function Ks({block:r}){const t=r.config.options||[];return e.jsx(U,{block:r,children:e.jsxs("div",{className:"h-7 rounded border border-gray-200 bg-gray-50 px-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-gray-300",children:t.length>0?`${t.length} opciones`:"Sin opciones"}),e.jsx(Le,{className:"h-3 w-3 text-gray-300"})]})})}function Js({options:r,onChange:t}){const a=()=>{const n=r.length+1;t([...r,{value:`opcion_${n}`,label:`Opcion ${n}`}])},s=n=>{t(r.filter((o,c)=>c!==n))},l=(n,o,c)=>{const d=r.map((x,g)=>g===n?{...x,[o]:c}:x);t(d)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-xs",children:"Opciones"}),r.length===0&&e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Sin opciones definidas"}),r.map((n,o)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{value:n.value,onChange:c=>{const d=c.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();l(o,"value",d)},placeholder:"valor",className:"h-7 text-xs font-mono flex-1"}),e.jsx(f,{value:n.label,onChange:c=>l(o,"label",c.target.value),placeholder:"Etiqueta",className:"h-7 text-xs flex-1"}),e.jsx("button",{onClick:()=>s(o),className:"shrink-0 rounded p-1 text-muted-foreground hover:text-destructive hover:bg-destructive/10",children:e.jsx(q,{className:"h-3 w-3"})})]},o)),e.jsxs(P,{variant:"outline",size:"sm",className:"w-full h-7 text-xs",onClick:a,children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Anadir opcion"]})]})}function Zs({block:r,onChange:t}){const a=r.config.options||[];return e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{block:r,onChange:t}),e.jsx("div",{className:"border-t pt-3",children:e.jsx(Js,{options:a,onChange:s=>t("options",s)})})]})}function Qs({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Selector",o=!!l.required,c=l.helpText||"",d=l.options??[];return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs(m,{children:[n,o&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsxs("select",{value:t??"",onChange:x=>a(x.target.value||null),disabled:s,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),d.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]}),c&&e.jsx("p",{className:"text-xs text-muted-foreground",children:c})]})}_({definition:k.select_field,EditorPreview:Ks,ConfigPanel:Zs,FormField:Qs});function et({block:r}){const t=r.config,a=t.label||"",s=t.withObservation!==!1,l=t.maintenanceLevel||"general",n=!!t.required;return e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`shrink-0 rounded px-1.5 py-0.5 text-[9px] font-medium ${gs[l]}`,children:Ee[l]}),e.jsxs("span",{className:"flex-1 text-xs font-medium",children:[a,n&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"rounded border border-green-200 bg-green-50 px-2 py-0.5 text-[9px] font-medium text-green-600",children:"OK"}),e.jsx("span",{className:"rounded border border-red-200 bg-red-50 px-2 py-0.5 text-[9px] font-medium text-red-600",children:"NOK"}),e.jsx("span",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-0.5 text-[9px] font-medium text-gray-500",children:"N/A"})]})]}),s&&e.jsx("div",{className:"mt-1 ml-16",children:e.jsx("div",{className:"h-5 rounded border border-dashed border-gray-200 bg-gray-50/50 px-2 flex items-center",children:e.jsx("span",{className:"text-[9px] text-gray-300",children:"Observaciones..."})})})]})}function st({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:s=>{const l=s.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",l)},placeholder:"nombre_campo",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:s=>t("label",s.target.value),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Nivel de mantenimiento"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(Ee).map(([s,l])=>e.jsx("button",{className:`rounded border px-2 py-1 text-xs ${(a.maintenanceLevel||"general")===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("maintenanceLevel",s),children:l},s))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`withObs-${r.id}`,checked:a.withObservation!==!1,onChange:s=>t("withObservation",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`withObs-${r.id}`,className:"text-xs cursor-pointer",children:"Con campo de observaciones"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`required-${r.id}`,checked:!!a.required,onChange:s=>t("required",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`required-${r.id}`,className:"text-xs cursor-pointer",children:"Obligatorio"})]})]})}const tt=[{key:"ok",label:"OK",activeClass:"bg-green-600 text-white border-green-600"},{key:"nok",label:"NOK",activeClass:"bg-red-600 text-white border-red-600"},{key:"na",label:"N/A",activeClass:"bg-gray-500 text-white border-gray-500"}];function at({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Punto de inspeccion",o=l.withObservation!==!1,c=!!l.required,d=t??{valor:null,observacion:""},x=u=>{s||a({...d,valor:d.valor===u?null:u})},g=u=>{s||a({...d,observacion:u})};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs(m,{className:"flex-1",children:[n,c&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsx("div",{className:"flex gap-1",children:tt.map(u=>e.jsx("button",{type:"button",onClick:()=>x(u.key),disabled:s,className:`px-3 py-1 text-xs font-semibold rounded border transition-colors ${d.valor===u.key?u.activeClass:"border-gray-300 text-gray-500 hover:border-gray-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:u.label},u.key))})]}),o&&e.jsx(me,{value:d.observacion,onChange:u=>g(u.target.value),placeholder:"Observaciones...",rows:2,readOnly:s,disabled:s,className:"text-sm"})]})}_({definition:k.tristate,EditorPreview:et,ConfigPanel:st,FormField:at});function lt({block:r}){const t=r.config,a=t.label||"",s=t.items||[],l=t.layout||"vertical";return e.jsxs("div",{className:"py-1",children:[a&&e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:a}),s.length===0?e.jsx("div",{className:"text-[10px] text-gray-300 italic",children:"Sin items definidos"}):l==="horizontal"?e.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-0.5",children:s.map((n,o)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(te,{className:"h-3 w-3 text-gray-300 shrink-0"}),e.jsx("span",{className:"text-[10px] text-gray-500",children:n.label})]},o))}):e.jsx("div",{className:"space-y-0.5",children:s.map((n,o)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(te,{className:"h-3 w-3 text-gray-300 shrink-0"}),e.jsx("span",{className:"text-[10px] text-gray-500",children:n.label})]},o))})]})}function rt({items:r,onChange:t}){const a=()=>{const n=r.length+1;t([...r,{key:`item_${n}`,label:`Item ${n}`}])},s=n=>{t(r.filter((o,c)=>c!==n))},l=(n,o,c)=>{const d=r.map((x,g)=>g===n?{...x,[o]:c}:x);t(d)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-xs",children:"Items"}),r.length===0&&e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Sin items definidos"}),r.map((n,o)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{value:n.key,onChange:c=>{const d=c.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();l(o,"key",d)},placeholder:"clave",className:"h-7 text-xs font-mono flex-1"}),e.jsx(f,{value:n.label,onChange:c=>l(o,"label",c.target.value),placeholder:"Etiqueta",className:"h-7 text-xs flex-1"}),e.jsx("button",{onClick:()=>s(o),className:"shrink-0 rounded p-1 text-muted-foreground hover:text-destructive hover:bg-destructive/10",children:e.jsx(q,{className:"h-3 w-3"})})]},o)),e.jsxs(P,{variant:"outline",size:"sm",className:"w-full h-7 text-xs",onClick:a,children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Anadir item"]})]})}function nt({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:s=>{const l=s.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",l)},placeholder:"nombre_campo",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:s=>t("label",s.target.value),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Disposicion de items"}),e.jsx("div",{className:"flex gap-1",children:[{value:"vertical",label:"Vertical"},{value:"horizontal",label:"Horizontal"}].map(s=>e.jsx("button",{className:`flex-1 rounded border px-2 py-1 text-xs ${(a.layout||"vertical")===s.value?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("layout",s.value),children:s.label},s.value))})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsx(rt,{items:a.items||[],onChange:s=>t("items",s)})})]})}function ot({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Lista de verificacion",o=l.items||[],c=!!l.required,d=l.layout||"vertical",x=t??[],g=i=>{if(s)return;const h=x.includes(i)?x.filter(p=>p!==i):[...x,i];a(h)},u=o.map(i=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:x.includes(i.key),onChange:()=>g(i.key),disabled:s,className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm text-gray-700",children:i.label})]},i.key));return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{children:[n,c&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),o.length===0?e.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Sin items definidos"}):d==="horizontal"?e.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1.5",children:u}):e.jsx("div",{className:"space-y-1.5",children:u})]})}_({definition:k.checklist,EditorPreview:lt,ConfigPanel:nt,FormField:ot});function Be({col:r,value:t}){const a=String(t??"");switch(r.type){case"checkbox":return e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`h-3 w-3 rounded-sm border ${a==="true"?"bg-primary border-primary":"border-gray-300"}`})});case"tristate":{const s=a||null;return e.jsx("div",{className:"flex gap-0.5 justify-center",children:["OK","NOK","NA"].map(l=>e.jsx("span",{className:`px-1 rounded text-[8px] font-medium ${s===l?l==="OK"?"bg-green-100 text-green-700":l==="NOK"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-500":"text-gray-300"}`,children:l},l))})}case"select":return e.jsx("span",{className:"text-gray-400 italic",children:a||"Seleccionar..."});default:return e.jsx("span",{className:"text-gray-500",children:a})}}function ct({columns:r,fixedRows:t,headerBg:a,headerColor:s,cellPad:l,allowAddRows:n}){const o=t.slice(0,3),c=t.length>3?t.length-3:0;return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-[10px]",children:[e.jsx("thead",{children:e.jsx("tr",{style:{backgroundColor:a},children:r.map(d=>e.jsx("th",{className:`${l} text-left font-medium`,style:{width:d.width!=="auto"?d.width:void 0,color:s},children:d.label},d.key))})}),e.jsx("tbody",{children:o.length>0?o.map((d,x)=>e.jsx("tr",{className:x%2===1?"bg-gray-50":"",children:r.map(g=>e.jsx("td",{className:l,children:e.jsx(Be,{col:g,value:d[g.key]})},g.key))},x)):e.jsx("tr",{children:r.map(d=>e.jsx("td",{className:l,children:e.jsx("div",{className:"h-3 bg-gray-100 rounded"})},d.key))})})]}),c>0&&e.jsxs("div",{className:"bg-gray-50 border-t px-2 py-0.5 text-[9px] text-gray-400 text-center",children:["y ",c," mas..."]}),n&&e.jsx("div",{className:"bg-gray-50 border-t px-2 py-0.5 text-[9px] text-gray-400 text-center italic",children:"+ filas dinamicas"})]})}function it({columns:r,fixedRows:t,headerBg:a,headerColor:s,cellPad:l}){const n=t.length>0?t.length:1,o=Math.min(n,3);return e.jsx("table",{className:"w-full text-[10px]",children:e.jsx("tbody",{children:r.map((c,d)=>e.jsxs("tr",{className:d%2===1?"bg-gray-50":"",children:[e.jsx("th",{className:`${l} text-left font-medium whitespace-nowrap`,style:{backgroundColor:a,color:s,width:"35%"},children:c.label}),Array.from({length:o}).map((x,g)=>{const u=t[g];return e.jsx("td",{className:l,children:u?e.jsx(Be,{col:c,value:u[c.key]}):e.jsx("div",{className:"h-3 bg-gray-100 rounded"})},g)})]},c.key))})})}function dt({block:r}){const t=r.config,a=t.label||"",s=T(t.title||""),l=t.titleBg||"#1f2937",n=t.titleColor||"#ffffff",o=t.columns||[],c=t.fixedRows||[],d=t.allowAddRows!==!1,x=t.headerBg||"#1f2937",g=t.headerColor||"#ffffff",u=!!t.compact,i=t.headerPosition||"top";if(o.length===0)return e.jsxs("div",{className:"py-2",children:[a&&e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:a}),e.jsx("div",{className:"rounded-sm border border-dashed border-gray-200 p-4 text-center text-[10px] text-gray-300",children:"Sin columnas definidas"})]});const h=u?"px-1.5 py-0.5":"px-2 py-1";return e.jsxs("div",{className:"py-2",children:[a&&e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:a}),e.jsxs("div",{className:"rounded-sm border overflow-hidden",children:[s&&e.jsx("div",{className:"px-3 py-1.5 text-[11px] font-semibold",style:{backgroundColor:l,color:n},children:s}),i==="left"?e.jsx(it,{columns:o,fixedRows:c,headerBg:x,headerColor:g,cellPad:h}):e.jsx(ct,{columns:o,fixedRows:c,headerBg:x,headerColor:g,cellPad:h,allowAddRows:d})]})]})}const xt=[{value:"text",label:"Texto"},{value:"number",label:"Numero"},{value:"date",label:"Fecha"},{value:"checkbox",label:"Checkbox"},{value:"tristate",label:"Tristate"},{value:"select",label:"Selector"}];function mt({columns:r,onChange:t}){const a=()=>{const n=r.length+1;t([...r,{key:`col_${n}`,label:`Columna ${n}`,type:"text",width:"auto"}])},s=n=>{t(r.filter((o,c)=>c!==n))},l=(n,o,c)=>{const d=r.map((x,g)=>g===n?{...x,[o]:c}:x);t(d)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-xs",children:"Columnas"}),r.length===0&&e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Sin columnas definidas"}),r.map((n,o)=>e.jsxs("div",{className:"rounded border p-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-[10px] font-medium text-muted-foreground",children:["Columna ",o+1]}),e.jsx("button",{onClick:()=>s(o),className:"rounded p-0.5 text-muted-foreground hover:text-destructive",children:e.jsx(q,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsx(f,{value:n.key,onChange:c=>{const d=c.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();l(o,"key",d)},placeholder:"clave",className:"h-6 text-[10px] font-mono"}),e.jsx(f,{value:n.label,onChange:c=>l(o,"label",c.target.value),placeholder:"Etiqueta",className:"h-6 text-[10px]"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("select",{value:n.type,onChange:c=>l(o,"type",c.target.value),className:"h-6 flex-1 rounded border text-[10px] px-1",children:xt.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))}),e.jsx(f,{value:n.width,onChange:c=>l(o,"width",c.target.value),placeholder:"auto",className:"h-6 w-16 text-[10px]",title:"Ancho (auto, 100px, 20%, etc.)"})]}),n.type==="select"&&e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Opciones (una por linea)"}),e.jsx("textarea",{value:(n.options||[]).join(`
`),onChange:c=>{const d=c.target.value.split(`
`).filter(x=>x.trim());l(o,"options",d)},placeholder:`Opcion 1
Opcion 2`,className:"w-full rounded border text-[10px] px-1 py-0.5 resize-none",rows:3})]})]},o)),e.jsxs(P,{variant:"outline",size:"sm",className:"w-full h-7 text-xs",onClick:a,children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Anadir columna"]})]})}function ht({columns:r,rows:t,onChange:a}){if(r.length===0)return e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Filas fijas"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Define columnas primero para poder anadir filas fijas."})]});const s=()=>{const o={};r.forEach(c=>{o[c.key]=""}),a([...t,o])},l=o=>{a(t.filter((c,d)=>d!==o))},n=(o,c,d)=>{const x=t.map((g,u)=>u===o?{...g,[c]:d}:g);a(x)};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{className:"text-xs",children:["Filas fijas (",t.length,")"]}),t.length>0&&e.jsx("div",{className:"rounded border overflow-x-auto",children:e.jsxs("table",{className:"w-full text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50",children:[r.map(o=>e.jsx("th",{className:"px-1.5 py-1 text-left font-medium",children:o.label},o.key)),e.jsx("th",{className:"w-6"})]})}),e.jsx("tbody",{children:t.map((o,c)=>e.jsxs("tr",{className:"border-t",children:[r.map(d=>e.jsx("td",{className:"px-0.5 py-0.5",children:e.jsx(f,{value:String(o[d.key]||""),onChange:x=>n(c,d.key,x.target.value),className:"h-5 text-[10px] border-0 bg-transparent px-1"})},d.key)),e.jsx("td",{className:"px-0.5",children:e.jsx("button",{onClick:()=>l(c),className:"rounded p-0.5 text-muted-foreground hover:text-destructive",children:e.jsx(q,{className:"h-2.5 w-2.5"})})})]},c))})]})}),e.jsxs(P,{variant:"outline",size:"sm",className:"w-full h-7 text-xs",onClick:s,children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Anadir fila fija"]})]})}function ut({block:r,onChange:t}){const a=r.config,s=a.columns||[],l=a.headerPosition||"top";return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:n=>{const o=n.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",o)},placeholder:"nombre_tabla",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:n=>t("label",n.target.value),className:"h-8"})]}),e.jsxs("div",{className:"border-t pt-3 space-y-3",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Titulo de tabla"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Texto del titulo"}),e.jsx(B,{value:a.title||"",onChange:n=>t("title",n),placeholder:"Ej: Control general de {{componente.etiqueta}}"})]}),a.title&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Fondo titulo"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.titleBg||"#1f2937",onChange:n=>t("titleBg",n.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.titleBg||"#1f2937",onChange:n=>t("titleBg",n.target.value),className:"h-8 font-mono text-xs flex-1"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Color texto titulo"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.titleColor||"#ffffff",onChange:n=>t("titleColor",n.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.titleColor||"#ffffff",onChange:n=>t("titleColor",n.target.value),className:"h-8 font-mono text-xs flex-1"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-3 space-y-2",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Posicion de cabecera"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded-md border cursor-pointer transition-colors ${l==="top"?"border-blue-400 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:`headerPos-${r.id}`,value:"top",checked:l==="top",onChange:()=>t("headerPosition","top"),className:"h-3.5 w-3.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium",children:"Superior"}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Cabecera horizontal"})]})]}),e.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded-md border cursor-pointer transition-colors ${l==="left"?"border-blue-400 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:`headerPos-${r.id}`,value:"left",checked:l==="left",onChange:()=>t("headerPosition","left"),className:"h-3.5 w-3.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium",children:"Lateral"}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Cabecera a la izquierda"})]})]})]})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsx(mt,{columns:s,onChange:n=>t("columns",n)})}),e.jsx("div",{className:"border-t pt-3",children:e.jsx(ht,{columns:s,rows:a.fixedRows||[],onChange:n=>t("fixedRows",n)})}),e.jsxs("div",{className:"border-t pt-3 space-y-3",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Estilo de tabla"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Fondo cabecera"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.headerBg||"#1f2937",onChange:n=>t("headerBg",n.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.headerBg||"#1f2937",onChange:n=>t("headerBg",n.target.value),className:"h-8 font-mono text-xs flex-1"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Texto cabecera"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.headerColor||"#ffffff",onChange:n=>t("headerColor",n.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.headerColor||"#ffffff",onChange:n=>t("headerColor",n.target.value),className:"h-8 font-mono text-xs flex-1"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`compact-${r.id}`,checked:!!a.compact,onChange:n=>t("compact",n.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`compact-${r.id}`,className:"text-xs cursor-pointer",children:"Compacta (padding reducido)"})]})]}),e.jsxs("div",{className:"border-t pt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`allowAdd-${r.id}`,checked:a.allowAddRows!==!1,onChange:n=>t("allowAddRows",n.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`allowAdd-${r.id}`,className:"text-xs cursor-pointer",children:"Permitir anadir filas"})]}),a.allowAddRows!==!1&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Min filas"}),e.jsx(f,{type:"number",min:0,value:a.minRows||0,onChange:n=>t("minRows",Math.max(0,Number(n.target.value)||0)),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Max filas"}),e.jsx(f,{type:"number",min:1,value:a.maxRows||50,onChange:n=>t("maxRows",Math.max(1,Number(n.target.value)||50)),className:"h-8"})]})]})]})]})}function Ae({col:r,value:t,onChange:a,readOnly:s}){switch(r.type){case"checkbox":return e.jsx("div",{className:"flex justify-center py-1",children:e.jsx("input",{type:"checkbox",checked:t===!0||t==="true",onChange:l=>a(l.target.checked),disabled:s,className:"h-4 w-4 rounded border-gray-300"})});case"tristate":{const l=t,n=[{label:"OK",color:"text-gray-400 border-gray-200",activeColor:"bg-green-100 text-green-700 border-green-300"},{label:"NOK",color:"text-gray-400 border-gray-200",activeColor:"bg-red-100 text-red-700 border-red-300"},{label:"NA",color:"text-gray-400 border-gray-200",activeColor:"bg-gray-100 text-gray-600 border-gray-300"}];return e.jsx("div",{className:"flex gap-0.5 justify-center py-0.5",children:n.map(o=>e.jsx("button",{type:"button",disabled:s,className:`px-1.5 py-0.5 rounded border text-[11px] font-medium transition-colors ${l===o.label?o.activeColor:o.color} ${s?"cursor-default":"cursor-pointer hover:opacity-80"}`,onClick:()=>{s||a(l===o.label?null:o.label)},children:o.label},o.label))})}case"select":{const l=r.options||[];return e.jsxs("select",{value:String(t??""),onChange:n=>a(n.target.value||null),disabled:s,className:"h-8 w-full rounded border-0 bg-transparent text-sm px-1 focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"—"}),l.map(n=>e.jsx("option",{value:n,children:n},n))]})}case"date":return e.jsx(f,{type:"date",value:String(t??""),onChange:l=>a(l.target.value||null),readOnly:s,disabled:s,className:"h-8 text-sm border-0 bg-transparent focus-visible:ring-1 px-1"});default:return e.jsx(f,{type:r.type==="number"?"number":"text",value:String(t??""),onChange:l=>a(l.target.value||null),readOnly:s,disabled:s,className:"h-8 text-sm border-0 bg-transparent focus-visible:ring-1 px-1"})}}function pt({columns:r,rows:t,headerBg:a,headerColor:s,cellPad:l,allowAddRows:n,readOnly:o,updateCell:c,removeRow:d}){return e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:a},children:[r.map(x=>e.jsx("th",{className:`${l} text-left text-xs font-medium`,style:{width:x.width!=="auto"?x.width:void 0,color:s},children:x.label},x.key)),!o&&n&&e.jsx("th",{className:`${l} w-10`})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:r.length+(!o&&n?1:0),className:"px-3 py-4 text-center text-xs text-gray-400 italic",children:["Sin datos. ",n&&!o&&"Pulsa + para anadir una fila."]})}):t.map((x,g)=>e.jsxs("tr",{className:g%2===1?"bg-gray-50":"bg-white",children:[r.map(u=>e.jsx("td",{className:l,children:e.jsx(Ae,{col:u,value:x[u.key],onChange:i=>c(g,u.key,i),readOnly:!!o})},u.key)),!o&&n&&e.jsx("td",{className:"px-1 py-1 text-center",children:e.jsx(P,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 text-gray-400 hover:text-red-500",onClick:()=>d(g),children:e.jsx(q,{className:"h-3.5 w-3.5"})})})]},g))})]})}function gt({columns:r,rows:t,headerBg:a,headerColor:s,cellPad:l,readOnly:n,updateCell:o}){const c=Math.max(t.length,1);return e.jsx("table",{className:"w-full text-sm",children:e.jsx("tbody",{children:r.map((d,x)=>e.jsxs("tr",{className:x%2===1?"bg-gray-50":"bg-white",children:[e.jsx("th",{className:`${l} text-left text-xs font-medium whitespace-nowrap`,style:{backgroundColor:a,color:s,width:"35%"},children:d.label}),t.length===0?e.jsx("td",{className:l,children:e.jsx("span",{className:"text-xs text-gray-400 italic",children:"Sin datos"})}):t.map((g,u)=>e.jsx("td",{className:l,style:{width:`${65/c}%`},children:e.jsx(Ae,{col:d,value:g[d.key],onChange:i=>o(u,d.key,i),readOnly:!!n})},u))]},d.key))})})}function ft({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"",o=l.title||"",c=l.titleBg||"#1f2937",d=l.titleColor||"#ffffff",x=l.columns||[],g=l.allowAddRows!==!1,u=l.maxRows||50,i=!!l.required,h=l.headerBg||"#1f2937",p=l.headerColor||"#ffffff",y=!!l.compact,j=l.headerPosition||"top",N=t??[],b=($,I,R)=>{if(s)return;const qe=N.map((ee,Fe)=>Fe===$?{...ee,[I]:R}:ee);a(qe)},v=()=>{if(s||N.length>=u)return;const $={};for(const I of x)$[I.key]=null;a([...N,$])},C=$=>{s||a(N.filter((I,R)=>R!==$))};if(x.length===0)return e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(m,{children:n}),e.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Sin columnas definidas"})]});const w=y?"px-1 py-0.5":"px-2 py-1";return e.jsxs("div",{className:"space-y-2",children:[(n||i)&&e.jsxs(m,{children:[n,i&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsxs("div",{className:"rounded-sm border overflow-x-auto",children:[o&&e.jsx("div",{className:"px-3 py-1.5 text-sm font-semibold",style:{backgroundColor:c,color:d},children:o}),j==="left"?e.jsx(gt,{columns:x,rows:N,headerBg:h,headerColor:p,cellPad:w,readOnly:!!s,updateCell:b}):e.jsx(pt,{columns:x,rows:N,headerBg:h,headerColor:p,cellPad:w,allowAddRows:g,readOnly:!!s,updateCell:b,removeRow:C})]}),j==="top"&&g&&!s&&N.length<u&&e.jsxs(P,{type:"button",variant:"outline",size:"sm",className:"gap-1",onClick:v,children:[e.jsx(F,{className:"h-3.5 w-3.5"}),"Anadir fila"]})]})}_({definition:k.table,EditorPreview:dt,ConfigPanel:ut,FormField:ft});function bt({block:r}){const t=r.config,a=t.label||"",s=T(t.title||""),l=t.titleBg||"#1f2937",n=t.titleColor||"#ffffff",o=t.headerBg||"#f3f4f6",c=t.headerColor||"#92400e",d=t.defaultRows||5,x=Math.min(d,3);return e.jsxs("div",{className:"w-full py-1",children:[a&&e.jsx("div",{className:"text-xs font-bold mb-1.5 px-1",children:a}),e.jsxs("div",{className:"rounded-sm border overflow-hidden",children:[s&&e.jsx("div",{className:"px-3 py-1.5 text-[11px] font-semibold",style:{backgroundColor:l,color:n},children:s}),e.jsxs("table",{className:"w-full text-[8px] border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:o},children:[e.jsxs("th",{className:"font-medium px-1 py-1 text-center border-r border-white/20",style:{color:c,width:"7%"},rowSpan:2,children:["Uds.",e.jsx("br",{}),"Salida"]}),e.jsx("th",{className:"font-medium px-1 py-1 text-center border-r border-white/20",style:{color:c},colSpan:2,children:"Designacion"}),e.jsx("th",{className:"font-medium px-1 py-1 text-center border-r border-white/20",style:{color:c},colSpan:2,children:"Numero de serie"}),e.jsxs("th",{className:"font-medium px-1 py-1 text-center border-r border-white/20",style:{color:c,width:"12%"},rowSpan:2,children:["Inter-",e.jsx("br",{}),"cambio"]}),e.jsx("th",{className:"font-medium px-1 py-1 text-center border-r border-white/20",style:{color:c,width:"8%"},rowSpan:2,children:"Usado"}),e.jsxs("th",{className:"font-medium px-1 py-1 text-center",style:{color:c,width:"7%"},rowSpan:2,children:["Uds.",e.jsx("br",{}),"Usadas"]})]})}),e.jsx("tbody",{children:Array.from({length:x}).map((g,u)=>{const i=u<2;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-200 text-center text-gray-400 align-middle py-2",rowSpan:1,children:i?"1":"-"}),e.jsxs("td",{className:"border border-gray-200 p-0",colSpan:2,children:[e.jsxs("div",{className:"flex border-b border-gray-100",children:[e.jsx("span",{className:"bg-gray-50 px-1.5 py-0.5 font-medium text-gray-500 border-r border-gray-100 shrink-0 w-[38px]",children:"Entrada"}),e.jsx("span",{className:"px-1.5 py-0.5 text-gray-400 flex-1 break-all",children:i?"3HAC044075-001":"-"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"bg-gray-50 px-1.5 py-0.5 font-medium text-gray-500 border-r border-gray-100 shrink-0 w-[38px]",children:"Salida"}),e.jsx("span",{className:"px-1.5 py-0.5 text-gray-400 flex-1 break-all",children:i?"3HAC044075-001":"-"})]})]}),e.jsxs("td",{className:"border border-gray-200 p-0",colSpan:2,children:[e.jsxs("div",{className:"flex border-b border-gray-100",children:[e.jsx("span",{className:"bg-gray-50 px-1.5 py-0.5 font-medium text-gray-500 border-r border-gray-100 shrink-0 w-[38px]",children:"Entrada"}),e.jsx("span",{className:"px-1.5 py-0.5 text-gray-400 flex-1 break-all",children:"-"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"bg-gray-50 px-1.5 py-0.5 font-medium text-gray-500 border-r border-gray-100 shrink-0 w-[38px]",children:"Salida"}),e.jsx("span",{className:"px-1.5 py-0.5 text-gray-400 flex-1 break-all",children:"-"})]})]}),e.jsx("td",{className:"border border-gray-200 text-center align-middle",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-2.5 w-2.5 rounded-sm border border-gray-300"})})}),e.jsx("td",{className:"border border-gray-200 text-center align-middle",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`h-2.5 w-2.5 rounded-sm border ${i?"bg-gray-700 border-gray-700":"border-gray-300"}`})})}),e.jsx("td",{className:"border border-gray-200 text-center text-gray-400 align-middle",children:i?"1":"-"})]},u)})})]}),e.jsx("div",{className:"bg-gray-50 border-t px-2 py-0.5 text-[8px] text-gray-400 text-center italic",children:"+ filas dinamicas"})]})]})}function jt({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:s=>{const l=s.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",l)},placeholder:"intercambio_equipos",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:s=>t("label",s.target.value),placeholder:"Intercambio de equipos",className:"h-8"})]}),e.jsxs("div",{className:"border-t pt-3 space-y-3",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Titulo de tabla"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Texto del titulo"}),e.jsx(B,{value:a.title||"",onChange:s=>t("title",s),placeholder:"Ej: Intercambio de equipos - {{componente.etiqueta}}"})]}),a.title&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Fondo titulo"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.titleBg||"#1f2937",onChange:s=>t("titleBg",s.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.titleBg||"#1f2937",onChange:s=>t("titleBg",s.target.value),className:"h-8 font-mono text-xs flex-1"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Color texto titulo"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.titleColor||"#ffffff",onChange:s=>t("titleColor",s.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.titleColor||"#ffffff",onChange:s=>t("titleColor",s.target.value),className:"h-8 font-mono text-xs flex-1"})]})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Filas por defecto"}),e.jsx(f,{type:"number",min:1,max:20,value:a.defaultRows||5,onChange:s=>t("defaultRows",parseInt(s.target.value)||5),className:"h-8"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Estilo cabecera"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Fondo"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.headerBg||"#1f2937",onChange:s=>t("headerBg",s.target.value),className:"h-8 w-8 rounded border cursor-pointer"}),e.jsx(f,{value:a.headerBg||"#1f2937",onChange:s=>t("headerBg",s.target.value),className:"h-8 flex-1 font-mono text-xs"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Texto"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.headerColor||"#ffffff",onChange:s=>t("headerColor",s.target.value),className:"h-8 w-8 rounded border cursor-pointer"}),e.jsx(f,{value:a.headerColor||"#ffffff",onChange:s=>t("headerColor",s.target.value),className:"h-8 flex-1 font-mono text-xs"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`required-${r.id}`,checked:!!a.required,onChange:s=>t("required",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`required-${r.id}`,className:"text-xs cursor-pointer",children:"Obligatorio"})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Tabla de intercambio de equipos con entrada/salida de designaciones, numeros de serie, y control de unidades usadas."})]})}function ce(){return{unidadesSalida:"",designacionEntrada:"",designacionSalida:"",serieEntrada:"",serieSalida:"",intercambio:!1,usado:!1,unidadesUsadas:""}}function Nt({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"",o=!!l.required,c=l.title||"",d=l.titleBg||"#1f2937",x=l.titleColor||"#ffffff",g=l.headerBg||"#f3f4f6",u=l.headerColor||"#92400e",i=l.defaultRows||5,h=t??Array.from({length:i},ce),p=(N,b,v)=>{if(s)return;const C=h.map((w,$)=>$===N?{...w,[b]:v}:w);a(C)},y=()=>{s||a([...h,ce()])},j=N=>{s||a(h.filter((b,v)=>v!==N))};return e.jsxs("div",{className:"space-y-2",children:[(n||o)&&e.jsxs(m,{children:[n,o&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsxs("div",{className:"rounded-sm border overflow-x-auto",children:[c&&e.jsx("div",{className:"px-3 py-1.5 text-sm font-semibold",style:{backgroundColor:d,color:x},children:c}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:g},children:[e.jsxs("th",{className:"font-medium text-xs px-2 py-1.5 text-center border-r border-white/20",style:{color:u,width:"7%"},children:["Uds.",e.jsx("br",{}),"Salida"]}),e.jsx("th",{className:"font-medium text-xs px-2 py-1.5 text-center border-r border-white/20",style:{color:u},colSpan:2,children:"Designacion"}),e.jsx("th",{className:"font-medium text-xs px-2 py-1.5 text-center border-r border-white/20",style:{color:u},colSpan:2,children:"Numero de serie"}),e.jsxs("th",{className:"font-medium text-xs px-2 py-1.5 text-center border-r border-white/20",style:{color:u,width:"10%"},children:["Inter-",e.jsx("br",{}),"cambio"]}),e.jsx("th",{className:"font-medium text-xs px-2 py-1.5 text-center border-r border-white/20",style:{color:u,width:"8%"},children:"Usado"}),e.jsxs("th",{className:"font-medium text-xs px-2 py-1.5 text-center border-r border-white/20",style:{color:u,width:"7%"},children:["Uds.",e.jsx("br",{}),"Usadas"]}),!s&&e.jsx("th",{className:"w-10"})]})}),e.jsx("tbody",{children:h.map((N,b)=>e.jsxs("tr",{className:b%2===1?"bg-gray-50":"bg-white",children:[e.jsx("td",{className:"border border-gray-200 px-1 text-center align-middle",children:e.jsx(f,{type:"number",min:0,value:N.unidadesSalida,onChange:v=>p(b,"unidadesSalida",v.target.value),readOnly:s,disabled:s,className:"h-auto text-sm text-center border-0 bg-transparent p-0 focus-visible:ring-0"})}),e.jsxs("td",{className:"border border-gray-200 p-0",colSpan:2,children:[e.jsxs("div",{className:"flex items-center border-b border-gray-100",children:[e.jsx("span",{className:"bg-gray-100 px-2 py-1 text-xs font-medium text-gray-500 border-r border-gray-200 shrink-0 w-[60px]",children:"Entrada"}),e.jsx(f,{value:N.designacionEntrada,onChange:v=>p(b,"designacionEntrada",v.target.value),readOnly:s,disabled:s,className:"h-auto text-sm border-0 bg-transparent rounded-none focus-visible:ring-0 px-2 py-1"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-gray-100 px-2 py-1 text-xs font-medium text-gray-500 border-r border-gray-200 shrink-0 w-[60px]",children:"Salida"}),e.jsx(f,{value:N.designacionSalida,onChange:v=>p(b,"designacionSalida",v.target.value),readOnly:s,disabled:s,className:"h-auto text-sm border-0 bg-transparent rounded-none focus-visible:ring-0 px-2 py-1"})]})]}),e.jsxs("td",{className:"border border-gray-200 p-0",colSpan:2,children:[e.jsxs("div",{className:"flex items-center border-b border-gray-100",children:[e.jsx("span",{className:"bg-gray-100 px-2 py-1 text-xs font-medium text-gray-500 border-r border-gray-200 shrink-0 w-[60px]",children:"Entrada"}),e.jsx(f,{value:N.serieEntrada,onChange:v=>p(b,"serieEntrada",v.target.value),readOnly:s,disabled:s,className:"h-auto text-sm border-0 bg-transparent rounded-none focus-visible:ring-0 px-2 py-1"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-gray-100 px-2 py-1 text-xs font-medium text-gray-500 border-r border-gray-200 shrink-0 w-[60px]",children:"Salida"}),e.jsx(f,{value:N.serieSalida,onChange:v=>p(b,"serieSalida",v.target.value),readOnly:s,disabled:s,className:"h-auto text-sm border-0 bg-transparent rounded-none focus-visible:ring-0 px-2 py-1"})]})]}),e.jsx("td",{className:"border border-gray-200 text-center align-middle",children:e.jsx("input",{type:"checkbox",checked:!!N.intercambio,onChange:v=>p(b,"intercambio",v.target.checked),disabled:s,className:"h-4 w-4 rounded border-gray-300"})}),e.jsx("td",{className:"border border-gray-200 text-center align-middle",children:e.jsx("input",{type:"checkbox",checked:!!N.usado,onChange:v=>p(b,"usado",v.target.checked),disabled:s,className:"h-4 w-4 rounded border-gray-300"})}),e.jsx("td",{className:"border border-gray-200 px-1 text-center align-middle",children:e.jsx(f,{type:"number",min:0,value:N.unidadesUsadas,onChange:v=>p(b,"unidadesUsadas",v.target.value),readOnly:s,disabled:s,className:"h-auto text-sm text-center border-0 bg-transparent p-0 focus-visible:ring-0"})}),!s&&e.jsx("td",{className:"px-1 py-1 text-center",children:e.jsx(P,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 text-gray-400 hover:text-red-500",onClick:()=>j(b),children:e.jsx(q,{className:"h-3.5 w-3.5"})})})]},b))})]})]}),!s&&e.jsxs(P,{type:"button",variant:"outline",size:"sm",className:"gap-1",onClick:y,children:[e.jsx(F,{className:"h-3.5 w-3.5"}),"Anadir equipo"]})]})}_({definition:k.equipment_exchange,EditorPreview:bt,ConfigPanel:jt,FormField:Nt});function vt({block:r}){const t=r.config,a=t.label||"",s=T(t.title||""),l=t.titleBg||"#1f2937",n=t.titleColor||"#ffffff",o=t.headerBg||"#f3f4f6",c=t.headerColor||"#1f2937",d=!!t.compact,x=t.fixedRows||[],g=x.slice(0,5),u=x.length>5?x.length-5:0,i=d?"px-1.5 py-0.5":"px-2 py-1";return e.jsxs("div",{className:"w-full py-1",children:[a&&e.jsx("div",{className:"text-xs font-bold mb-1.5 px-1",children:a}),e.jsxs("div",{className:"rounded-sm border overflow-hidden",children:[s&&e.jsx("div",{className:"px-3 py-1.5 text-[11px] font-semibold",style:{backgroundColor:l,color:n},children:s}),e.jsxs("table",{className:"w-full text-[10px] border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:o},children:[e.jsx("th",{className:`font-medium ${i} text-left`,style:{color:c,width:"6%"},children:"Eje"}),e.jsx("th",{className:`font-medium ${i} text-left`,style:{color:c,width:"26%"},children:"Tipo suministro"}),e.jsx("th",{className:`font-medium ${i} text-left`,style:{color:c,width:"10%"},children:"Unidad"}),e.jsx("th",{className:`font-medium ${i} text-left`,style:{color:c,width:"10%"},children:"Volumen"}),e.jsx("th",{className:`font-medium ${i} text-center`,style:{color:c,width:"12%"},children:"Control"}),e.jsx("th",{className:`font-medium ${i} text-center`,style:{color:c,width:"12%"},children:"Cambio"}),e.jsx("th",{className:`font-medium ${i} text-left`,style:{color:c,width:"24%"},children:"Observaciones"})]})}),e.jsx("tbody",{children:g.length>0?g.map((h,p)=>e.jsxs("tr",{className:p%2===1?"bg-gray-50":"",children:[e.jsx("td",{className:`${i} text-gray-500 border-t border-gray-100`,children:h.eje}),e.jsx("td",{className:`${i} text-gray-500 border-t border-gray-100`,children:h.tipoSuministro||"—"}),e.jsx("td",{className:`${i} text-gray-500 border-t border-gray-100`,children:h.unidad||"-"}),e.jsx("td",{className:`${i} text-gray-500 border-t border-gray-100`,children:h.volumen||"-"}),e.jsx("td",{className:`${i} border-t border-gray-100 text-center`,children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-2.5 w-2.5 rounded-sm border border-gray-300"})})}),e.jsx("td",{className:`${i} border-t border-gray-100 text-center`,children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-2.5 w-2.5 rounded-sm border border-gray-300"})})}),e.jsx("td",{className:`${i} text-gray-400 border-t border-gray-100`,children:"-"})]},p)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-3 py-3 text-center text-gray-300 italic",children:"Sin filas definidas. Configura las filas en el panel de propiedades."})})})]}),u>0&&e.jsxs("div",{className:"bg-gray-50 border-t px-2 py-0.5 text-[9px] text-gray-400 text-center",children:["y ",u," mas..."]})]})]})}const yt=["1","2 Inferior","2 Superior","3"];function wt({block:r,onChange:t}){const a=r.config,s=a.fixedRows||[],{data:l}=De(),n=(l||[]).filter(i=>i.activo),o=i=>{t("fixedRows",i)},c=(i,h,p)=>{const y=s.map((j,N)=>N===i?{...j,[h]:p}:j);o(y)},d=(i,h)=>{const p=h?Number(h):null,y=n.find(N=>N.id===p),j=s.map((N,b)=>b===i?{...N,aceiteId:p,tipoSuministro:(y==null?void 0:y.nombre)||"",unidad:(y==null?void 0:y.unidad)||""}:N);o(j)},x=(i,h)=>{const p=s[i];if(!p)return;const y=p.niveles||[],j=y.includes(h)?y.filter(N=>N!==h):[...y,h];c(i,"niveles",j)},g=()=>{const i=s.length>0?Math.max(...s.map(h=>Number(h.eje)||0))+1:1;o([...s,{eje:i,tipoSuministro:"",aceiteId:null,unidad:"",volumen:"",niveles:[]}])},u=i=>{o(s.filter((h,p)=>p!==i))};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:i=>{const h=i.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",h)},placeholder:"aceites_reductoras",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:i=>t("label",i.target.value),placeholder:"Aceites en reductoras",className:"h-8"})]}),e.jsxs("div",{className:"border-t pt-3 space-y-3",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Titulo de tabla"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Texto del titulo"}),e.jsx(B,{value:a.title||"",onChange:i=>t("title",i),placeholder:"Ej: Reductoras del {{componente.etiqueta}}"})]}),a.title&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Fondo titulo"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.titleBg||"#1f2937",onChange:i=>t("titleBg",i.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.titleBg||"#1f2937",onChange:i=>t("titleBg",i.target.value),className:"h-8 font-mono text-xs flex-1"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Color texto titulo"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.titleColor||"#ffffff",onChange:i=>t("titleColor",i.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.titleColor||"#ffffff",onChange:i=>t("titleColor",i.target.value),className:"h-8 font-mono text-xs flex-1"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-3 space-y-2",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Filas de la tabla (datos de plantilla)"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Define eje, tipo de aceite/grasa (del catalogo), volumen y niveles de mantenimiento. En el formulario, el tecnico rellena Control, Cambio y Observaciones."}),e.jsx("div",{className:"space-y-2",children:s.map((i,h)=>e.jsxs("div",{className:"bg-gray-50 rounded border p-1.5 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground w-6",children:"Eje"}),e.jsx(f,{type:"number",min:1,value:i.eje,onChange:p=>c(h,"eje",Number(p.target.value)||""),className:"h-7 w-14 text-xs text-center"})]}),e.jsx(P,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0 text-gray-400 hover:text-red-500",onClick:()=>u(h),children:e.jsx(q,{className:"h-3 w-3"})})]}),e.jsxs("select",{value:i.aceiteId??"",onChange:p=>d(h,p.target.value),className:"h-7 w-full text-xs border rounded bg-white px-1.5 focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"— Seleccionar aceite/grasa —"}),n.map(p=>e.jsxs("option",{value:p.id,children:[p.nombre,p.unidad?` (${p.unidad})`:""]},p.id))]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground w-12 shrink-0",children:"Volumen"}),e.jsx(f,{value:i.volumen,onChange:p=>c(h,"volumen",p.target.value),placeholder:"Ej: 2.5",className:"h-7 flex-1 text-xs"}),i.unidad&&e.jsx("span",{className:"text-[10px] text-muted-foreground shrink-0",children:i.unidad})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground shrink-0",children:"Niveles:"}),yt.map(p=>{const y=(i.niveles||[]).includes(p);return e.jsx("button",{type:"button",onClick:()=>x(h,p),className:`px-1.5 py-0.5 rounded text-[10px] font-medium border transition-colors ${y?"bg-blue-100 border-blue-300 text-blue-700":"bg-white border-gray-200 text-gray-400 hover:border-gray-300"}`,children:p},p)})]})]},h))}),e.jsxs(P,{type:"button",variant:"outline",size:"sm",className:"gap-1 w-full",onClick:g,children:[e.jsx(F,{className:"h-3.5 w-3.5"}),"Anadir fila"]})]}),e.jsxs("div",{className:"border-t pt-3 space-y-3",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Estilo de tabla"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Fondo cabecera"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.headerBg||"#1f2937",onChange:i=>t("headerBg",i.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.headerBg||"#1f2937",onChange:i=>t("headerBg",i.target.value),className:"h-8 font-mono text-xs flex-1"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Texto cabecera"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.headerColor||"#ffffff",onChange:i=>t("headerColor",i.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.headerColor||"#ffffff",onChange:i=>t("headerColor",i.target.value),className:"h-8 font-mono text-xs flex-1"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`compact-${r.id}`,checked:!!a.compact,onChange:i=>t("compact",i.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`compact-${r.id}`,className:"text-xs cursor-pointer",children:"Compacta (padding reducido)"})]})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`required-${r.id}`,checked:!!a.required,onChange:i=>t("required",i.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`required-${r.id}`,className:"text-xs cursor-pointer",children:"Obligatorio"})]})})]})}function Ct({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"",o=!!l.required,c=l.title||"",d=l.titleBg||"#1f2937",x=l.titleColor||"#ffffff",g=l.headerBg||"#f3f4f6",u=l.headerColor||"#1f2937",i=!!l.compact,h=t||[],p=i?"px-1.5 py-0.5":"px-2 py-1.5",y=(j,N,b)=>{if(s)return;const v=h.map((C,w)=>w===j?{...C,[N]:b}:C);a(v)};return e.jsxs("div",{className:"space-y-2",children:[(n||o)&&e.jsxs(m,{children:[n,o&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsxs("div",{className:"rounded-sm border overflow-x-auto",children:[c&&e.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold",style:{backgroundColor:d,color:x},children:c}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:g},children:[e.jsx("th",{className:`font-medium text-xs ${p} text-left`,style:{color:u,width:"6%"},children:"Eje"}),e.jsx("th",{className:`font-medium text-xs ${p} text-left`,style:{color:u,width:"24%"},children:"Tipo suministro"}),e.jsx("th",{className:`font-medium text-xs ${p} text-left`,style:{color:u,width:"8%"},children:"Unidad"}),e.jsx("th",{className:`font-medium text-xs ${p} text-left`,style:{color:u,width:"10%"},children:"Volumen"}),e.jsx("th",{className:`font-medium text-xs ${p} text-center`,style:{color:u,width:"10%"},children:"Control"}),e.jsx("th",{className:`font-medium text-xs ${p} text-center`,style:{color:u,width:"10%"},children:"Cambio"}),e.jsx("th",{className:`font-medium text-xs ${p} text-left`,style:{color:u,width:"32%"},children:"Observaciones"})]})}),e.jsx("tbody",{children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-3 py-4 text-center text-xs text-gray-400 italic",children:"Sin filas definidas en la plantilla."})}):h.map((j,N)=>e.jsxs("tr",{className:N%2===1?"bg-gray-50":"bg-white",children:[e.jsx("td",{className:`${p} text-gray-600 border-t border-gray-100 text-center`,children:j.eje}),e.jsx("td",{className:`${p} text-gray-600 border-t border-gray-100`,children:j.tipoSuministro}),e.jsx("td",{className:`${p} text-gray-600 border-t border-gray-100`,children:j.unidad||"-"}),e.jsx("td",{className:`${p} text-gray-600 border-t border-gray-100`,children:j.volumen||"-"}),e.jsx("td",{className:"px-2 py-1 border-t border-gray-100 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("input",{type:"checkbox",checked:!!j.control,onChange:b=>y(N,"control",b.target.checked),disabled:s,className:"h-4 w-4 rounded border-gray-300"})})}),e.jsx("td",{className:"px-2 py-1 border-t border-gray-100 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("input",{type:"checkbox",checked:!!j.cambio,onChange:b=>y(N,"cambio",b.target.checked),disabled:s,className:"h-4 w-4 rounded border-gray-300"})})}),e.jsx("td",{className:"px-1 py-1 border-t border-gray-100",children:e.jsx(f,{value:j.observaciones||"",onChange:b=>y(N,"observaciones",b.target.value),placeholder:"-",readOnly:s,disabled:s,className:"h-7 text-xs border-0 bg-transparent px-1 focus-visible:ring-0"})})]},N))})]})]})]})}_({definition:k.reducer_oils,EditorPreview:vt,ConfigPanel:wt,FormField:Ct});function kt({block:r}){const a=r.config.label||"Bateria manipulador";return e.jsx("div",{className:"w-full py-1",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-sm border border-gray-200 p-3",children:[e.jsx(we,{className:"h-5 w-5 text-gray-400 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700",children:a}),e.jsx("div",{className:"text-[10px] text-gray-400 italic mt-0.5",children:"Sin bateria seleccionada"})]})]})})}function _t({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:s=>{const l=s.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",l)},placeholder:"bateria_manipulador",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:s=>t("label",s.target.value),placeholder:"Bateria manipulador",className:"h-8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`required-${r.id}`,checked:!!a.required,onChange:s=>t("required",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`required-${r.id}`,className:"text-xs cursor-pointer",children:"Obligatorio"})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Seleccion de bateria para la unidad mecanica del catalogo de consumibles. Muestra baterias compatibles con manipulador (mechanical_unit)."})]})}const $t={consumibleId:null,consumibleNombre:"",cantidad:1,notas:""};function St({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Bateria manipulador",o=!!l.required,{data:c}=he({tipo:"bateria"}),d=(c||[]).filter(i=>i.activo&&(i.compatibleCon==="mechanical_unit"||i.compatibleCon===null)),x=t||$t,g=i=>{s||a({...x,...i})},u=i=>{const h=i?Number(i):null,p=d.find(y=>y.id===h);g({consumibleId:h,consumibleNombre:(p==null?void 0:p.nombre)||""})};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{children:[e.jsx(we,{className:"inline h-3.5 w-3.5 mr-1 -mt-0.5"}),n,o&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsxs("div",{className:"rounded-sm border border-gray-200 p-3 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs text-gray-500",children:"Bateria"}),e.jsxs("select",{value:x.consumibleId??"",onChange:i=>u(i.target.value),disabled:s,className:"h-8 w-full text-xs border rounded bg-transparent px-2 focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"— Seleccionar bateria —"}),d.map(i=>e.jsx("option",{value:i.id,children:i.nombre},i.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs text-gray-500",children:"Cantidad"}),e.jsx(f,{type:"number",min:0,value:x.cantidad,onChange:i=>g({cantidad:Number(i.target.value)||0}),readOnly:s,disabled:s,className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs text-gray-500",children:"Notas"}),e.jsx(f,{value:x.notas,onChange:i=>g({notas:i.target.value}),placeholder:"Observaciones",readOnly:s,disabled:s,className:"h-8 text-xs"})]})]})]})]})}_({definition:k.battery_manipulator,EditorPreview:kt,ConfigPanel:_t,FormField:St});function Pt({block:r}){const a=r.config.label||"Bateria controlador";return e.jsx("div",{className:"w-full py-1",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-sm border border-gray-200 p-3",children:[e.jsx(ye,{className:"h-5 w-5 text-gray-400 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700",children:a}),e.jsx("div",{className:"text-[10px] text-gray-400 italic mt-0.5",children:"Sin bateria seleccionada"})]})]})})}function Et({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:s=>{const l=s.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",l)},placeholder:"bateria_controlador",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:s=>t("label",s.target.value),placeholder:"Bateria controlador",className:"h-8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`required-${r.id}`,checked:!!a.required,onChange:s=>t("required",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`required-${r.id}`,className:"text-xs cursor-pointer",children:"Obligatorio"})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Seleccion de bateria para el controlador del catalogo de consumibles. Muestra baterias compatibles con controlador (controller)."})]})}const It={consumibleId:null,consumibleNombre:"",cantidad:1,notas:""};function Tt({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Bateria controlador",o=!!l.required,{data:c}=he({tipo:"bateria"}),d=(c||[]).filter(i=>i.activo&&(i.compatibleCon==="controller"||i.compatibleCon===null)),x=t||It,g=i=>{s||a({...x,...i})},u=i=>{const h=i?Number(i):null,p=d.find(y=>y.id===h);g({consumibleId:h,consumibleNombre:(p==null?void 0:p.nombre)||""})};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{children:[e.jsx(ye,{className:"inline h-3.5 w-3.5 mr-1 -mt-0.5"}),n,o&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsxs("div",{className:"rounded-sm border border-gray-200 p-3 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs text-gray-500",children:"Bateria"}),e.jsxs("select",{value:x.consumibleId??"",onChange:i=>u(i.target.value),disabled:s,className:"h-8 w-full text-xs border rounded bg-transparent px-2 focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"— Seleccionar bateria —"}),d.map(i=>e.jsx("option",{value:i.id,children:i.nombre},i.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs text-gray-500",children:"Cantidad"}),e.jsx(f,{type:"number",min:0,value:x.cantidad,onChange:i=>g({cantidad:Number(i.target.value)||0}),readOnly:s,disabled:s,className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs text-gray-500",children:"Notas"}),e.jsx(f,{value:x.notas,onChange:i=>g({notas:i.target.value}),placeholder:"Observaciones",readOnly:s,disabled:s,className:"h-8 text-xs"})]})]})]})]})}_({definition:k.battery_controller,EditorPreview:Pt,ConfigPanel:Et,FormField:Tt});function Bt({block:r}){const t=r.config,a=t.label||"",s=t.maxFiles||1;return e.jsxs("div",{className:"py-1",children:[a&&e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:a}),e.jsxs("div",{className:"flex flex-col items-center justify-center rounded border-2 border-dashed border-gray-200 bg-gray-50/50 p-6 gap-1",children:[e.jsx(ue,{className:"h-8 w-8 text-gray-300"}),e.jsxs("span",{className:"text-[10px] text-gray-400",children:["Hasta ",s," archivo",s>1?"s":""]})]})]})}function At({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:s=>{const l=s.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",l)},placeholder:"nombre_campo",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:s=>t("label",s.target.value),className:"h-8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`multi-${r.id}`,checked:!!a.allowMultiple,onChange:s=>t("allowMultiple",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`multi-${r.id}`,className:"text-xs cursor-pointer",children:"Permitir multiples"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Maximo de archivos"}),e.jsx(f,{type:"number",min:1,max:20,value:a.maxFiles||1,onChange:s=>t("maxFiles",Math.max(1,Math.min(20,Number(s.target.value)||1))),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Tamano maximo (MB)"}),e.jsx(f,{type:"number",min:1,max:50,value:a.maxSizeMB||5,onChange:s=>t("maxSizeMB",Math.max(1,Math.min(50,Number(s.target.value)||5))),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Ancho"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(Q).map(([s,l])=>e.jsx("button",{className:`rounded border px-2 py-1 text-xs ${(a.width||"full")===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("width",s),children:l},s))})]})]})}function qt({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Imagen",o=l.maxFiles||1,c=l.maxSizeMB||5,d=!!l.required,x=t??[],g=E.useRef(null),u=h=>{if(!h||s)return;const p=o-x.length,y=Array.from(h).slice(0,p);for(const j of y){if(j.size>c*1024*1024){alert(`"${j.name}" supera el limite de ${c} MB.`);continue}if(!j.type.startsWith("image/")){alert(`"${j.name}" no es una imagen valida.`);continue}const N=new FileReader;N.onload=()=>{const b={name:j.name,data:N.result};a([...x,b])},N.readAsDataURL(j)}g.current&&(g.current.value="")},i=h=>{s||a(x.filter((p,y)=>y!==h))};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{children:[n,d&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),x.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map((h,p)=>e.jsxs("div",{className:"relative group rounded border overflow-hidden",style:{width:120,height:90},children:[e.jsx("img",{src:h.data,alt:h.name,className:"w-full h-full object-cover"}),!s&&e.jsx("button",{type:"button",onClick:()=>i(p),className:"absolute top-1 right-1 bg-black/60 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(pe,{className:"h-3 w-3"})}),e.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-black/50 text-white text-[9px] px-1 py-0.5 truncate",children:h.name})]},p))}),!s&&x.length<o&&e.jsxs("div",{onClick:()=>{var h;return(h=g.current)==null?void 0:h.click()},onDragOver:h=>{h.preventDefault(),h.stopPropagation()},onDrop:h=>{h.preventDefault(),h.stopPropagation(),u(h.dataTransfer.files)},className:"flex flex-col items-center justify-center gap-2 rounded border-2 border-dashed border-gray-300 bg-gray-50 p-6 cursor-pointer hover:border-blue-400 hover:bg-blue-50/30 transition-colors",children:[e.jsx(ge,{className:"h-6 w-6 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Arrastra imagenes o haz clic para seleccionar"}),e.jsxs("span",{className:"text-[10px] text-gray-400",children:["Max ",c," MB por archivo",o>1&&` · ${x.length}/${o} archivos`]})]}),e.jsx("input",{ref:g,type:"file",accept:"image/*",multiple:o>1,onChange:h=>u(h.target.files),className:"hidden"}),s&&x.length===0&&e.jsxs("div",{className:"flex items-center justify-center gap-2 rounded border border-dashed border-gray-200 p-6",children:[e.jsx(ue,{className:"h-6 w-6 text-gray-300"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Sin imagenes"})]})]})}_({definition:k.image,EditorPreview:Bt,ConfigPanel:At,FormField:qt});function Ft({block:r}){const t=r.config,a=t.label||"",s=t.role||"",l=!!t.required;return e.jsxs("div",{className:"py-1",children:[(a||l)&&e.jsxs("div",{className:"text-xs font-medium text-gray-700 mb-1",children:[a,l&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center rounded border border-gray-200 bg-gray-50/50 p-4 gap-1",children:[e.jsx(rs,{className:"h-5 w-5 text-gray-300"}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"Firma"}),s&&e.jsx("span",{className:"text-[9px] text-gray-300",children:s})]})]})}function Mt({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Clave (snake_case)"}),e.jsx(f,{value:a.key||"",onChange:s=>{const l=s.target.value.replace(/[^a-z0-9_]/g,"").toLowerCase();t("key",l)},placeholder:"nombre_campo",className:"h-8 font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Etiqueta"}),e.jsx(f,{value:a.label||"",onChange:s=>t("label",s.target.value),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Rol"}),e.jsx(f,{value:a.role||"",onChange:s=>t("role",s.target.value),placeholder:"Tecnico PAS, Responsable cliente...",className:"h-8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`required-${r.id}`,checked:!!a.required,onChange:s=>t("required",s.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:`required-${r.id}`,className:"text-xs cursor-pointer",children:"Obligatorio"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Ancho"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(Q).map(([s,l])=>e.jsx("button",{className:`rounded border px-2 py-1 text-xs ${(a.width||"half")===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("width",s),children:l},s))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Alineacion horizontal"}),e.jsx("div",{className:"flex gap-1",children:[{value:"left",label:"Izquierda"},{value:"center",label:"Centro"},{value:"right",label:"Derecha"}].map(s=>e.jsx("button",{className:`flex-1 rounded border px-2 py-1 text-xs ${(a.align||"left")===s.value?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("align",s.value),children:s.label},s.value))})]})]})}const M=400,L=180;function Lt({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.label||"Firma",o=l.role||"",c=!!l.required,d=t??null,x=E.useRef(null),g=E.useRef(!1),[u,i]=E.useState(!1);E.useEffect(()=>{const b=x.current;if(!b)return;const v=b.getContext("2d");if(v)if(v.clearRect(0,0,M,L),d){const C=new window.Image;C.onload=()=>{v.drawImage(C,0,0,M,L),i(!0)},C.src=d}else i(!1)},[d]);const h=E.useCallback(b=>{const v=x.current;if(!v)return{x:0,y:0};const C=v.getBoundingClientRect(),w=M/C.width,$=L/C.height;if("touches"in b){const I=b.touches[0]||b.changedTouches[0];return{x:(I.clientX-C.left)*w,y:(I.clientY-C.top)*$}}return{x:(b.clientX-C.left)*w,y:(b.clientY-C.top)*$}},[]),p=E.useCallback(b=>{var w;if(s)return;b.preventDefault(),g.current=!0;const v=(w=x.current)==null?void 0:w.getContext("2d");if(!v)return;const C=h(b);v.beginPath(),v.moveTo(C.x,C.y),v.lineWidth=2,v.lineCap="round",v.lineJoin="round",v.strokeStyle="#1a1a1a"},[s,h]),y=E.useCallback(b=>{var w;if(!g.current||s)return;b.preventDefault();const v=(w=x.current)==null?void 0:w.getContext("2d");if(!v)return;const C=h(b);v.lineTo(C.x,C.y),v.stroke(),i(!0)},[s,h]),j=E.useCallback(()=>{if(!g.current)return;g.current=!1;const b=x.current;if(!b)return;const v=b.toDataURL("image/png");a(v)},[a]),N=()=>{var v;if(s)return;const b=(v=x.current)==null?void 0:v.getContext("2d");b&&b.clearRect(0,0,M,L),i(!1),a(null)};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(m,{children:[n,c&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"}),o&&e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground font-normal",children:["(",o,")"]})]}),!s&&u&&e.jsxs(P,{type:"button",variant:"ghost",size:"sm",className:"gap-1 text-xs h-7",onClick:N,children:[e.jsx(Je,{className:"h-3.5 w-3.5"}),"Borrar"]})]}),e.jsx("div",{className:`rounded border ${s?"border-gray-200 bg-gray-50":"border-gray-300 bg-white"} overflow-hidden`,children:e.jsx("canvas",{ref:x,width:M,height:L,className:`w-full touch-none ${s?"cursor-not-allowed opacity-70":"cursor-crosshair"}`,style:{maxWidth:"100%",height:"auto",aspectRatio:`${M}/${L}`},onMouseDown:p,onMouseMove:y,onMouseUp:j,onMouseLeave:j,onTouchStart:p,onTouchMove:y,onTouchEnd:j})}),!s&&!u&&e.jsx("p",{className:"text-[10px] text-muted-foreground text-center",children:"Dibuja tu firma con el raton o el dedo"})]})}_({definition:k.signature,EditorPreview:Ft,ConfigPanel:Mt,FormField:Lt});function Dt({block:r}){const t=r.config.section||"portada",a=Pe.find(n=>n.id===t),s=(a==null?void 0:a.label)||t,l=(a==null?void 0:a.color)||"#6b7280";return e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-sm select-none",style:{backgroundColor:`${l}15`,borderLeft:`4px solid ${l}`},children:[e.jsx(Qe,{className:"h-4 w-4 shrink-0",style:{color:l}}),e.jsx("span",{className:"text-sm font-semibold tracking-wide",style:{color:l},children:s}),e.jsx("div",{className:"flex-1 border-t border-dashed ml-2",style:{borderColor:`${l}40`}})]})}function Rt({block:r}){const t=r.config.section||"portada",a=Pe.find(n=>n.id===t),s=(a==null?void 0:a.label)||t,l=(a==null?void 0:a.color)||"#6b7280";return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Seccion"}),e.jsxs("div",{className:"flex items-center gap-2 rounded border px-3 py-2",style:{borderColor:l,backgroundColor:`${l}10`},children:[e.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:l}}),e.jsx("span",{className:"text-sm font-medium",style:{color:l},children:s})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground leading-relaxed",children:["Este separador marca el inicio de la seccion ",e.jsx("strong",{children:s}),". No se puede mover, duplicar ni eliminar. Todos los bloques debajo pertenecen a esta seccion hasta el siguiente separador."]}),t==="intermedia"&&e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed border-l-2 border-green-500 pl-2",children:"La pagina intermedia define la cabecera y pie que se repiten en todas las paginas de contenido del documento."})]})}_({definition:k.section_separator,EditorPreview:Dt,ConfigPanel:Rt});const A=[{value:"all",label:"Todo el contenido",description:"Inserta todas las secciones del sistema",icon:"LayoutTemplate"},{value:"controller_info",label:"Informacion de controladora / Drive Unit",description:"Datos tecnicos y estado de la controladora",icon:"Cpu"},{value:"manipulator_info",label:"Informacion de manipuladores",description:"Datos tecnicos de los manipuladores del sistema",icon:"Bot"},{value:"manipulator_installation",label:"Instalacion de manipuladores",description:"Informacion sobre la instalacion fisica de los manipuladores",icon:"Wrench"},{value:"mechanical_unit_control",label:"Control de la unidad mecanica",description:"Revision y estado de la unidad mecanica",icon:"Cog"},{value:"cabinet_control",label:"Control del armario",description:"Revision y estado del armario electrico",icon:"Server"},{value:"programming_unit_control",label:"Control de la unidad de programacion",description:"Revision del teach pendant / unidad de programacion",icon:"Tablet"},{value:"system_control",label:"Control del sistema",description:"Control general del sistema completo",icon:"Settings"}];Object.fromEntries(A.map(r=>[r.value,r.label]));const zt={LayoutTemplate:Ce,Cpu:Ne,Bot:D,Wrench:je,Cog:be,Server:_e,Tablet:$e,Settings:fe},Ht={controller_info:{bg:"#eff6ff",border:"#3b82f6",text:"#1e40af",icon:"#3b82f6"},manipulator_info:{bg:"#f0fdf4",border:"#22c55e",text:"#166534",icon:"#22c55e"},manipulator_installation:{bg:"#fefce8",border:"#eab308",text:"#854d0e",icon:"#eab308"},mechanical_unit_control:{bg:"#fdf2f8",border:"#ec4899",text:"#9d174d",icon:"#ec4899"},cabinet_control:{bg:"#f5f3ff",border:"#8b5cf6",text:"#5b21b6",icon:"#8b5cf6"},programming_unit_control:{bg:"#ecfeff",border:"#06b6d4",text:"#155e75",icon:"#06b6d4"},system_control:{bg:"#fff7ed",border:"#f97316",text:"#9a3412",icon:"#f97316"}},Ut={bg:"#f3f4f6",border:"#6b7280",text:"#374151",icon:"#6b7280"};function Xt({block:r}){const t=r.config.contentType||"controller_info",a=A.find(c=>c.value===t),s=(a==null?void 0:a.label)??t,l=(a==null?void 0:a.icon)??"Layers",n=zt[l]||Ce,o=Ht[t]??Ut;return e.jsxs("div",{className:"w-full flex items-center gap-2 px-3 py-2 rounded",style:{backgroundColor:o.bg,borderLeft:`4px solid ${o.border}`},children:[e.jsx(n,{className:"h-4 w-4 shrink-0",style:{color:o.icon}}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",style:{color:o.text},children:s})}),e.jsx("div",{className:"flex-1 border-t border-dashed",style:{borderColor:o.border,opacity:.4}})]})}function Ot({block:r,onChange:t}){var s;const a=r.config.contentType||"controller_info";return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Seccion de contenido"}),e.jsx("p",{className:"text-[10px] text-muted-foreground mb-2",children:'Los bloques debajo de este separador pertenecen a esta seccion. Al generar el informe, se insertaran en el bloque "Contenido del sistema" que tenga el mismo tipo de contenido.'}),e.jsx("div",{className:"space-y-1",children:A.filter(l=>l.value!=="all").map(l=>e.jsxs("label",{className:`flex items-start gap-2 p-2 rounded-md border cursor-pointer transition-colors ${a===l.value?"border-blue-400 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("input",{type:"radio",name:`contentType-${r.id}`,value:l.value,checked:a===l.value,onChange:()=>t("contentType",l.value),className:"mt-0.5 h-3.5 w-3.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium",children:l.label}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:l.description})]})]},l.value))})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("p",{className:"text-[10px] text-muted-foreground leading-relaxed",children:["Todos los bloques entre este separador y el siguiente (o el final de la plantilla) formaran el contenido de la seccion ",e.jsx("strong",{children:((s=A.find(l=>l.value===a))==null?void 0:s.label)??a}),"."]})})]})}_({definition:k.component_section,EditorPreview:Xt,ConfigPanel:Ot});const Vt={top:"flex-start",center:"center",bottom:"flex-end"};function Yt({block:r}){const t=r.config,a=T(t.title||"Reporte de mantenimiento"),s=T(t.subtitle||""),l=t.companyName||"PAS Robotics",n=t.logoPosition||"right",o=t.logoVerticalAlign||"center",c=t.backgroundColor||"#000000",d=t.textColor||"#ffffff",x=t.titleSize||24,g=t.logoUrl||"",u=t.height||280,i=t.logoOffsetX||0,h=t.logoOffsetY||0,p=!!t.showAccentLine,y=t.accentLineColor||d,j=t.accentLineWidth||3,N=H(),b=g||N;return e.jsxs("div",{className:"w-full px-8 flex gap-6",style:{backgroundColor:c,height:`${u}px`,flexDirection:n==="right"?"row":"row-reverse",alignItems:Vt[o]||"center"},children:[e.jsxs("div",{className:"flex-1",children:[p&&e.jsx("div",{className:"mb-3",style:{width:"60px",height:`${j}px`,backgroundColor:y}}),e.jsx("p",{className:"text-xs font-medium tracking-widest uppercase mb-2",style:{color:d,opacity:.6},children:l}),e.jsx("h1",{className:"font-extrabold leading-tight",style:{color:d,fontSize:`${x}px`},children:a}),s&&e.jsx("p",{className:"text-sm mt-2",style:{color:d,opacity:.7},children:s})]}),e.jsx("div",{className:"shrink-0",style:{transform:`translate(${i}px, ${h}px)`},children:b?e.jsx("img",{src:b,alt:"Logo",className:"h-20 w-auto object-contain"}):e.jsx("div",{className:"flex h-20 w-20 items-center justify-center",style:{border:"2px dashed rgba(255,255,255,0.3)"},children:e.jsx(D,{className:"h-10 w-10",style:{color:"rgba(255,255,255,0.4)"}})})})]})}function z({value:r,onChange:t,min:a,max:s,fallback:l}){return e.jsx(f,{type:"number",min:a,max:s,value:r,onChange:n=>{const o=n.target.value;o!==""&&t(Number(o))},onBlur:n=>{const o=Number(n.target.value);!o||isNaN(o)?t(l):t(Math.max(a,Math.min(s,o)))},className:"h-8"})}function K({label:r,value:t,fallback:a,onChange:s}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:r}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:t||a,onChange:l=>s(l.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:t||a,onChange:l=>s(l.target.value),className:"h-8 font-mono text-xs flex-1"})]})]})}function Wt({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Titulo del reporte"}),e.jsx(B,{value:a.title||"",onChange:s=>t("title",s),placeholder:"Ej: Reporte de {{intervencion.actividad}}"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Subtitulo"}),e.jsx(B,{value:a.subtitle||"",onChange:s=>t("subtitle",s),placeholder:"Ej: {{sistema.nombre}} - {{sistema.fabricante}}"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Nombre de empresa"}),e.jsx(f,{value:a.companyName||"",onChange:s=>t("companyName",s.target.value),className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Posicion horizontal del logo"}),e.jsx("div",{className:"flex gap-1",children:["left","right"].map(s=>e.jsx("button",{className:`flex-1 rounded border px-2 py-1 text-xs ${(a.logoPosition||"right")===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("logoPosition",s),children:s==="left"?"Izquierda":"Derecha"},s))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Alineacion vertical del logo"}),e.jsx("div",{className:"flex gap-1",children:["top","center","bottom"].map(s=>e.jsx("button",{className:`flex-1 rounded border px-2 py-1 text-xs ${(a.logoVerticalAlign||"center")===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("logoVerticalAlign",s),children:s==="top"?"Arriba":s==="center"?"Centro":"Abajo"},s))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Ajuste posicion del logo"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Horizontal (px)"}),e.jsx(z,{value:a.logoOffsetX||0,onChange:s=>t("logoOffsetX",s),min:-200,max:200,fallback:0})]}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Vertical (px)"}),e.jsx(z,{value:a.logoOffsetY||0,onChange:s=>t("logoOffsetY",s),min:-200,max:200,fallback:0})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"URL del logo (opcional)"}),e.jsx(f,{value:a.logoUrl||"",onChange:s=>t("logoUrl",s.target.value),placeholder:"Vacio = usa logo de Configuracion General",className:"h-8"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Si no se indica, usa el logo de Configuracion > General."})]}),e.jsxs("div",{className:"space-y-1.5 border-t pt-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{className:"text-xs",children:"Linea decorativa"}),e.jsx("button",{className:`rounded border px-2 py-0.5 text-xs ${a.showAccentLine?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("showAccentLine",!a.showAccentLine),children:a.showAccentLine?"Activada":"Desactivada"})]}),!!a.showAccentLine&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{label:"Color de la linea",value:a.accentLineColor||"",fallback:"#ffffff",onChange:s=>t("accentLineColor",s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Grosor de la linea (px)"}),e.jsx(z,{value:a.accentLineWidth||3,onChange:s=>t("accentLineWidth",s),min:1,max:10,fallback:3})]})]})]}),e.jsx(K,{label:"Color de fondo",value:a.backgroundColor||"",fallback:"#000000",onChange:s=>t("backgroundColor",s)}),e.jsx(K,{label:"Color del texto",value:a.textColor||"",fallback:"#ffffff",onChange:s=>t("textColor",s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Tamano del titulo (px)"}),e.jsx(z,{value:a.titleSize||24,onChange:s=>t("titleSize",s),min:12,max:60,fallback:24})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Altura del banner (px)"}),e.jsx(z,{value:a.height||280,onChange:s=>t("height",s),min:100,max:600,fallback:280})]})]})}_({definition:k.cover_header,EditorPreview:Yt,ConfigPanel:Wt});function Gt({block:r}){const t=r.config,a=T(t.title||"Reporte de mantenimiento"),s=T(t.subtitle||""),l=t.backgroundColor||"#1f2937",n=t.textColor||"#ffffff",o=t.textSize||12,c=t.logoSize||24,d=t.logoUrl||"",x=t.height||40,g=H(),u=d||g;return e.jsxs("div",{className:"w-full px-4 flex items-center justify-between",style:{backgroundColor:l,height:`${x}px`},children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",style:{color:n,fontSize:`${o}px`},children:a}),s&&e.jsx("span",{style:{color:n,opacity:.6,fontSize:`${Math.max(o-2,8)}px`},children:s})]}),e.jsx("div",{className:"shrink-0",children:u?e.jsx("img",{src:u,alt:"Logo",className:"w-auto object-contain",style:{height:`${c}px`}}):e.jsx("div",{className:"flex items-center justify-center",style:{height:`${c}px`,width:`${c}px`},children:e.jsx(D,{className:"h-4 w-4",style:{color:"rgba(255,255,255,0.5)"}})})})]})}function J({value:r,onChange:t,min:a,max:s,fallback:l}){return e.jsx(f,{type:"number",min:a,max:s,value:r,onChange:n=>{const o=n.target.value;o!==""&&t(Number(o))},onBlur:n=>{const o=Number(n.target.value);!o||isNaN(o)?t(l):t(Math.max(a,Math.min(s,o)))},className:"h-8"})}function ie({label:r,value:t,fallback:a,onChange:s}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:r}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:t||a,onChange:l=>s(l.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:t||a,onChange:l=>s(l.target.value),className:"h-8 font-mono text-xs flex-1"})]})]})}function Kt({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Titulo"}),e.jsx(B,{value:a.title||"",onChange:s=>t("title",s),placeholder:"Ej: {{intervencion.actividad}} - {{cliente.nombre}}"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Subtitulo"}),e.jsx(B,{value:a.subtitle||"",onChange:s=>t("subtitle",s),placeholder:"Ej: {{sistema.nombre}}"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"URL del logo (opcional)"}),e.jsx(f,{value:a.logoUrl||"",onChange:s=>t("logoUrl",s.target.value),placeholder:"Vacio = usa logo de Configuracion General",className:"h-8"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Si no se indica, usa el logo de Configuracion > General."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Tamano del logo (px)"}),e.jsx(J,{value:a.logoSize||24,onChange:s=>t("logoSize",s),min:12,max:80,fallback:24})]}),e.jsx(ie,{label:"Color de fondo",value:a.backgroundColor||"",fallback:"#1f2937",onChange:s=>t("backgroundColor",s)}),e.jsx(ie,{label:"Color del texto",value:a.textColor||"",fallback:"#ffffff",onChange:s=>t("textColor",s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Tamano del texto (px)"}),e.jsx(J,{value:a.textSize||12,onChange:s=>t("textSize",s),min:8,max:24,fallback:12})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Altura (px)"}),e.jsx(J,{value:a.height||40,onChange:s=>t("height",s),min:24,max:120,fallback:40})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Esta cabecera aparece en la parte superior de todas las paginas intermedias del documento."})]})}_({definition:k.page_header,EditorPreview:Gt,ConfigPanel:Kt});function Jt({block:r}){const t=r.config,a=t.companyName||"PAS Robotics",s=t.showPageNumbers!==!1,l=t.backgroundColor||"#1f2937",n=t.textColor||"#ffffff",o=t.textSize||10,c=t.backgroundImage||"",d=t.height||36;return e.jsxs("div",{className:"w-full relative overflow-hidden flex items-center justify-between px-4",style:{height:`${d}px`,backgroundColor:l},children:[c&&e.jsx("img",{src:c,alt:"",className:"absolute inset-0 w-full h-full object-cover"}),e.jsx("span",{className:"font-bold relative z-[1]",style:{color:n,fontSize:`${o}px`},children:a}),s&&e.jsx("span",{className:"relative z-[1]",style:{color:n,opacity:.8,fontSize:`${Math.max(o-1,7)}px`},children:typeof t._pageNumber=="number"?`Pagina ${t._pageNumber} de ${t._totalPages}`:"Pagina X de N"})]})}function de({value:r,onChange:t,min:a,max:s,fallback:l}){return e.jsx(f,{type:"number",min:a,max:s,value:r,onChange:n=>{const o=n.target.value;o!==""&&t(Number(o))},onBlur:n=>{const o=Number(n.target.value);!o||isNaN(o)?t(l):t(Math.max(a,Math.min(s,o)))},className:"h-8"})}function xe({label:r,value:t,fallback:a,onChange:s}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:r}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:t||a,onChange:l=>s(l.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:t||a,onChange:l=>s(l.target.value),className:"h-8 font-mono text-xs flex-1"})]})]})}function Zt({block:r,onChange:t}){const a=r.config,s=E.useRef(null),l=a.backgroundImage||"",n=o=>{var x;const c=(x=o.target.files)==null?void 0:x[0];if(!c||!c.type.startsWith("image/"))return;if(c.size>500*1024){alert("La imagen no puede superar los 500KB");return}const d=new FileReader;d.onload=()=>t("backgroundImage",d.result),d.readAsDataURL(c),o.target.value=""};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Nombre de empresa"}),e.jsx(f,{value:a.companyName||"",onChange:o=>t("companyName",o.target.value),className:"h-8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showPageNumbers",checked:a.showPageNumbers!==!1,onChange:o=>t("showPageNumbers",o.target.checked),className:"h-4 w-4 rounded"}),e.jsx(m,{htmlFor:"showPageNumbers",className:"text-xs cursor-pointer",children:"Mostrar numeros de pagina"})]}),e.jsx(xe,{label:"Color de fondo",value:a.backgroundColor||"",fallback:"#1f2937",onChange:o=>t("backgroundColor",o)}),e.jsx(xe,{label:"Color del texto",value:a.textColor||"",fallback:"#ffffff",onChange:o=>t("textColor",o)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Tamano del texto (px)"}),e.jsx(de,{value:a.textSize||10,onChange:o=>t("textSize",o),min:6,max:18,fallback:10})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Imagen de fondo (opcional)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:s,type:"file",accept:"image/*",onChange:n,className:"hidden"}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>{var o;return(o=s.current)==null?void 0:o.click()},children:[e.jsx(ge,{className:"h-3 w-3 mr-1"}),l?"Cambiar":"Subir"]}),l&&e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>t("backgroundImage",""),className:"text-destructive hover:text-destructive",children:[e.jsx(pe,{className:"h-3 w-3 mr-1"}),"Quitar"]})]}),l&&e.jsx("div",{className:"mt-1 h-10 w-full rounded border overflow-hidden",children:e.jsx("img",{src:l,alt:"Fondo",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"PNG o JPG. Max 500KB."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Altura (px)"}),e.jsx(de,{value:a.height||36,onChange:o=>t("height",o),min:20,max:80,fallback:36})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Este pie aparece en la parte inferior de todas las paginas de la seccion donde se coloque."})]})}_({definition:k.page_footer,EditorPreview:Jt,ConfigPanel:Zt});function Qt({block:r}){const t=r.config,a=t.logoUrl||"",s=t.backgroundColor||"#111827",l=H(),n=a||l;return e.jsx("div",{className:"w-full flex-1 flex items-center justify-center",style:{backgroundColor:s},children:n?e.jsx("img",{src:n,alt:"Logo",className:"max-h-24 max-w-[240px] object-contain"}):e.jsxs("div",{className:"flex flex-col items-center gap-2 opacity-60",children:[e.jsx(D,{className:"h-14 w-14 text-white"}),e.jsx("span",{className:"text-white/50 text-[10px]",children:"Logo de empresa"})]})})}function ea({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"URL del logo (opcional)"}),e.jsx(f,{value:a.logoUrl||"",onChange:s=>t("logoUrl",s.target.value),placeholder:"Vacio = usa logo de Configuracion General",className:"h-8"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Si no se indica, usa el logo de Configuracion > General."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Color de fondo"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.backgroundColor||"#111827",onChange:s=>t("backgroundColor",s.target.value),className:"h-8 w-8 cursor-pointer rounded border"}),e.jsx(f,{value:a.backgroundColor||"#111827",onChange:s=>t("backgroundColor",s.target.value),className:"h-8 font-mono text-xs flex-1"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Pagina final del documento con fondo oscuro y logo centrado."})]})}_({definition:k.back_cover,EditorPreview:Qt,ConfigPanel:ea});function sa({}){return e.jsxs("div",{className:"w-full flex items-center gap-3 py-2 px-4",children:[e.jsx("div",{className:"flex-1 border-t-2 border-dashed border-muted-foreground/30"}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground/50 shrink-0",children:[e.jsx(os,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-medium",children:"Salto de pagina"})]}),e.jsx("div",{className:"flex-1 border-t-2 border-dashed border-muted-foreground/30"})]})}function ta({}){return e.jsx("div",{className:"space-y-3",children:e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Este bloque fuerza un salto de pagina. Todo el contenido posterior aparecera en la siguiente pagina."})})}_({definition:k.page_break,EditorPreview:sa,ConfigPanel:ta});const aa={LayoutTemplate:ke,Cpu:Ne,Bot:D,Wrench:je,Cog:be,Server:_e,Tablet:$e,Settings:fe};function la({block:r}){const t=r.config.contentType||"all",a=A[0],s=A.find(n=>n.value===t)??a,l=aa[s.icon]||ke;return e.jsxs("div",{className:"w-full border-2 border-dashed border-blue-300 bg-blue-50/50 rounded-md p-4 flex flex-col items-center justify-center gap-1.5",children:[e.jsx(l,{className:"h-7 w-7 text-blue-400"}),e.jsx("span",{className:"text-xs font-medium text-blue-600",children:s.label}),e.jsx("span",{className:"text-[10px] text-blue-400 text-center max-w-[240px]",children:s.description}),t!=="all"&&e.jsx("span",{className:"mt-1 inline-block px-2 py-0.5 rounded-full bg-blue-100 text-[9px] font-medium text-blue-600 uppercase tracking-wide",children:"Seccion parcial"})]})}function ra({block:r,onChange:t}){const s=r.config.contentType||"all";return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs font-semibold",children:"Tipo de contenido"}),e.jsx("p",{className:"text-[10px] text-muted-foreground mb-2",children:"Selecciona que informacion del sistema se insertara en este bloque"}),e.jsx("div",{className:"space-y-1",children:A.map(l=>e.jsxs("label",{className:`flex items-start gap-2 p-2 rounded-md border cursor-pointer transition-colors ${s===l.value?"border-blue-400 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("input",{type:"radio",name:`contentType-${r.id}`,value:l.value,checked:s===l.value,onChange:()=>{t("contentType",l.value),t("label",l.label)},className:"mt-0.5 h-3.5 w-3.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium",children:l.label}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:l.description})]})]},l.value))})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsx("p",{className:"text-[10px] text-muted-foreground leading-relaxed",children:"Al generar un informe, este bloque se reemplazara por las secciones correspondientes definidas en la plantilla del componente del sistema."})})]})}_({definition:k.content_placeholder,EditorPreview:la,ConfigPanel:ra});const na=[{title:"Intervencion",rows:[["Actividad","Nivel 1","Horas","2:30"],["N° trabajo","OT26-XXXXX","Fecha","DD/MM/YYYY"],["Hora inicio","HH:MM","Hora fin","HH:MM"]]},{title:"Personal",rows:[["Tecnico PAS","Nombre","Tecnico cliente","Nombre"],["Tel. tecnico","+34 XXX XX XX XX","Tel. contacto","+34 XXX XX XX XX"],["Email tecnico","email@empresa.com","Email contacto","email@cliente.com"]]}];function oa({block:r}){const t=r.config,a=t.title||"",s=t.sectionBg||t.accentColor||"#1e40af",l=t.sectionColor||"#ffffff",n=t.labelBg||"#f9fafb",o=t.labelColor||"#4b5563";return e.jsxs("div",{className:"w-full",children:[a&&e.jsx("div",{className:"text-xs font-bold uppercase tracking-wider mb-2 px-1",style:{color:s},children:a}),e.jsx("div",{className:"rounded-sm border border-gray-200 overflow-hidden",children:e.jsx("table",{className:"w-full border-collapse text-[10px]",children:e.jsx("tbody",{children:na.map((c,d)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-3 py-1 font-bold uppercase tracking-wider",style:{backgroundColor:s,color:l},children:c.title})},`h-${d}`),c.rows.map((x,g)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"font-semibold px-2 py-1 border-r border-gray-100 whitespace-nowrap",style:{backgroundColor:n,color:o,width:"18%"},children:x[0]}),e.jsx("td",{className:"px-2 py-1 text-gray-400 border-r border-gray-100",style:{width:"32%"},children:x[1]}),e.jsx("td",{className:"font-semibold px-2 py-1 border-r border-gray-100 whitespace-nowrap",style:{backgroundColor:n,color:o,width:"18%"},children:x[2]}),e.jsx("td",{className:"px-2 py-1 text-gray-400",style:{width:"32%"},children:x[3]})]},`r-${d}-${g}`))]}))})})})]})}function V({label:r,value:t,onChange:a}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:r}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:t,onChange:s=>a(s.target.value),className:"h-8 w-10 rounded border cursor-pointer"}),e.jsx(f,{value:t,onChange:s=>a(s.target.value),className:"h-8 flex-1 font-mono text-xs"})]})]})}function ca({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Titulo (opcional)"}),e.jsx(f,{value:a.title||"",onChange:s=>t("title",s.target.value),placeholder:"Ej: Datos de la intervencion",className:"h-8"})]}),e.jsx("div",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wider pt-1",children:"Cabeceras de seccion"}),e.jsx(V,{label:"Fondo cabecera",value:a.sectionBg||a.accentColor||"#1e40af",onChange:s=>t("sectionBg",s)}),e.jsx(V,{label:"Texto cabecera",value:a.sectionColor||"#ffffff",onChange:s=>t("sectionColor",s)}),e.jsx("div",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wider pt-1",children:"Etiquetas de campo"}),e.jsx(V,{label:"Fondo etiqueta",value:a.labelBg||"#f9fafb",onChange:s=>t("labelBg",s)}),e.jsx(V,{label:"Texto etiqueta",value:a.labelColor||"#4b5563",onChange:s=>t("labelColor",s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Alineacion vertical en pagina"}),e.jsx("div",{className:"flex gap-1",children:["top","center","bottom"].map(s=>e.jsx("button",{className:`flex-1 rounded border px-2 py-1 text-xs ${(a.verticalAlign||"top")===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("verticalAlign",s),children:s==="top"?"Arriba":s==="center"?"Centro":"Abajo"},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Datos de la intervencion agrupados por secciones. Se rellenan automaticamente al crear el informe."})]})}const ia=[{title:"Intervencion",rows:[["Actividad","actividad","Nivel 1","Horas","horas","2:30"],["N° trabajo","ordenTrabajo","OT26-XXXXX","Fecha","fecha","DD/MM/YYYY"],["Hora inicio","horaInicio","HH:MM","Hora fin","horaFin","HH:MM"]]},{title:"Personal",rows:[["Tecnico PAS","tecnicoPas","Nombre","Tecnico cliente","tecnicoCliente","Nombre"],["Tel. tecnico","telTecnico","+34 XXX XX XX XX","Tel. contacto","telContacto","+34 XXX XX XX XX"],["Email tecnico","emailTecnico","email@empresa.com","Email contacto","emailContacto","email@cliente.com"]]}];function da({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.title||"",o=l.sectionBg||l.accentColor||"#1e40af",c=l.sectionColor||"#ffffff",d=l.labelBg||"#f9fafb",x=l.labelColor||"#4b5563",g=t||{},u=(i,h)=>{s||a({...g,[i]:h})};return e.jsxs("div",{className:"w-full",children:[n&&e.jsx("div",{className:"text-xs font-bold uppercase tracking-wider mb-2 px-1",style:{color:o},children:n}),e.jsx("div",{className:"rounded-sm border border-gray-200 overflow-hidden",children:e.jsx("table",{className:"w-full border-collapse text-xs",children:e.jsx("tbody",{children:ia.map((i,h)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-3 py-1 font-bold uppercase tracking-wider text-xs",style:{backgroundColor:o,color:c},children:i.title})},`h-${h}`),i.rows.map((p,y)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"font-semibold px-2 py-1 border-r border-gray-100 whitespace-nowrap text-xs",style:{backgroundColor:d,color:x,width:"18%"},children:p[0]}),e.jsx("td",{className:"border-r border-gray-100 p-0",style:{width:"32%"},children:e.jsx(f,{type:"text",value:g[p[1]]||"",placeholder:p[2],onChange:j=>u(p[1],j.target.value),readOnly:s,disabled:s,className:"h-auto py-1 px-2 text-xs border-0 rounded-none bg-transparent focus-visible:ring-1 focus-visible:ring-inset"})}),e.jsx("td",{className:"font-semibold px-2 py-1 border-r border-gray-100 whitespace-nowrap text-xs",style:{backgroundColor:d,color:x,width:"18%"},children:p[3]}),e.jsx("td",{className:"p-0",style:{width:"32%"},children:e.jsx(f,{type:"text",value:g[p[4]]||"",placeholder:p[5],onChange:j=>u(p[4],j.target.value),readOnly:s,disabled:s,className:"h-auto py-1 px-2 text-xs border-0 rounded-none bg-transparent focus-visible:ring-1 focus-visible:ring-inset"})})]},`r-${h}-${y}`))]}))})})})]})}_({definition:k.intervention_data,EditorPreview:oa,ConfigPanel:ca,FormField:da});function xa({block:r}){const t=r.config,a=t.title||"",s=t.logoUrl||"",l=H(),n=s||l;return e.jsxs("div",{className:"w-full",children:[a&&e.jsx("h3",{className:"text-xs font-bold mb-1.5 px-1",children:a}),e.jsxs("div",{className:"flex items-center gap-4 p-3",children:[e.jsx("div",{className:"shrink-0",children:n?e.jsx("img",{src:n,alt:"Logo",className:"h-12 w-auto object-contain"}):e.jsx("div",{className:"w-14 h-14 bg-gray-100 flex items-center justify-center",children:e.jsx(ve,{className:"h-7 w-7 text-gray-300"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-gray-800",children:"Nombre del cliente"}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:"Direccion, CP Ciudad (Provincia)"})]})]})]})}function ma({block:r,onChange:t}){const a=r.config;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Titulo (opcional)"}),e.jsx(f,{value:a.title||"",onChange:s=>t("title",s.target.value),placeholder:"Ej: Datos del cliente",className:"h-8"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-xs",children:"Alineacion vertical en pagina"}),e.jsx("div",{className:"flex gap-1",children:["top","center","bottom"].map(s=>e.jsx("button",{className:`flex-1 rounded border px-2 py-1 text-xs ${(a.verticalAlign||"top")===s?"border-primary bg-primary/5 text-primary":"border-border hover:bg-accent"}`,onClick:()=>t("verticalAlign",s),children:s==="top"?"Arriba":s==="center"?"Centro":"Abajo"},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Muestra los datos del cliente (nombre, logo, direccion) del informe. Se rellena automaticamente con los datos del cliente asignado."})]})}function ha({block:r,value:t,onChange:a,readOnly:s}){const l=r.config,n=l.title||"",o=l.logoUrl||"",c=H(),d=o||c,x=t||{},g=(u,i)=>{s||a({...x,[u]:i})};return e.jsxs("div",{className:"w-full",children:[n&&e.jsx("h3",{className:"text-xs font-bold mb-1.5 px-1",children:n}),e.jsxs("div",{className:"flex items-center gap-4 p-3",children:[e.jsx("div",{className:"shrink-0",children:d?e.jsx("img",{src:d,alt:"Logo",className:"h-14 w-auto object-contain"}):e.jsx("div",{className:"w-14 h-14 bg-gray-100 flex items-center justify-center",children:e.jsx(ve,{className:"h-7 w-7 text-gray-300"})})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx(f,{type:"text",value:x.nombre||"",placeholder:"Nombre del cliente",onChange:u=>g("nombre",u.target.value),readOnly:s,disabled:s,className:"h-auto py-0.5 px-1 text-sm font-bold border-0 border-b border-transparent hover:border-gray-200 focus-visible:border-primary bg-transparent rounded-none focus-visible:ring-0"}),e.jsx(f,{type:"text",value:x.direccion||"",placeholder:"Direccion completa",onChange:u=>g("direccion",u.target.value),readOnly:s,disabled:s,className:"h-auto py-0.5 px-1 text-xs text-gray-500 border-0 border-b border-transparent hover:border-gray-200 focus-visible:border-primary bg-transparent rounded-none focus-visible:ring-0"})]})]})]})}_({definition:k.client_data,EditorPreview:xa,ConfigPanel:ma,FormField:ha});export{Xe as A,ja as B,Se as D,ba as F,ke as L,rs as P,te as S,as as a,va as b,k as c,ks as d,fa as e,ga as f,Na as g,G as u};
